System.register("chunks:///_virtual/AdBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts","./AdMgr.ts","./TopLoad.ts","./TweenTools.ts","./Main.ts","./AudioMgr.ts"],(function(o){var t,e,n,i,s,c,r,a,l,u,d,p,B;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.initializerDefineProperty},function(o){n=o.cclegacy,i=o.Node,s=o._decorator,c=o.Component},function(o){r=o.Global,a=o.AssetList},function(o){l=o.AdMgr},function(o){u=o.TopLoad},function(o){d=o.TweenTool},function(o){p=o.Main},function(o){B=o.AudioMgr}],execute:function(){var f,g,A,x,b;n._RF.push({},"f38d7Q6eWhH1rmoH8N5j1jH","AdBox",void 0);const{ccclass:h,property:P}=s;o("AdBox",(f=h("AdBox"),g=P(i),f((b=t((x=class extends c{constructor(...o){super(...o),this.Cb=void 0,e(this,"Box",b,this)}start(){d.Pop(this.Box)}SaveButtonClick(){r.IsDebug&&console.log("点击复活按钮"),B.instance.PlayButton(),l.Instance.ShowVideoAd((o=>{o&&(u.instance.HidePop(a.Pop.AdBox),this.Cb())}))}NoThanksButtonClick(){r.IsDebug&&console.log("点击不用了"),B.instance.PlayButton(),p.instance.UpdateScene(a.Scene.LoginScene),u.instance.HidePop(a.Pop.AdBox)}}).prototype,"Box",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=x))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/AdMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts","./WxAdMgr.ts"],(function(e){var i,n,t,r,o,a,d,s;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){t=e.cclegacy,r=e.CCString,o=e._decorator,a=e.Component},function(e){d=e.Global},function(e){s=e.WxAdMgr}],execute:function(){var l,c,p,u,I,h,y,b,g,A;t._RF.push({},"36107tyFPdINbLKG01OyLza","AdMgr",void 0);const{ccclass:f,property:w}=o;e("AdMgr",(l=f("AdMgr"),c=w({type:r,displayName:"视频广告id"}),p=w({type:r,displayName:"banner广告"}),u=w({type:r,displayName:"格子广告"}),l(((A=class e extends a{constructor(...e){super(...e),n(this,"VideoId",y,this),n(this,"BannerId",b,this),n(this,"GridId",g,this),this.Cb=void 0}onLoad(){e.Instance=this}Init(){d.IsWx&&s.Instance.Init(this.VideoId,this.BannerId,this.GridId)}ShowVideoAd(e){d.IsWx?s.Instance.ShowRewardVideoAd(e):e(!0)}ShowBannerAd(e){d.IsWx&&s.Instance.ShowBannerAd(e)}ShowGridAd(e){d.IsWx&&s.Instance.ShowGridAd(e)}}).Instance=null,y=i((h=A).prototype,"VideoId",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=i(h.prototype,"BannerId",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=i(h.prototype,"GridId",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=h))||I));t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["cc","./ResMgr.ts"],(function(t){var o,n,i,s;return{setters:[function(t){o=t.cclegacy,n=t._decorator,i=t.AudioSourceComponent},function(t){s=t.ResMgr}],execute:function(){var e,c;o._RF.push({},"a7d8bxsoM1G/aqXNfx4QovA","AudioMgr",void 0);const{ccclass:u,property:l}=n;t("AudioMgr",u("AudioMgr")(((c=class t{constructor(){this.BgSound=null,this.EffectSound={},this.IsMute=!1}static get instance(){return this._instance||(this._instance=new t),this._instance}DestroyBgSound(){this.BgSound&&(this.BgSound.stop(),this.BgSound.clip=null,this.BgSound.node&&this.BgSound.node.destroy(),this.BgSound=null,console.log("背景音乐组件已销毁"))}Init(){this.BgSound=new i}PlayBgSound(t,o=.6){this.BgSound.clip?.name===t&&this.BgSound.playing?console.log("背景音乐正在播放，无法重复播放"):(this.IsMute=!1,this.BgSound.clip=s.instance.Audio[t],this.BgSound.play(),this.BgSound.volume=o,this.BgSound.loop=!0)}StopBgSound(){this.IsMute=!0,this.BgSound.stop();for(let t in this.EffectSound)this.EffectSound[t].stop()}PlayEffect(t,o){if(this.EffectSound[o]?.clip?.name===t&&this.EffectSound[o].playing)console.log(`音效 ${t} 正在播放，无法重复播放`);else if(!this.IsMute){if(this.EffectSound[o])this.EffectSound[o].clip=s.instance.Audio[t],this.EffectSound[o].loop=!1;else{let n=new i;n.clip=s.instance.Audio[t],n.loop=!1,this.EffectSound[o]=n}this.EffectSound[o].play()}}PlayButton(){this.PlayEffect("click","click")}PlayCoin(){this.PlayEffect("coinload","click")}PlayBomb(){this.PlayEffect("boom","click")}})._instance=null,e=c))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/ballmove.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RubiksCube.ts","./Global2.ts"],(function(t){var e,i,o,n,s,a,r,l,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.EventTarget,s=t.Button,a=t._decorator,r=t.Component,l=t.Vec3,c=t.tween},function(t){u=t.EventSystem},function(t){h=t.Global}],execute:function(){var p,d,g,b,m,y,v,f,x,w,A;o._RF.push({},"a4eaapSXlJCwJO4AhrzSibW","ballmove",void 0);const k=t("EventSysteml",new n),{ccclass:z,property:S}=a;t("CubeController",(p=z("CubeController"),d=S(s),g=S(s),b=S(s),m=S(s),p((f=e((v=class extends r{constructor(...t){super(...t),this.isInteracting=!1,i(this,"buttonW",f,this),i(this,"buttonA",x,this),i(this,"buttonS",w,this),i(this,"buttonD",A,this),this.epsilon=1e-4,this.moveDuration=.2,this.cooldown=!1,this.cooldownDuration=.5}onLoad(){u.on("moveBall",this.handleMovement,this)}onDestroy(){u.off("moveBall",this.handleMovement,this)}start(){}startCooldown(){this.cooldown=!0,this.scheduleOnce((()=>{this.cooldown=!1,console.log("Cooldown finished.")}),this.cooldownDuration)}handleMovement({relation:t,plane:e}){if(this.isInteracting)return void console.log("Movement in progress, ignoring this request.");this.isInteracting=!0;let i=new l,o=!1;const n=this.node.getPosition();if(this.isApproximatelyEqual(n.y,2.2)&&"XOZ"===e)switch(t){case"forward":i.set(0,0,1.1);break;case"backward":i.set(0,0,-1.1);break;case"left":i.set(-1.1,0,0);break;case"right":i.set(1.1,0,0)}else if(this.isApproximatelyEqual(n.z,2.2)&&"XOY"===e)switch(t){case"up":i.set(0,1.1,0);break;case"down":i.set(0,-1.1,0);break;case"left":i.set(-1.1,0,0);break;case"right":i.set(1.1,0,0)}else{if(!this.isApproximatelyEqual(n.x,-2.2)||"YOZ"!==e)return console.log("Invalid plane or position for movement."),this.isInteracting=!1,void k.emit("changeBox",o);switch(t){case"up":i.set(0,1.1,0);break;case"down":i.set(0,-1.1,0);break;case"forward":i.set(0,0,1.1);break;case"backward":i.set(0,0,-1.1)}}let s=n.clone().add(i);console.log(`🚀 目标位置: ${s.toString()}`);this.isPositionValid(s);const a=this.isPositionOccupied(s);this.logPlayerAction("baxmove",void 0,void 0,void 0,n,a,s,t,e),this.isPositionValid(s)&&!this.isPositionOccupied(s)?(console.log(`Moving to new position: ${s.toString()}`),c(this.node).to(this.moveDuration,{position:s},{easing:"quadInOut"}).call((()=>{this.isInteracting=!1,o=!0,k.emit("changeBox",o)})).start()):(console.log("Invalid or occupied position, shaking node."),this.shakeNode(),k.emit("changeBox",o))}async logPlayerAction(t,e,i,o,n,s,a,r,l){const c=localStorage.getItem("currentUsername"),u=localStorage.getItem("sessionToken");if(!c)return void console.error("❌ 错误：用户名未找到。请确保玩家已正确登录。");if(!u)return void console.error("❌ 错误：Session token 未找到。请确保玩家已正确认证。");function p(t,e,i="0"){const o=String(t);return o.length>=e?o:i.repeat(e-o.length)+o}const d=new Date,g=new Date(d.getTime()+288e5),b=`${g.getFullYear()}-${p(g.getMonth()+1,2)}-${p(g.getDate(),2)} ${p(g.getHours(),2)}:${p(g.getMinutes(),2)}:${p(g.getSeconds(),2)}.${p(g.getMilliseconds(),3)}`,m=h.currentLevelIndex??0,y=void 0!==i&&void 0!==o,v=void 0!==n&&void 0!==s&&void 0!==a&&void 0!==r&&void 0!==l;if(!y&&!v)return void console.error("❌ 错误：未提供完整的参数。请提供 Cube_Dimention 和 Cube_Direction，或者 Object_xyz, Object_judge 和 Flag_xyz。");const f={tableName:"game3",data:{Usr_ID:c,Timestep:b,Level:m,Operation:t}};y?(f.data.Cube_Axis=e,f.data.Cube_Dimention=i,f.data.Cube_Direction=o?o.toString():null):v&&(f.data.Object_xyz=n?n.toString():null,f.data.Object_judge=s,f.data.Flag_xyz=a?a.toString():null,f.data.Object_direction=r,f.data.object_panel=l);try{const t=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify(f)});if(!t.ok)throw new Error("❌ 错误：无法记录玩家操作");const e=await t.json();console.log("✅ 玩家操作记录成功：",e)}catch(t){console.error("❌ 记录玩家操作时发生错误：",t)}}isPositionValid(t){return this.isApproximatelyEqual(t.y,2.2)||this.isApproximatelyEqual(t.y,-2.2)?t.x>=-1.1-this.epsilon&&t.x<=1.1+this.epsilon&&t.z>=-1.1-this.epsilon&&t.z<=1.1+this.epsilon:this.isApproximatelyEqual(t.z,2.2)||this.isApproximatelyEqual(t.z,-2.2)?t.x>=-1.1-this.epsilon&&t.x<=1.1+this.epsilon&&t.y>=-1.1-this.epsilon&&t.y<=1.1+this.epsilon:!(!this.isApproximatelyEqual(t.x,2.2)&&!this.isApproximatelyEqual(t.x,-2.2))&&(t.y>=-1.1-this.epsilon&&t.y<=1.1+this.epsilon&&t.z>=-1.1-this.epsilon&&t.z<=1.1+this.epsilon)}isApproximatelyEqual(t,e){return Math.abs(t-e)<this.epsilon}isPositionOccupied(t){const e=this.node.parent;if(e)for(let i=0;i<e.children.length;i++){const o=e.children[i];if("lumbermill"!==o.name&&(o!==this.node&&this.isApproximatelyEqualVec3(o.getPosition(),t)))return!0}return!1}isApproximatelyEqualVec3(t,e){return this.isApproximatelyEqual(t.x,e.x)&&this.isApproximatelyEqual(t.y,e.y)&&this.isApproximatelyEqual(t.z,e.z)}shakeNode(){const t=this.node.getPosition(),e=.2,i=.01;c(this.node).by(i,{position:new l(e,0,0)}).by(i,{position:new l(-.4,0,0)}).by(i,{position:new l(.4,0,0)}).by(i,{position:new l(-.2,0,0)}).to(i,{position:t}).call((()=>{this.isInteracting=!1,console.log("Shake animation complete, lock released.")})).start()}}).prototype,"buttonW",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(v.prototype,"buttonA",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(v.prototype,"buttonS",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(v.prototype,"buttonD",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/BgLoad.ts",["cc"],(function(t){var i,s,e,r;return{setters:[function(t){i=t.cclegacy,s=t._decorator,e=t.Component,r=t.Vec3}],execute:function(){var g,o;i._RF.push({},"a1874wl9XRCEbK5t0PXsFrU","BgLoad",void 0);const{ccclass:n,property:a}=s;t("BgLoad",n("BgLoad")(((o=class t extends e{constructor(...t){super(...t),this.BgArray=[],this.BgHeight=1624}onLoad(){t.instance=this}start(){this.BgArray=[this.node.getChildByName("bg0"),this.node.getChildByName("bg1"),this.node.getChildByName("bg2")];for(let t=1;t<this.BgArray.length;t++)this.BgArray[t].setPosition(this.BgArray[t-1].getPosition().add(new r(0,-this.BgHeight)))}BgMove(t){for(let i=0;i<this.BgArray.length;i++){let s=this.BgArray[i].getPosition().add(new r(0,t));this.BgArray[i].setPosition(s)}for(let t=0;t<this.BgArray.length;t++)this.BgArray[t].getPosition().y<=-this.BgHeight&&(0==t?this.BgArray[0].setPosition(this.BgArray[this.BgArray.length-1].getPosition().add(new r(0,this.BgHeight))):this.BgArray[t].setPosition(this.BgArray[t-1].getPosition().add(new r(0,this.BgHeight))))}}).instance=null,g=o))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/boxmovecontroller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts"],(function(e){var o,t,n,r,i,s,l,a,c,d,u,g;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Prefab,i=e.Node,s=e._decorator,l=e.Component,a=e.Collider,c=e.Button,d=e.director,u=e.instantiate},function(e){g=e.Global}],execute:function(){var h,p,f,m,b,v,y;n._RF.push({},"567e1KbFABNE7fijsx51bnO","boxmovecontroller",void 0);const{ccclass:I,property:N}=s;e("CollisionHandler",(h=I("CollisionHandler"),p=N(r),f=N(i),h((v=o((b=class extends l{constructor(...e){super(...e),t(this,"uiPrefab",v,this),t(this,"targetNode",y,this)}onLoad(){const e=this.getComponent(a);e&&e.on("onTriggerEnter",this.onTriggerEnter,this)}onDestroy(){this.unscheduleAllCallbacks()}_setupIKnowButtonListener(){const e=this.targetNode.getChildByName("Finish");if(!e)return void console.error("IKnowButton node not found!");const o=e.getComponent(c);o?o.node.on("click",(()=>{console.log("User clicked '我知道了', continuing to render prefabs"),this.targetNode.active=!1,this._renderFinalPrefab()}),this):console.error("Button component not found on IKnowButton node!")}_renderFinalPrefab(){const e=d.getScene();if(e){console.log("当前场景获取成功");const o=e.getChildByName("Main Camera");o?(o.active=!1,console.log("主相机已关闭")):console.warn("未找到主相机节点");const t=e.getChildByName("Canvas");if(t){if(!this.uiPrefab)return void console.error("UI 预制体未初始化");const e=u(this.uiPrefab);e.setParent(t),e.setPosition(0,0,0),e.setScale(2,2,2),e.setSiblingIndex(t.children.length-1),console.log("UI 预制体已加载并显示")}else console.error("Canvas not found in the current scene!")}else console.error("无法获取当前场景")}onTriggerEnter(e){console.log("Collision detected with: ",e.otherCollider.node.name),"lumbermill"===e.otherCollider.node.name&&(parseInt(localStorage.getItem("maxLevel"),10)<g.currentLevelIndex&&localStorage.setItem("maxLevel",g.currentLevelIndex.toString()),this.logUserAction(),this.targetNode?(this.targetNode.active=!0,this.targetNode.setSiblingIndex(this.targetNode.parent.children.length-1),console.log(`Node "${this.targetNode.name}" has been activated and moved to the top layer.`),this._setupIKnowButtonListener()):console.error("Target node is not set!"))}async logUserAction(){const e=localStorage.getItem("currentUsername"),o=localStorage.getItem("sessionToken"),t=g.currentLevelIndex;if(!e||!o)return void console.error("No username or sessionToken found.");const n=new Date,r={tableName:"user_pass",data:{Usr_ID:e,Level:t,Timestep:new Date(n.getTime()+288e5).toISOString().replace("T"," ").slice(0,23)}};try{const e=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(r)});if(!e.ok)throw new Error("Failed to log user action");const t=await e.json();console.log("User action logged successfully:",t)}catch(e){console.error("Error logging user action:",e)}}}).prototype,"uiPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(b.prototype,"targetNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/ChangeCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(a){var e,t,i,r,n,o,s,m,c;return{setters:[function(a){e=a.applyDecoratedDescriptor,t=a.initializerDefineProperty},function(a){i=a.cclegacy,r=a.Camera,n=a._decorator,o=a.Component,s=a.input,m=a.Input,c=a.KeyCode}],execute:function(){var C,p,h,l,u,v,g;i._RF.push({},"ea2ee4nN9dHSLnMiN9JSDfz","ChangeCamera",void 0);const{ccclass:y,property:d}=n;a("ChangeCamera",(C=y("ChangeCamera"),p=d({type:r}),h=d({type:r}),C((v=e((u=class extends o{constructor(...a){super(...a),t(this,"mainCamera",v,this),t(this,"topCamera",g,this),this._isMainCameraActive=!0}start(){this.mainCamera&&this.topCamera?this.activateMainCamera():console.error("Cameras are not assigned!"),s.on(m.EventType.KEY_DOWN,this.onKeyDown,this)}onKeyDown(a){a.keyCode===c.KEY_Q&&this.toggleCamera()}toggleCamera(){this._isMainCameraActive?this.activateTopCamera():this.activateMainCamera()}activateMainCamera(){this.mainCamera&&this.topCamera&&(this.mainCamera.node.active=!0,this.topCamera.node.active=!1,this._isMainCameraActive=!0)}activateTopCamera(){this.mainCamera&&this.topCamera&&(this.mainCamera.node.active=!1,this.topCamera.node.active=!0,this._isMainCameraActive=!1)}}).prototype,"mainCamera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(u.prototype,"topCamera",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/ChessboardGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelController.ts","./Cubeflip.ts","./Global2.ts"],(function(e){var t,o,n,i,r,s,l,a,c,h,u,d,g,f,b,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Prefab,r=e.Node,s=e._decorator,l=e.Component,a=e.Vec2,c=e.instantiate,h=e.Vec3,u=e.Collider,d=e.tween,g=e.Button,f=e.director},function(e){b=e.LevelController},function(e){p=e.RotateAndMoveCubeOnKey},function(e){m=e.Global}],execute:function(){var P,w,v,y,C,S,z,I,L,N,T,x,A,B,O,_,k,D;n._RF.push({},"dff2aSjLOdEOKLk0l6rpGys","ChessboardGenerator",void 0);const{ccclass:E,property:G}=s;e("ChessboardGenerator",(P=E("ChessboardGenerator"),w=G(i),v=G(i),y=G(i),C=G(i),S=G(i),z=G(p),I=G(r),P((T=t((N=class extends l{constructor(...e){super(...e),o(this,"tilePrefab",T,this),o(this,"prefab2",x,this),o(this,"animationPrefab",A,this),o(this,"uiPrefab",B,this),o(this,"houseprefab",O,this),o(this,"tileSize",_,this),o(this,"rotateAndMoveCubeOnKey",k,this),this.tiles=[],this.totalPrefabs2=0,this.triggeredPrefabs2=0,this.currentLevel=0,this.blockedTiles=new Set,o(this,"targetNode",D,this)}start(){const e=this.getComponent(b);if(!e)return void console.error("LevelController component not found!");new a(0,0),new a(1,2),new a(3,3),new a(2,1),new a(0,3),new a(1,1),new a(1,0),new a(2,2),new a(3,1);console.log("yes"+e.positions),this.generateChessboard(5,4,e.positions)}generateChessboard(e,t,o){for(let n=0;n<e;n++){this.tiles[n]=[];for(let i=0;i<t;i++){const r=c(this.tilePrefab);r.setParent(this.node);const s=i*this.tileSize-t*this.tileSize/2+this.tileSize/2,l=n*this.tileSize-e*this.tileSize/2+this.tileSize/2;if(0===n&&0===i){const e=c(this.houseprefab);e.setParent(r),e.setPosition(new h(0,this.tileSize,0)),this.blockedTiles.add(`${n},${i}`),r.setPosition(new h(s,-1,l))}else r.setPosition(new h(s,0,l));this.tiles[n][i]=r;o.some((e=>e.x===s&&e.y===l))&&(console.log("yes"),this.placePrefab2AtPosition(new a(i,n)))}}}placePrefab2AtPosition(e){const t=e.y,o=e.x;if(t>=this.tiles.length||o>=this.tiles[0].length||t<0||o<0)return void console.error("Position out of bounds");const n=this.tiles[t][o],i=c(this.prefab2);i.setParent(n),i.setPosition(new h(0,this.tileSize,0));const r=i.getComponent(u);r&&r.on("onTriggerEnter",this.onPrefab2CollisionEnter,this),this.totalPrefabs2++,console.log(i.position)}async logUserAction(){const e=localStorage.getItem("currentUsername"),t=localStorage.getItem("sessionToken"),o=m.currentLevelIndex;if(!e||!t)return void console.error("No username or sessionToken found.");const n=new Date,i={tableName:"user_pass",data:{Usr_ID:e,Level:o,Timestep:new Date(n.getTime()+288e5).toISOString().replace("T"," ").slice(0,23)}};try{const e=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(i)});if(!e.ok)throw new Error("Failed to log user action");const o=await e.json();console.log("User action logged successfully:",o)}catch(e){console.error("Error logging user action:",e)}}onPrefab2CollisionEnter(e){console.log(`${e.otherCollider.node.name} collided with prefab2`);const t=e.selfCollider.node,o=c(this.animationPrefab);if(o.setParent(this.node),o.setPosition(t.worldPosition),t.active=!1,this.triggeredPrefabs2++,this.triggeredPrefabs2>=this.totalPrefabs2){parseInt(localStorage.getItem("maxLevel"),10)<m.currentLevelIndex&&localStorage.setItem("maxLevel",m.currentLevelIndex.toString()),console.log("All prefab2 instances triggered, starting animation");const e=this.tiles[0][0];if(e){const t=e.position.clone();t.y=0,d(e).to(1,{position:t},{easing:"quadInOut"}).call((()=>{console.log("Tile animation completed, now activating the target node"),this.targetNode?(this.targetNode.active=!0,this.targetNode.setSiblingIndex(this.targetNode.parent.children.length-1),console.log(`Node "${this.targetNode.name}" has been activated and moved to the top layer.`),this._setupIKnowButtonListener()):console.error("Target node is not set!")})).start()}else console.error("Target tile not found!")}}_setupIKnowButtonListener(){const e=this.targetNode.getChildByName("Finish");if(!e)return void console.error("IKnowButton node not found!");const t=e.getComponent(g);t?t.node.on("click",(()=>{console.log("User clicked '我知道了', continuing to render prefabs"),this.targetNode.active=!1,this._renderFinalPrefab()}),this):console.error("Button component not found on IKnowButton node!")}_renderFinalPrefab(){console.log("Rendering final Prefab..."),this.finishLevel()}finishLevel(){this.logUserAction();const e=localStorage.getItem("maxLevel");let t=e?parseInt(e,10):0;t+=1,localStorage.setItem("maxLevel",t.toString());const o=f.getScene().getChildByName("Canvas");if(o){const e=c(this.uiPrefab);e.setParent(o),e.setScale(2,2,2),e.setPosition(0,0,0),e.setSiblingIndex(o.children.length-1)}else console.error("Canvas not found in the current scene!");const n=f.getScene().getChildByName("Main Camera");n?n.active=!1:console.error("Main Camera not found in the current scene!")}onAllPrefabs2Triggered(){console.log("All prefab2 instances have been triggered! Game Over!");const e=f.getScene();if(e){e.children.forEach((e=>{console.log(`Processing root node: ${e.name}`),e.children.forEach((e=>{console.log(`Destroying child node: ${e.name}`),e.name&&e.isValid&&(e.active=!1)}))}));const t=new r("NewRoot");e.addChild(t)}}}).prototype,"tilePrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(N.prototype,"prefab2",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(N.prototype,"animationPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(N.prototype,"uiPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(N.prototype,"houseprefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(N.prototype,"tileSize",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=t(N.prototype,"rotateAndMoveCubeOnKey",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(N.prototype,"targetNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=N))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/ClickCount.ts",["cc"],(function(t){var e,o,s,c,n,i;return{setters:[function(t){e=t.cclegacy,o=t.Component,s=t.systemEvent,c=t.SystemEvent,n=t.EventMouse,i=t._decorator}],execute:function(){var r;e._RF.push({},"8a170ET6JZAMbTqJLQAX0vx","ClickCount",void 0);const{ccclass:u,property:l}=i;t("ClickablePrefab",u("ClickablePrefab")(r=class extends o{constructor(...t){super(...t),this.clickCount=0}start(){s.on(c.EventType.MOUSE_UP,this.onMouseUp,this)}onMouseUp(t){t.getButton()===n.BUTTON_LEFT&&(this.clickCount++,console.log(`Prefab clicked ${this.clickCount} times.`))}onDestroy(){s.off(c.EventType.MOUSE_UP,this.onMouseUp,this)}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RotateUtil.ts","./Global2.ts"],(function(t){var e,o,n,i,s,r,a,l,h,c,u,d,g,p,m,f,C,v,y,b,A,w,T,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Label,s=t.Prefab,r=t.Camera,a=t.Node,l=t.Button,h=t._decorator,c=t.Component,u=t.Vec3,d=t.Quat,g=t.instantiate,p=t.Collider,m=t.RigidBody,f=t.input,C=t.Input,v=t.director,y=t.screen,b=t.KeyCode,A=t.tween,w=t.UITransform},function(t){T=t.RotateUtil},function(t){N=t.Global}],execute:function(){var P,_,M,D,S,R,x,U,E,B,I,L,z,O,Y,k,K,H,F,X,$,j,G,Z,J,Q,V;n._RF.push({},"a5450KlIRZMf4X+QJKQ+hHk","Controller",void 0);const{ccclass:W,property:q}=h;t("Controller",(P=W("Controller"),_=q(i),M=q(i),D=q({type:s}),S=q({type:s}),R=q({type:r}),x=q(s),U=q({type:a}),E=q(l),B=q(l),I=q({type:s}),L=q(a),z=q(a),P((k=e((Y=class extends c{constructor(...t){super(...t),this.touchPath=[],this.startTime=0,this.lastDirectionX=0,this.lastDirectionY=0,this.maxAngle=null,this.minAngle=null,this.currentDirection=null,this.lastAngle=0,this.totalRotation=0,this.segments=[],this.directionThreshold=5,o(this,"operationCountLabel",k,this),o(this,"operationTimeLabel",K,this),o(this,"prefab",H,this),o(this,"prefab_large",F,this),o(this,"camera",X,this),o(this,"uiPrefab",$,this),o(this,"targetCylinder",j,this),o(this,"moveDownButton",G,this),o(this,"moveUpButton",Z,this),o(this,"coinPrefab",J,this),o(this,"targetNode",Q,this),this.rotationChanges=[],this.lastDirection=0,this.tutorchange=!1,this.hasCalledManageScene=!1,this.finalRotation=0,this.instantiatedNode=null,this._isRotating=!1,this._lastMousePos=new u,this._rotationSpeed=.01,this.minSwipeDistance=5,this.currentAxis=null,this.startAngleX=0,this.startAngleY=0,this.startAngleZ=0,this._isMovingUp=!1,this._isMovingDown=!1,this._moveSpeed=.08,this.operationCount=0,this.operationTime=0,this.stop_update=!0,this.savedRotation=new d,this.hasCollided=!1,this.childColliders=[],this.previousChildYPositions=[],o(this,"targetColliderNode",V,this),this.collisionStates=[]}start(){N.currentLevelIndex<8?(this.instantiatedNode=g(this.prefab),this.node.addChild(this.instantiatedNode),this.instantiatedNode.setPosition(0,0,0)):(this.instantiatedNode=g(this.prefab_large),this.node.addChild(this.instantiatedNode),this.instantiatedNode.setPosition(0,0,0)),this.instantiatedNode&&(this.childColliders=this.instantiatedNode.getComponentsInChildren(p),this.previousChildYPositions=this.childColliders.map((t=>t.node.getPosition().y)));this.instantiatedNode.getComponentsInChildren(p).forEach(((t,e)=>{console.log(`子节点 Collider ${e}:`,t),t.on("onCollisionEnter",this.onCollisionEnter,this);const o=t.node.getComponent(m);o&&(o.type=m.Type.KINEMATIC,o.useGravity=!1)})),f.on(C.EventType.TOUCH_START,this.onTouchStart,this),f.on(C.EventType.TOUCH_MOVE,this.onTouchMove,this),f.on(C.EventType.TOUCH_END,this.onTouchEnd,this),f.on(C.EventType.KEY_DOWN,this.onKeyDown,this),f.on(C.EventType.KEY_UP,this.onKeyUp,this),this.moveDownButton&&(this.moveDownButton.node.on(C.EventType.TOUCH_START,this.onMoveDownButtonPress,this),this.moveDownButton.node.on(C.EventType.TOUCH_END,this.onMoveDownButtonRelease,this),this.moveDownButton.node.on(C.EventType.TOUCH_CANCEL,this.onMoveDownButtonRelease,this)),this.moveUpButton&&(this.moveUpButton.node.on(C.EventType.TOUCH_START,this.onMoveUpButtonPress,this),this.moveUpButton.node.on(C.EventType.TOUCH_END,this.onMoveUpButtonRelease,this),this.moveUpButton.node.on(C.EventType.TOUCH_CANCEL,this.onMoveUpButtonRelease,this))}onCollisionEnter(t){if(this.hasCollided)return;this.hasCollided=!0;this.instantiatedNode.getComponentsInChildren(p).forEach((t=>{t.off("onCollisionEnter",this.onCollisionEnter,this)})),console.log("Collision detected, schedule scene change after 1 second"),setTimeout((()=>{try{console.log("Changing scene to adjust"),this.ClickRestart()}catch(t){console.error("Error in ClickRestart:",t)}}),1e3)}ClickRestart(){console.log("ClickRestart called, loading adjust scene"),v.loadScene("adjust")}onMoveDownButtonPress(){this._isMovingDown=!0}onMoveDownButtonRelease(){if(this.instantiatedNode){this.instantiatedNode.getComponentsInChildren(p).forEach(((t,e)=>{const o=t.node.getComponent(m);o&&(o.type=m.Type.DYNAMIC,o.useGravity=!0)})),this.logPlayerAction("Release",void 0,void 0,1,void 0)}}onMouseDown(t){this._isRotating=!0,this._lastMousePos.set(t.getLocationX(),t.getLocationY(),0)}onMouseMove(t){if(!this._isRotating||!this.instantiatedNode)return;let e=t.getLocationX()-this._lastMousePos.x,o=t.getLocationY()-this._lastMousePos.y;this._lastMousePos.set(t.getLocationX(),t.getLocationY(),0);let n=this.camera.node.worldMatrix,i=new u(n.m00,n.m01,n.m02),s=new u(n.m04,n.m05,n.m06);T.rotateAround(this.instantiatedNode,s,e*this._rotationSpeed),T.rotateAround(this.instantiatedNode,i,-o*this._rotationSpeed)}onMouseUp(t){this._isRotating=!1,this.snapRotationToClosest90Degrees()}resetState(){this._isRotating=!1,this.currentAxis=null,this.lastAngle=0,this.totalRotation=0,this.currentDirection=null,this.segments=[],this.maxAngle=null,this.minAngle=null}calculateDelta(t,e){let o=t-e;return o>180?o-=360:o<-180&&(o+=360),Math.abs(o)>.1?o:0}normalizeAngle(t){return(t+360)%360}getAxisAngle(t,e){return"X"===e?this.normalizeAngle(t.x):"Y"===e?this.normalizeAngle(t.y):"Z"===e?this.normalizeAngle(t.z):0}onTouchStart(t){this._isRotating=!0,this.currentAxis=null,this.startTime=Date.now(),this.touchPath=[];const e=t.getTouches()[0],o=e.getLocationX(),n=e.getLocationY();this.touchPath.push({x:o,y:n,time:0}),this._lastMousePos.set(o,n,0),this.lastAngle=0,this.totalRotation=0,this.segments=[],this.currentDirection=null}onTouchMove(t){if(!this._isRotating||!this.instantiatedNode)return;const e=t.getTouches()[0],o=e.getLocationX(),n=e.getLocationY(),i=Date.now()-this.startTime;let s=o-this._lastMousePos.x,r=n-this._lastMousePos.y;const a=Math.sqrt(s*s+r*r),l=y.windowSize.width/y.windowSize.height,h=Math.max(1.5,2*l);if(!this.currentAxis&&a>=this.minSwipeDistance&&(Math.abs(r)<h?this.currentAxis="Y":s>0&&r>0||s<0&&r<0?this.currentAxis="Z":(s>0&&r<0||s<0&&r>0)&&(this.currentAxis="X"),this.currentAxis)){const t=this.instantiatedNode.eulerAngles;this.lastAngle=this.getAxisAngle(t,this.currentAxis)}const c=a*this._rotationSpeed;"Z"===this.currentAxis?T.rotateAround(this.instantiatedNode,u.FORWARD.clone(),r>0?c:-c):"X"===this.currentAxis?T.rotateAround(this.instantiatedNode,u.RIGHT.clone(),r>0?-c:c):"Y"===this.currentAxis&&T.rotateAround(this.instantiatedNode,u.UP.clone(),s>0?c:-c),a>=this.minSwipeDistance&&this.touchPath.push({x:o,y:n,time:i}),this._lastMousePos.set(o,n,0)}onTouchEnd(t){if(!this._isRotating)return;const e=t.getTouches()[0],o=e.getLocationX(),n=e.getLocationY(),i=Date.now()-this.startTime;this.touchPath.push({x:o,y:n,time:i});const s=this.instantiatedNode.eulerAngles,r=this.getAxisAngle(s,this.currentAxis);this.recordSegment(this.lastAngle,r,Date.now()-this.startTime),this.logPlayerAction("Rotate",this.currentAxis,JSON.stringify({axis:this.currentAxis,segments:this.segments},null,2),1,this.touchPath),this.resetState(),this.snapRotationToClosest90Degrees()}recordSegment(t,e,o){const n=this.calculateDelta(e,t),i={direction:n>0?"clockwise":"counterclockwise",startAngle:this.normalizeAngle(t),endAngle:this.normalizeAngle(e),angleChange:Math.abs(n),duration:o};this.segments.push(i),console.log("记录旋转段：",i),this.startTime=Date.now()}async logPlayerAction(t,e,o,n,i){const s=localStorage.getItem("currentUsername"),r=localStorage.getItem("sessionToken");if(!s)return void console.error("❌ 错误：用户名未找到。请确保玩家已正确登录。");if(!r)return void console.error("❌ 错误：Session token 未找到。请确保玩家已正确认证。");if("number"!=typeof n)return void console.error("❌ 错误：Flag 必须是数字，但得到了: ",n);function a(t,e,o="0"){const n=String(t);return n.length>=e?n:o.repeat(e-n.length)+n}const l=new Date,h=new Date(l.getTime()+288e5),c={tableName:"game2",data:{Usr_ID:s,Timestep:`${h.getFullYear()}-${a(h.getMonth()+1,2)}-${a(h.getDate(),2)} ${a(h.getHours(),2)}:${a(h.getMinutes(),2)}:${a(h.getSeconds(),2)}.${a(h.getMilliseconds(),3)}`,Level:N.currentLevelIndex??0,Operation:t,Axis:e,Angle:i??null,Segment:o,Flag:n}};try{const t=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(c)});if(!t.ok)throw new Error("❌ 错误：无法记录玩家操作");const e=await t.json();console.log("✅ 玩家操作记录成功：",e)}catch(t){console.error("❌ 记录玩家操作时发生错误：",t)}}snapRotationToClosest90Degrees(){if(this.instantiatedNode){let t=new u;this.instantiatedNode.getRotation().getEulerAngles(t),t.x=90*Math.round(t.x/90),t.y=90*Math.round(t.y/90),t.z=90*Math.round(t.z/90),this.instantiatedNode.setRotationFromEuler(t.x,t.y,t.z),this.instantiatedNode.getRotation(this.savedRotation),this.tutorchange=!0,this.node.emit("turtorchange",this.tutorchange)}}onKeyDown(t){t.keyCode===b.SPACE&&(this._isMovingUp=!0)}onKeyUp(t){t.keyCode===b.SPACE&&(this._isMovingUp=!1)}onMoveUpButtonPress(){this._isMovingUp=!0}onMoveUpButtonRelease(){this._isMovingUp=!1}startRotation(t){A(t).repeatForever(A().by(1,{eulerAngles:new u(0,360,0)})).start()}update(t){if(this.instantiatedNode&&this.stop_update){if(this.childColliders.map(((t,e)=>{const o=t.node.worldPosition.y;this.previousChildYPositions[e];return this.previousChildYPositions[e]=o,o})).every((t=>t<=-10))&&!this.hasCalledManageScene){if(parseInt(localStorage.getItem("maxLevel"),10)<N.currentLevelIndex&&localStorage.setItem("maxLevel",N.currentLevelIndex.toString()),this.logUserAction(),this.coinPrefab){const t=g(this.coinPrefab);this.node.addChild(t),t.getComponent(w)?.setAnchorPoint(.5,.5);const e=new u(0,-10,0),o=.3;t.setPosition(0,-20,0),A(t).to(o,{position:e}).call((()=>{this.startRotation(t)})).start()}else console.error("金币预制体未指定，请在编辑器中为 coinPrefab 指定一个预制体。");setTimeout((()=>{this.manageSceneNodes()}),1e3),this.hasCalledManageScene=!0}}}manageSceneNodes(){this.targetNode?(this.targetNode.active=!0,this.targetNode.setSiblingIndex(this.targetNode.parent.children.length-1),console.log(`Node "${this.targetNode.name}" has been activated and moved to the top layer.`),this._setupIKnowButtonListener()):console.error("Target node is not set!")}_setupIKnowButtonListener(){const t=this.targetNode.getChildByName("Finish");if(!t)return void console.error("IKnowButton node not found!");const e=t.getComponent(l);e?e.node.on("click",(()=>{console.log("User clicked '我知道了', continuing to render prefabs"),this.targetNode.active=!1,this._renderFinalPrefab()}),this):console.error("Button component not found on IKnowButton node!")}_renderFinalPrefab(){const t=v.getScene();if(!t)return void console.error("Scene not found!");const e=t.getChildByName("Node");if(!e)return void console.error("Node not found!");const o=e.getChildByName("Canvas");if(!o)return void console.error("Canvas not found under Node!");if(this.uiPrefab){const t=g(this.uiPrefab);t.setParent(o),t.setScale(2,2,2),t.setPosition(0,0,0),t.setSiblingIndex(o.children.length-1),console.log("UI Prefab instantiated and added to Canvas.")}else console.error("UI Prefab is not assigned!");const n=t.getChildByName("Main Camera");n?(n.active=!1,console.log("Main Camera disabled.")):console.error("Main Camera not found in the scene!")}async logUserAction(){const t=localStorage.getItem("currentUsername"),e=localStorage.getItem("sessionToken"),o=N.currentLevelIndex;if(!t||!e)return void console.error("No username or sessionToken found.");const n=new Date,i={tableName:"user_pass",data:{Usr_ID:t,Level:o,Timestep:new Date(n.getTime()+288e5).toISOString().replace("T"," ").slice(0,23)}};try{const t=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)});if(!t.ok)throw new Error("Failed to log user action");const o=await t.json();console.log("User action logged successfully:",o)}catch(t){console.error("Error logging user action:",t)}}}).prototype,"operationCountLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(Y.prototype,"operationTimeLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(Y.prototype,"prefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(Y.prototype,"prefab_large",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(Y.prototype,"camera",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(Y.prototype,"uiPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(Y.prototype,"targetCylinder",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(Y.prototype,"moveDownButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(Y.prototype,"moveUpButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(Y.prototype,"coinPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(Y.prototype,"targetNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(Y.prototype,"targetColliderNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=Y))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/Cubeflip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts"],(function(t){var e,o,i,n,s,a,r,h,c,l,u,p,d,g,y,T,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Label,s=t._decorator,a=t.Component,r=t.Vec3,h=t.Quat,c=t.systemEvent,l=t.SystemEvent,u=t.MeshRenderer,p=t.Color,d=t.input,g=t.Input,y=t.KeyCode,T=t.misc},function(t){m=t.Global}],execute:function(){var w,b,E,f,A,D,C;i._RF.push({},"ce0c5A6DP1ENoBlbbZJIsvN","Cubeflip",void 0);const{ccclass:K,property:S}=s;t("RotateAndMoveCubeOnKey",(w=K("RotateAndMoveCubeOnKey"),b=S(n),E=S(n),w((D=e((A=class extends a{constructor(...t){super(...t),o(this,"operationCountLabel",D,this),o(this,"operationTimeLabel",C,this),this.isAnimating=!1,this.initialEulerAngles=void 0,this.operationCount=0,this.operationTime=0,this.isTiming=!0,this.touchStartPos=new r,this.startRotation=new h,this.endRotation=new h,this.startPosition=new r,this.endPosition=new r,this.currentLerpTime=0,this.totalLerpTime=.5,this.minSwipeDistance=50}start(){c.on(l.EventType.KEY_DOWN,this.onKeyDown,this),this.placeCubeAboveTile(3,2),this.initialEulerAngles=this.node.eulerAngles.clone(),this.isTiming=!0,this.operationTime=0;const t=this.node.getComponent(u);if(t){t.material.setProperty("albedo",new p(255,255,0,255))}else console.warn("Cube does not have a MeshRenderer component.");d.on(g.EventType.TOUCH_START,this.onTouchStart,this),d.on(g.EventType.TOUCH_END,this.onTouchEnd,this)}async logPlayerAction(t){const e=localStorage.getItem("currentUsername"),o=localStorage.getItem("sessionToken");if(!e||!o)return void console.error("No username or sessionToken found.");function i(t,e,o="0"){const i=String(t);return i.length>=e?i:o.repeat(e-i.length)+i}const n=new Date,s=new Date(n.getTime()+288e5),a={tableName:"game1",data:{Usr_ID:e,Timestep:`${s.getFullYear()}-${i(s.getMonth()+1,2)}-${i(s.getDate(),2)} ${i(s.getHours(),2)}:${i(s.getMinutes(),2)}:${i(s.getSeconds(),2)}.${i(s.getMilliseconds(),3)}`,Level:m.currentLevelIndex,Operation:t}};try{const t=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(a)});if(!t.ok)throw new Error("Failed to log player action");const e=await t.json();console.log("Player action logged successfully:",e)}catch(t){console.error("Error logging player action:",t)}}onTouchStart(t){const e=t.getTouches()[0];this.touchStartPos.set(e.getLocationX(),e.getLocationY(),0)}onTouchEnd(t){const e=t.getTouches()[0],o=new r(e.getLocationX(),e.getLocationY(),0),i=o.x-this.touchStartPos.x,n=o.y-this.touchStartPos.y;Math.sqrt(i*i+n*n)<this.minSwipeDistance?console.log("滑动距离不足，忽略事件"):Math.abs(i)>Math.abs(n)?i>0?this.onKeyDown({keyCode:y.KEY_D}):this.onKeyDown({keyCode:y.KEY_A}):n>0?this.onKeyDown({keyCode:y.KEY_W}):this.onKeyDown({keyCode:y.KEY_S})}onKeyDown(t){this.isAnimating||(this.operationTime=0);const e=this.node.position.clone();let o;switch(t.keyCode){case y.KEY_A:o=e.clone().add(new r(-1,0,0));break;case y.KEY_D:o=e.clone().add(new r(1,0,0));break;case y.KEY_W:o=e.clone().add(new r(0,0,-1));break;case y.KEY_S:o=e.clone().add(new r(0,0,1));break;default:return}if(-1.5!=o.x||-2!=o.z)if(o.x<-2||o.x>2||o.z<-2.5||o.z>2.5)console.log("目标位置超出棋盘范围，操作被取消！");else if(!this.isAnimating){let e="";switch(t.keyCode){case y.KEY_A:e="A",this.rotateByAxis(new r(-1,0,0),new r(0,0,1),90);break;case y.KEY_D:e="D",this.rotateByAxis(new r(1,0,0),new r(0,0,1),-90);break;case y.KEY_W:e="W",this.rotateByAxis(new r(0,0,-1),new r(1,0,0),-90);break;case y.KEY_S:e="S",this.rotateByAxis(new r(0,0,1),new r(1,0,0),90)}this.logPlayerAction(e)}}rotateByAxis(t,e,o){this.startPosition=this.node.position.clone(),r.add(this.endPosition,this.startPosition,t),this.startRotation=this.node.rotation.clone();let i=T.degreesToRadians(o);this.endRotation=h.rotateAround(new h,this.startRotation,e,i),h.normalize(this.endRotation,this.endRotation),this.currentLerpTime=0,this.isAnimating=!0}update(t){if(this.isAnimating){this.currentLerpTime+=t,this.currentLerpTime>this.totalLerpTime&&(this.currentLerpTime=this.totalLerpTime);let e=this.currentLerpTime/this.totalLerpTime,o=h.slerp(new h,this.startRotation,this.endRotation,e);this.node.setRotation(o);let i=r.lerp(new r,this.startPosition,this.endPosition,e);this.node.setPosition(i),e>=1&&(this.isAnimating=!1)}this.isTiming&&(this.operationTime+=t)}placeCubeAboveTile(t,e){const o=1*e-2+.5,i=1*t-2.5+.5;this.node.setPosition(new r(o,0,i))}onDestroy(){c.off(l.EventType.KEY_DOWN,this.onKeyDown,this),d.off(g.EventType.TOUCH_START,this.onTouchStart,this),d.off(g.EventType.TOUCH_END,this.onTouchEnd,this)}}).prototype,"operationCountLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(A.prototype,"operationTimeLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=A))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/Cubes.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Levels.ts","./Global2.ts"],(function(e){var t,n,i,o,s,r,a,l,c,h,d,u,p,g,f,b,m,_,y,v,C,w,N,S,E,P,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Camera,s=e.Node,r=e.Prefab,a=e._decorator,l=e.Component,c=e.NodePool,h=e.Tween,d=e.Button,u=e.RigidBody,p=e.instantiate,g=e.geometry,f=e.PhysicsSystem,b=e.Vec3,m=e.clamp,_=e.Layers,y=e.Quat,v=e.UIOpacity,C=e.tween,w=e.Color,N=e.MeshRenderer,S=e.gfx,E=e.Collider},function(e){P=e.Levels},function(e){I=e.Global}],execute:function(){var k,O,T,A,L,x,D,B,R,$,F,U,z,M,W,j,q,Z,V,G,H,K,J,Y,Q;i._RF.push({},"81d4eLB8j5NELnDioXtJ6pn","Cubes",void 0);const{ccclass:X,property:ee}=a;e("Cubes",(k=X("Cubes"),O=ee(o),T=ee(s),A=ee(s),L=ee(r),x=ee(r),D=ee(r),B=ee(r),R=ee(r),$=ee(r),F=ee(s),U=ee(s),k((W=t((M=class extends l{constructor(...e){super(...e),n(this,"camera0",W,this),n(this,"effectNode",j,this),n(this,"selcetNode",q,this),n(this,"prefab1",Z,this),n(this,"prefab2",V,this),n(this,"prefab3",G,this),n(this,"prefab4",H,this),n(this,"prefab5",K,this),n(this,"prefab6",J,this),this.operationTimeLabel=null,n(this,"activeNode",Y,this),n(this,"targetNode",Q,this),this.remainingCubesCount=0,this.typeIndexMap=new Map,this._level=0,this._config=null,this._locked=!1,this._matching=0,this._baseNode=null,this._nodePool=new c,this._localBuffer=new Float32Array(4),this._effectInc=0,this._matchCount=0,this._paiSelectCount=0,this._paiRands=new Array,this._paiSelets=new Array,this._paiInWorld=new Map,this._threeErase=new Array,this.operationTime=0,this.true_level=I.currentLevelIndex}start(){this._level={15:0,16:1,17:2,18:3,19:4}[this.true_level],this.resetLevel(),this.faPai(),this.initializeGame()}initializeGame(){const e=this.node.children.length;this.remainingCubesCount=e,console.log(`初始化完成，立方体总数量为: ${this.remainingCubesCount}`)}onDestroy(){if(h.stopAll(),this.unscheduleAllCallbacks(),this.targetNode){const e=this.targetNode.getChildByName("Finish");if(e){const t=e.getComponent(d);t&&t.node.off("click",this._renderFinalPrefab,this)}}this._baseNode&&(this._baseNode.destroy(),this._baseNode=null),this._nodePool.clear(),console.log("Cubes 已销毁，所有资源已清理。")}nextLevel(){this._level++,this.resetLevel(),this.node.children.forEach((e=>{this.enablePhysics(e,!0);let t=e.getComponent(u);t&&t.wakeUp()}))}resetLevel(){this.resetWorld(),this.loadLevel(this._level)}putNode(e){this._nodePool.put(e)}getNode(e){let t=this._nodePool.get();return t||(t=p(this.prefabNode(e))),t}prefabNode(e){let t=null;switch(e){case 0:t=this.prefab1;break;case 1:t=this.prefab2;break;case 2:t=this.prefab3;break;case 3:t=this.prefab4;break;case 4:t=this.prefab5;break;case 5:t=this.prefab6}return p(t)}enablePhysics(e,t){const n=e=>{let i=e.getComponent(u);i&&(i.enabled=t);let o=e.getComponent(E);o&&(o.enabled=t),e.children.forEach((e=>{n(e)}))};n(e)}removeFromWorld(e){let t=this._paiInWorld.get(e.name),n=t.indexOf(e);n>=0&&t.splice(n,1),console.log(`正在移除节点: ${e.name}`),e.destroy(),this.remainingCubesCount--,this.remainingCubesCount<=0&&this.checkWinCondition()}wakeUpOthers(e){let t=e.position,n=new g.Ray(t.x,t.y,t.z,0,1,0);if(f.instance.sweepBox(n,new b(1.5,1,2),e.rotation,2,20,!1)){let e=f.instance.sweepCastResults;for(let t=0;t<e.length;t++)e[t].collider.attachedRigidBody.wakeUp()}}resetWorld(){h.stopAll(),this.unscheduleAllCallbacks();let e=this.effectNode;e.children[0].active=!1,e.children[1].active=!1,e.children[2].active=!1,this._paiSelets.forEach((e=>{for(let t=e.length-1;t>=0;t--)this.putNode(e[t])}));let t=this.node.children;for(let e=t.length-1;e>=0;e--)this.putNode(t[e]);this._paiSelets.length=0,this._paiSelectCount=0,this._paiInWorld.clear(),this._matching=0,this._matchCount=0,this._locked=!1}loadLevel(e){e=m(0,P.length-1,e);let t=P[e];t.Count;this._config=t,this._level=e;let n=this._paiRands=[];if(t.CustomOrder&&t.CustomOrder.length>0)n.push(...t.CustomOrder.map((e=>e.toString())));else{for(let e=0;e<t.Count;e++){let i=e%t.Types.length;n.push(i.toString(),i.toString(),i.toString())}for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}}console.log("生成的队列:",n)}getPai(e=null){if(e||(e=this._paiRands.pop()),!e)return null;let t=parseInt(e),n=this.getNode(t);this.node.addChild(n),this.enablePhysics(n,!0),n.getComponent(u).angularDamping=.4,n.scale=this._level>0?b.ONE:new b(1.25,1.25,1.25),n.layer=_.Enum.DEFAULT,n.rotation=y.IDENTITY;let i=this.typeIndexMap.get(t)||0;this.typeIndexMap.set(t,i+1),n.name=`${t}_${i}`,n.customType=t,console.log(`生成节点: ${n.name}, 类型: ${n.customType}`);let o=this._paiInWorld.get(n.name);return o||(o=[],this._paiInWorld.set(n.name,o)),o.push(n),n}combineEffect(e){let t=this.effectNode,n=this.camera0.convertToUINode(e,t),i=t.children[this._effectInc];i.position=n,i.active=!0;let o=i.children[0],s=i.children[1],r=i.children[2],a=s.getComponent(v),l=r.getComponent(v);o.setScale(new b(1.5,1.5,1.5)),s.setScale(new b(.5,.5,.5)),r.setScale(b.ZERO),a.opacity=255,l.opacity=255,C().target(o).to(.2,{scale:b.ZERO},{easing:"quadOut"}).start(),C().target(s).to(.1,{scale:b.ONE},{easing:"quintOut"}).start(),C().target(a).to(.1,{opacity:0}).start(),C().target(r).to(.2,{scale:b.ONE},{easing:"quintOut"}).start(),C().target(l).delay(.1).to(.1,{opacity:0}).start(),this.scheduleOnce((()=>{i.active=!1}),.25),this._effectInc=++this._effectInc%t.children.length}fixPosition(e,t){let n=0,i=this._paiSelets;this.selcetNode.position;for(let o=0,s=0;o<i.length;o++){let r=i[o];for(let i=0;i<r.length;i++,s++){let o=r[i];if(s>=e){n++;let e=new b(3.5*(s-3),0,23);C().target(o).to(.3,{position:e},{easing:"quintOut"}).call((()=>{let e=o.getComponent(u);e&&(e.setLinearVelocity(b.ZERO),e.setAngularVelocity(b.ZERO),e.sleep()),0==--n&&t()})).start()}}}0==n&&t()}fixSelectEnd(){let e=0,t=this._paiSelets;for(let n=t.length-1;n>=0;n--){let i=t[n];if(i.length>=3){e+=3;let o=i.pop(),s=i.pop(),r=i.pop();this._paiSelectCount-=3,0==i.length&&t.splice(n,1);const a=()=>{this.combineEffect(s.worldPosition),this.putNode(o),this.putNode(s),this.putNode(r),e-=3,0==e&&(this.fixPosition(0,(()=>{})),this._matching--),++this._matchCount==this._config.Count&&(this.nextLevel(),this.faPai())};let l=s.position;C().target(o).to(.1,{position:l},{easing:"quadOut"}).start(),C().target(r).to(.1,{position:l},{easing:"quadOut"}).call(a).start(),[o,s,r].forEach((e=>{this.enablePhysics(e,!0);let t=e.getComponent(u);t&&t.wakeUp()}))}}0==e&&this._paiSelectCount}flyToSelect(e){if(this._locked)return!1;if(this._paiSelectCount+1>7)return!1;this.enablePhysics(e,!1),this.wakeUpOthers(e),this._paiSelectCount++,e.setParent(this.selcetNode.parent),e.scale=new b(.4,.4,.4),e.layer=_.Enum.UI_3D;let t=0,n=!0,i=this._paiSelets;for(let o=0,s=i.length;o<s;o++){let s=i[o],r=s.length;if(s[0].name==e.name){r>=2&&this._matching++,n=!1,s.push(e),t+=r;break}t+=r}return n&&i.push([e]),this.fixPosition(t,(()=>{this.fixSelectEnd()})),!0}hePai(){if(this._locked||this._matching)return;let e=7-this._paiSelectCount;if(e<=0)return!1;let t=this._paiSelets;for(let n=0;n<t.length;n++){let i=t[n],o=3-i.length;if(o>=0&&o<=e){let e=i[0].name,t=this._paiInWorld.get(e);if(t&&o<=t.length){for(let e=0;e<o;e++){let e=t.pop();this.flyToSelect(e)||t.push(e)}break}}}return!0}faPai(){if(this._locked)return;this._locked=!0,f.instance.enable=!0,f.instance.gravity=new b(0,0,0);const e=this._config.Rotations,t=new Map;for(let n=0;;n++){let i=this.getPai();if(!i)break;let o=10*(n%3-1),s=10*(Math.floor(n/3)-1);i.position=new b(o,0,s+10),this._changePrefabColor(i,new w(255,255,255,255));let r=parseInt(i.name),a=e[r%e.length];const l=t.get(r)||0;t.set(r,l+1);let c=l%a.angles.length,h=a.angles[c],d=new y;a.axes.forEach((e=>{let t=y.fromAxisAngle(new y,e,h*Math.PI/180);y.multiply(d,d,t)})),i.rotation=d;let p=i.getComponent(u);p&&(p.setLinearVelocity(b.ZERO),p.setAngularVelocity(b.ZERO),p.angularDamping=1)}this._locked=!1}_changePrefabColor(e,t){const n=e.getComponent(N);if(n){n.material.setProperty("albedo",new w(255,255,255,255))}e.children.forEach((e=>{this._changePrefabColor(e,t)}))}update(e){this.operationTime+=e,this.operationTimeLabel.string=`已用时: ${this.operationTime.toFixed(2)}s`}async logPlayerAction(e,t,n,i,o){const s=localStorage.getItem("currentUsername"),r=localStorage.getItem("sessionToken");if(!s)return void console.error("❌ 错误：用户名未找到。请确保玩家已正确登录。");if(!r)return void console.error("❌ 错误：Session token 未找到。请确保玩家已正确认证。");function a(e,t,n="0"){const i=String(e);return i.length>=t?i:n.repeat(t-i.length)+i}const l=new Date,c=new Date(l.getTime()+288e5),h=`${c.getFullYear()}-${a(c.getMonth()+1,2)}-${a(c.getDate(),2)} ${a(c.getHours(),2)}:${a(c.getMinutes(),2)}:${a(c.getSeconds(),2)}.${a(c.getMilliseconds(),3)}`,d=I.currentLevelIndex??0,u=void 0!==t,p=void 0!==n&&void 0!==i&&void 0!==o;if(!u&&!p)return void console.error("❌ 错误：未提供完整的参数。");const g={tableName:"game4",data:{Usr_ID:s,Timestep:h,Level:d,Operation:e}};u?g.data.Object=t:p&&(g.data.Object_Color=n,g.data.Color_Father=i,g.data.Color=o);try{const e=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(g)});if(!e.ok)throw new Error("❌ 错误：无法记录玩家操作");const t=await e.json();console.log("✅ 玩家操作记录成功：",t)}catch(e){console.error("❌ 记录玩家操作时发生错误：",e)}}selectCube(e){if(this._locked)return!1;console.log(`🟢 选中的方块: ${e.name}`);const t=this._threeErase.indexOf(e);return-1!==t?(console.log(`🔴 取消选择方块: ${e.name}`),this.logPlayerAction("cancelSelect",e.name,void 0,void 0,void 0),this._threeErase.splice(t,1),e.children.forEach((e=>this.resetTransparencyAndEmissive(e))),C(e).to(.2,{scale:new b(1.25,1.25,1.25)}).start(),!1):(this.logPlayerAction("selectNode",e.name,void 0,void 0,void 0),this._threeErase.length>=3?(console.warn("🚫 已经选中3个方块，不能继续选择"),!1):(e.children.forEach((e=>{const t=e.getComponent(N);if(t){const e=t.material;e.setProperty("emissive",new w(255,0,0,255)),e.overridePipelineStates({blendState:{targets:[{blend:!0,blendSrc:S.BlendFactor.SRC_ALPHA,blendDst:S.BlendFactor.ONE_MINUS_SRC_ALPHA,blendEq:S.BlendOp.ADD}]}});const n=e.getProperty("albedo",0);n instanceof w?(n.a=230,e.setProperty("albedo",n)):console.warn("Albedo property is not a Color type, check the material configuration.")}})),this._threeErase.push(e),C(e).to(.2,{scale:new b(1.5,1.5,1.5)}).call((()=>{3===this._threeErase.length&&(console.log("🎉 3个方块已被选中，开始检查消除条件"),this._locked=!0,this.checkSelection(this._threeErase),this._threeErase=[])})).start(),!0))}resetTransparencyAndEmissive(e){const t=e.getComponent(N);if(t){const e=t.material;if(e){const t=new w(255,255,255,255);t instanceof w&&(t.a=255,e.setProperty("albedo",t)),e.overridePipelineStates({blendState:{targets:[{blend:!1,blendSrc:S.BlendFactor.ONE,blendDst:S.BlendFactor.ZERO,blendEq:S.BlendOp.ADD}]}}),e.setProperty("emissive",new w(0,0,0,255)),console.log("Transparency and Emissive have been reset successfully.")}}else console.warn("MeshRenderer not found on the target node.")}checkSelection(e){if(3!==e.length)return;const t=e[0].customType;e.every((e=>e.customType===t))?e.forEach(((e,t)=>{this.combineEffect(e.getWorldPosition()),this.removeFromWorld(e)})):e.forEach((e=>{const t=e.getChildByName("RectSelect");t&&(console.log(`Destroying RectSelect node in ${e.name}`),t.destroy()),e.children.forEach(((e,t)=>{this.resetTransparencyAndEmissive(e)})),C(e).to(.2,{scale:new b(1.25,1.25,1.25)}).start()})),this._threeErase=[],this._locked=!1}async logUserAction(){const e=localStorage.getItem("currentUsername"),t=localStorage.getItem("sessionToken"),n=I.currentLevelIndex;if(!e||!t)return void console.error("No username or sessionToken found.");const i=new Date,o={tableName:"user_pass",data:{Usr_ID:e,Level:n,Timestep:new Date(i.getTime()+288e5).toISOString().replace("T"," ").slice(0,23)}};try{const e=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(o)});if(!e.ok)throw new Error("Failed to log user action");const n=await e.json();console.log("User action logged successfully:",n)}catch(e){console.error("Error logging user action:",e)}}checkWinCondition(){console.log("游戏胜利：已消除所有立方体！"),f.instance.enable=!1,this.unscheduleAllCallbacks(),parseInt(localStorage.getItem("maxLevel"),10)<I.currentLevelIndex&&localStorage.setItem("maxLevel",I.currentLevelIndex.toString()),this.logUserAction(),this.targetNode?(this.targetNode.active=!0,this.targetNode.setSiblingIndex(this.targetNode.parent.children.length-1),console.log(`Node "${this.targetNode.name}" has been activated and moved to the top layer.`),this._setupIKnowButtonListener()):console.error("Target node is not set!")}_setupIKnowButtonListener(){const e=this.targetNode.getChildByName("Finish");if(!e)return void console.error("IKnowButton node not found!");const t=e.getComponent(d);t?t.node.on("click",(()=>{console.log("User clicked '我知道了', continuing to render prefabs"),this.targetNode.active=!1,this._renderFinalPrefab()}),this):console.error("Button component not found on IKnowButton node!")}_renderFinalPrefab(){this.activeNode.setScale(2,2,2),this.activeNode.active=!0}_restrictInteraction(){const e=this.node.scene,t=[this.targetNode,this.activeNode],n=e=>{if(-1===t.indexOf(e)){const t=e.getComponent(d);t&&(t.interactable=!1)}e.children.forEach((e=>n(e)))};e.children.forEach((e=>n(e)))}}).prototype,"camera0",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(M.prototype,"effectNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(M.prototype,"selcetNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(M.prototype,"prefab1",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(M.prototype,"prefab2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(M.prototype,"prefab3",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(M.prototype,"prefab4",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(M.prototype,"prefab5",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(M.prototype,"prefab6",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(M.prototype,"activeNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(M.prototype,"targetNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=M))||z));i._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,h,g,a,c,p,C,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,s=t._decorator,l=t.Component,r=t.Color,h=t.Canvas,g=t.UITransform,a=t.instantiate,c=t.Label,p=t.RichText,C=t.Toggle,d=t.Button,m=t.director}],execute:function(){var u,L,M,b,T,f,x,S,E;i._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);const{ccclass:v,property:I}=s;t("DebugViewRuntimeControl",(u=v("internal.DebugViewRuntimeControl"),L=I(n),M=I(n),b=I(n),u((x=e((f=class extends l{constructor(...t){super(...t),o(this,"compositeModeToggle",x,this),o(this,"singleModeToggle",S,this),o(this,"EnableAllCompositeModeButton",E,this),this._single=0,this.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],this.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],this.strMisc=["CSM Layer Coloration","Lighting With Albedo"],this.compositeModeToggleList=[],this.singleModeToggleList=[],this.miscModeToggleList=[],this.textComponentList=[],this.labelComponentList=[],this.textContentList=[],this.hideButtonLabel=void 0,this._currentColorIndex=0,this.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],this.color=[r.WHITE,r.BLACK,r.RED,r.GREEN,r.BLUE]}start(){if(!this.node.parent.getComponent(h))return void console.error("debug-view-runtime-control should be child of Canvas");const t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height;let i=.1*e-e,n=o-.1*o;const s=this.node.getChildByName("MiscMode"),l=a(s);l.parent=this.node,l.name="Buttons";const m=a(s);m.parent=this.node,m.name="Titles";for(let t=0;t<2;t++){const e=a(this.EnableAllCompositeModeButton.getChildByName("Label"));e.setPosition(i+(t>0?450:150),n,0),e.setScale(.75,.75,.75),e.parent=m;const o=e.getComponent(c);o.string=t?"----------Composite Mode----------":"----------Single Mode----------",o.color=r.WHITE,o.overflow=0,this.labelComponentList[this.labelComponentList.length]=o}n-=20;let u=0;for(let t=0;t<this.strSingle.length;t++,u++){t===this.strSingle.length>>1&&(i+=200,u=0);const e=t?a(this.singleModeToggle):this.singleModeToggle;e.setPosition(i,n-20*u,0),e.setScale(.5,.5,.5),e.parent=this.singleModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strSingle[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[t]=e}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(d.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;let L=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=L;const M=a(this.EnableAllCompositeModeButton);M.setPosition(i+90,n,0),M.setScale(.5,.5,.5),M.on(d.EventType.CLICK,this.changeTextColor,this),M.parent=l,L=M.getComponentInChildren(c),L.string="TextColor",this.labelComponentList[this.labelComponentList.length]=L;const b=a(this.EnableAllCompositeModeButton);b.setPosition(i+200,n,0),b.setScale(.5,.5,.5),b.on(d.EventType.CLICK,this.hideUI,this),b.parent=this.node.parent,L=b.getComponentInChildren(c),L.string="Hide UI",this.labelComponentList[this.labelComponentList.length]=L,this.hideButtonLabel=L,n-=40;for(let t=0;t<this.strMisc.length;t++){const e=a(this.compositeModeToggle);e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=s;const o=e.getComponentInChildren(p);o.string=this.strMisc[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string;e.getComponent(C).isChecked=!!t,e.on(C.EventType.TOGGLE,t?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[t]=e}n-=150;for(let t=0;t<this.strComposite.length;t++){const e=t?a(this.compositeModeToggle):this.compositeModeToggle;e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=this.compositeModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strComposite[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[t]=e}}isTextMatched(t,e){let o=new String(t);const i=o.search(">");return-1===i?t===e:(o=o.substr(i+1),o=o.substr(0,o.search("<")),o===e)}toggleSingleMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let t=0;t<this.strSingle.length;t++)this.isTextMatched(o.string,this.strSingle[t])&&(e.singleMode=t)}toggleCompositeMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)}toggleLightingWithAlbedo(t){m.root.debugView.lightingWithAlbedo=t.isChecked}toggleCSMColoration(t){m.root.debugView.csmLayerColoration=t.isChecked}enableAllCompositeMode(t){const e=m.root.debugView;e.enableAllCompositeMode(!0);for(let t=0;t<this.compositeModeToggleList.length;t++){this.compositeModeToggleList[t].getComponent(C).isChecked=!0}let o=this.miscModeToggleList[0].getComponent(C);o.isChecked=!1,e.csmLayerColoration=!1,o=this.miscModeToggleList[1].getComponent(C),o.isChecked=!0,e.lightingWithAlbedo=!0}hideUI(t){const e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"}changeTextColor(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(let t=0;t<this.textComponentList.length;t++)this.textComponentList[t].string=this.strColor[this._currentColorIndex]+this.textContentList[t]+"</color>";for(let t=0;t<this.labelComponentList.length;t++)this.labelComponentList[t].color=this.color[this._currentColorIndex]}onLoad(){}update(t){}}).prototype,"compositeModeToggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(f.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(f.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/ElementLoad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mimi.ts","./GameScene.ts","./Global2.ts","./AudioMgr.ts","./TweenTools.ts"],(function(e){var t,i,r,o,s,n,l,a,u,h,c,p,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e.ProgressBar,s=e.Label,n=e.Node,l=e._decorator,a=e.Component,u=e.Animation},function(e){h=e.Mimi},function(e){c=e.GameScene},function(e){p=e.Global},function(e){g=e.AudioMgr},function(e){m=e.TweenTool}],execute:function(){var d,S,f,P,b,C,B,N,y,T,M,v,w,k,z,G,I,O,x;r._RF.push({},"04c6cIfkj1FWb9K94tl4+MV","ElementLoad",void 0);const{ccclass:L,property:E}=l;e("ElementLoad",(d=L("ElementLoad"),S=E(o),f=E(s),P=E(n),b=E(s),C=E(s),B=E(n),N=E(n),y=E(n),d((v=t((M=class extends a{constructor(...e){super(...e),i(this,"CollectProgress",v,this),this.CurrentProgress=0,this.TakeOffProgress=100,this.TakeOffSpeed=50,i(this,"ScoreText",w,this),i(this,"Mimi",k,this),i(this,"Bleed",z,this),this.BleedNum=3,i(this,"Coin",G,this),i(this,"GameScene",I,this),this.IsSpeed=!1,this.CutNum=10,i(this,"PropButton",O,this),i(this,"Sou",x,this),this.PropTime=60}start(){this.CollectProgress.progress=0,this.CurrentProgress=0,p.ScoreNum=0,this.ScoreText.string=Math.floor(p.ScoreNum).toString(),p.CoinNum=0,this.Coin.string=p.CoinNum.toString(),this.BleedNum=3,this.Bleed.string=this.BleedNum.toString(),this.PropButton.active=!1,this.Sou.active=!1}IamSave(){this.BleedNum=3,this.Bleed.string=this.BleedNum.toString()}UpdateScore(e){e*=.1,p.ScoreNum+=Math.abs(e),this.ScoreText.string=Math.floor(p.ScoreNum).toString(),this.IsSpeed||(this.CurrentProgress+=Math.abs(e),this.CurrentProgress>=this.TakeOffProgress&&(this.CurrentProgress=this.TakeOffProgress,this.ShowProp()),this.CollectProgress.progress=this.CurrentProgress/this.TakeOffProgress)}update(e){this.IsSpeed&&(this.Mimi.getComponent(h).Vy=this.TakeOffSpeed,this.PropTime--,this.PropTime<=0&&(this.IsSpeed=!1))}BleedReduce(){g.instance.PlayBomb(),this.BleedNum-=3,this.Bleed.string=this.BleedNum.toString(),0==this.BleedNum&&this.GameScene.getComponent(c).GameOver()}AddCoin(e){p.CoinNum+=e,this.Coin.string=p.CoinNum.toString()}ClickProp(){p.IsDebug&&console.log("点击道具"),g.instance.PlayEffect("sou","click"),this.IsSpeed=!0,this.PropButton.active=!1,this.CurrentProgress=0,this.CollectProgress.progress=0,this.Sou.active=!0,this.Sou.getComponent(u).play()}ShowProp(){this.PropButton.active||(this.PropButton.active=!0,m.Pop(this.PropButton))}}).prototype,"CollectProgress",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(M.prototype,"ScoreText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(M.prototype,"Mimi",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(M.prototype,"Bleed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(M.prototype,"Coin",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(M.prototype,"GameScene",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(M.prototype,"PropButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(M.prototype,"Sou",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=M))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/EndBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts","./TweenTools.ts","./AudioMgr.ts"],(function(e){var t,n,o,r,l,c,a,i,s,u,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,r=e.Label,l=e.Node,c=e._decorator,a=e.Component,i=e.assetManager,s=e.director},function(e){u=e.Global},function(e){d=e.TweenTool},function(e){h=e.AudioMgr}],execute:function(){var p,x,g,v,I,L,S;o._RF.push({},"186b3RDvuxFGrbPBsHk1o9+","EndBox",void 0);const{ccclass:f,property:b}=c;e("EndBox",(p=f("EndBox"),x=b(r),g=b(l),p((L=t((I=class extends a{constructor(...e){super(...e),n(this,"ScoreText",L,this),n(this,"Box",S,this)}start(){this.ScoreText.string=Math.floor(u.ScoreNum).toString(),d.Pop(this.Box)}ClickBackHome(){this.logPlayerAction("BacktoMenu"),u.IsDebug&&console.log("点击返回首页"),h.instance.DestroyBgSound(),this.loadSceneWithCleanup("Scene")}ClickNextLevel(){u.currentLevelIndex=u.currentLevelIndex+1,console.log(u.currentLevelIndex),u.currentLevelIndex>=0&&u.currentLevelIndex<=4?this.loadSceneWithCleanup("flip"):u.currentLevelIndex>=5&&u.currentLevelIndex<=9?this.loadSceneWithCleanup("adjust"):u.currentLevelIndex>=10&&u.currentLevelIndex<=14?this.loadSceneWithCleanup("second"):u.currentLevelIndex>=15&&u.currentLevelIndex<=19?this.loadSceneWithCleanup("choose"):console.error("Invalid NowIndex value:",u.currentLevelIndex)}loadSceneWithCleanup(e){i.assets.forEach((e=>{e.refCount||i.releaseAsset(e)})),s.loadScene(e)}ClickRestart(){u.IsDebug&&console.log("点击重新开始关卡"),u.currentLevelIndex>=0&&u.currentLevelIndex<=4?this.loadSceneWithCleanup("flip"):u.currentLevelIndex>=5&&u.currentLevelIndex<=9?this.loadSceneWithCleanup("adjust"):u.currentLevelIndex>=10&&u.currentLevelIndex<=14?this.loadSceneWithCleanup("second"):u.currentLevelIndex>=15&&u.currentLevelIndex<=19?this.loadSceneWithCleanup("choose"):console.error("Invalid NowIndex value:",u.currentLevelIndex)}async logPlayerAction(e){const t=localStorage.getItem("currentUsername"),n=localStorage.getItem("sessionToken");function o(e,t,n="0"){const o=String(e);return o.length>=t?o:n.repeat(t-o.length)+o}const r=new Date,l=new Date(r.getTime()+288e5),c={tableName:"user_operate",data:{Usr_ID:t,Operation:e,Timestep:`${l.getFullYear()}-${o(l.getMonth()+1,2)}-${o(l.getDate(),2)} ${o(l.getHours(),2)}:${o(l.getMinutes(),2)}:${o(l.getSeconds(),2)}.${o(l.getMilliseconds(),3)}`,Level:u.currentLevelIndex??0}};try{const e=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(c)});if(!e.ok)throw new Error("❌ 错误：无法记录玩家操作");const t=await e.json();console.log("✅ 玩家操作记录成功：",t)}catch(e){console.error("❌ 记录玩家操作时发生错误：",e)}}}).prototype,"ScoreText",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(I.prototype,"Box",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=I))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/EstablishFloor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts"],(function(e){var t,i,f,s,r,n,o,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){f=e.cclegacy,s=e.Vec3,r=e.Prefab,n=e._decorator,o=e.Component,a=e.instantiate},function(e){l=e.Global}],execute:function(){var u,O,c,d,b,h,p,g,j,z,S,y;f._RF.push({},"c30b3ldNHtMp7QKHi5vOgHl","EstablishFloor",void 0);const{ccclass:P,property:m}=n;e("GenerateGround",(u=P("GenerateGround"),O=m(s),c=m(s),d=m(r),b=m([r]),u((g=t((p=class extends o{constructor(...e){super(...e),i(this,"gridSize",g,this),i(this,"cubeSize",j,this),i(this,"groundStartPosition",z,this),i(this,"cubePrefab",S,this),i(this,"prefabs",y,this),this.levels=[[{iOffset:0,jOffset:0},{iOffset:-1,jOffset:0},{iOffset:1,jOffset:0},{iOffset:1,jOffset:1}],[{iOffset:-1,jOffset:0},{iOffset:0,jOffset:0},{iOffset:0,jOffset:1}],[{iOffset:0,jOffset:0},{iOffset:0,jOffset:-1},{iOffset:-1,jOffset:-1},{iOffset:0,jOffset:1}],[{iOffset:0,jOffset:0},{iOffset:-1,jOffset:0},{iOffset:1,jOffset:0},{iOffset:-1,jOffset:1},{iOffset:2,jOffset:0},{iOffset:2,jOffset:-1}],[{iOffset:0,jOffset:0},{iOffset:-1,jOffset:0},{iOffset:1,jOffset:0},{iOffset:1,jOffset:-1},{iOffset:-2,jOffset:0},{iOffset:-2,jOffset:1}]]}onDestroy(){this.node.removeAllChildren(),console.log("GenerateGround destroyed and all child nodes removed.")}start(){this.cubePrefab?this.generateGround():console.error("Cube prefab is not assigned!")}generateGround(){const e=2.2,t=this.groundStartPosition.x-this.gridSize/2*e,i=this.groundStartPosition.z-this.gridSize/2*e,f=Math.floor(this.gridSize/2),r=l.currentLevelIndex,n=this.levels[r-5]||[];for(let r=0;r<this.gridSize;r++)for(let o=0;o<this.gridSize;o++){if(n.some((e=>r===f+e.iOffset&&o===f+e.jOffset)))continue;const l=a(this.cubePrefab);l.setScale(new s(2,.7,2)),l.setPosition(new s(t+r*e,this.groundStartPosition.y,i+o*e)),this.node.addChild(l)}}}).prototype,"gridSize",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),j=t(p.prototype,"cubeSize",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(2,.7,2)}}),z=t(p.prototype,"groundStartPosition",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,0)}}),S=t(p.prototype,"cubePrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(p.prototype,"prefabs",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=p))||h));f._RF.pop()}}}));

System.register("chunks:///_virtual/Finger_Fourth.ts",["cc","./UI.ts"],(function(t){var e,i,s,o,n,a,l;return{setters:[function(t){e=t.cclegacy,i=t.Component,s=t.Vec3,o=t.UIOpacity,n=t.tween,a=t._decorator},function(t){l=t.EventSystem}],execute:function(){var r;e._RF.push({},"662503MIfpMup+FuqFACrPA","Finger_Fourth",void 0);const{ccclass:c,property:h}=a;t("Finger",c("Finger")(r=class extends i{constructor(...t){super(...t),this.initialPosition=new s(480,-600,0),this.respawnPosition=new s(550,-600,0),this.initialScale=new s(.5,.5,.5),this.smallScale=new s(.3,.3,.3),this.largeScale=new s(.5,.5,.5),this.opacityComponent=null,this.monitoredNode=null,this.previousNodePosition=new s,this.scaleTween=null,this.flag=!0,this.flag2=!0,this.isSelectTriggered=!1,this.isDragTriggered=!1}start(){this.node.setPosition(this.initialPosition.clone()),this.node.setScale(this.initialScale.clone()),this.opacityComponent=this.node.getComponent(o)||this.node.addComponent(o),this.startScaleAnimation(),l.on("Select",this.onSelectTriggered,this)}onSelectTriggered(){this.isSelectTriggered?console.warn("Select 已经触发，不需要重复监听！"):(console.log("监听到 Select 事件，开始监听 drag 事件"),this.isSelectTriggered=!0,l.on("drag",this.onDragTriggered,this),this.stopScaleAnimation(),this.respawnAtNewPosition())}onDragTriggered(){this.isDragTriggered?console.warn("Drag 已经触发，不需要重复监听！"):(this.isDragTriggered=!0,this.onSwipeHandled(),this.flag=!1,l.off("drag",this.onDragTriggered,this))}bringToFront(){if(!this.node.parent)return void console.warn("当前节点没有父节点，无法调整层级！");const t=this.node.parent.children.length-1;this.node.setSiblingIndex(t),console.log("当前节点已被置于最前面！")}update(t){this.monitoredNode&&(this.flag2?this.respawnAtNewPosition():this.node.active=!1)}onSwipeHandled(){this.flag2=!1}stopScaleAnimation(){this.scaleTween&&(this.scaleTween.stop(),this.scaleTween=null),this.node.active=!1,console.log("缩放动画已停止，当前节点已被隐藏")}startScaleAnimation(){this.scaleTween||(this.scaleTween=n(this.node).repeatForever(n().to(.6,{scale:this.smallScale},{easing:"smooth"}).to(.6,{scale:this.largeScale},{easing:"smooth"})).start(),console.log("缩放动画已开始，节点在 (396, -252) 位置持续缩放"))}respawnAtNewPosition(){this.node.active=!0,this.node.setPosition(this.respawnPosition.clone()),this.node.setScale(this.largeScale.clone());const t=new s(550,-400,0);this.opacityComponent=this.node.getComponent(o)||this.node.addComponent(o),this.opacityComponent.opacity=255,n(this.node).to(.4,{scale:this.smallScale},{easing:"smooth"}).to(1,{position:t},{easing:"smooth"}).to(.4,{scale:this.largeScale},{easing:"smooth"}).call((()=>{this.opacityComponent&&n(this.opacityComponent).to(.5,{opacity:0}).call((()=>this.resetToInitialState())).start()})).start()}resetToInitialState(){this.flag2?(this.opacityComponent.opacity=255,this.respawnAtNewPosition()):this.node.active=!1}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Finger_second.ts",["cc"],(function(e){var i,t,s,o,n,a,l,c;return{setters:[function(e){i=e.cclegacy,t=e.Component,s=e.Vec3,o=e.Quat,n=e.UIOpacity,a=e.find,l=e.tween,c=e._decorator}],execute:function(){var h;i._RF.push({},"5f2f5cm9g1GV4YfN0wkB20q","Finger_second",void 0);const{ccclass:r,property:p}=c;e("Finger",r("Finger")(h=class extends t{constructor(...e){super(...e),this.elapsedTime=0,this.initialPosition=new s(90,-270,0),this.finalPosition=new s(515,-270,0),this.newPosition=new s(645,-837,0),this.initialScale=new s(.5,.5,.5),this.smallScale=new s(.3,.3,.3),this.largeScale=new s(.5,.5,.5),this.opacityComponent=null,this.isOperationActive=!1,this.previousRotation=new o,this.cube4Node=null,this.previousCube4Rotation=new o,this.scaleTween=null}start(){this.node.setPosition(this.initialPosition.clone()),this.node.setScale(this.initialScale.clone()),this.opacityComponent=this.node.getComponent(n)||this.node.addComponent(n),this.bringToFront(),this.cube4Node=a("Node/Cube4-mini"),this.cube4Node?(this.previousCube4Rotation.set(this.cube4Node.rotation),console.log("成功找到 cube4 节点并记录初始旋转:",this.previousCube4Rotation)):console.error("未找到名为 cube4 的节点，请确认路径是否正确")}bringToFront(){if(!this.node.parent)return void console.warn("当前节点没有父节点，无法调整层级！");const e=this.node.parent.children.length-1;this.node.setSiblingIndex(e),console.log("当前节点已被置于最前面！")}update(e){this.monitorCube4Rotation(),this.isOperationActive||this.playAnimation(e,this.animationModule1.bind(this))}monitorCube4Rotation(){if(!this.cube4Node)return;const e=this.cube4Node.rotation;this.previousCube4Rotation.equals(e)||(console.log("检测到 cube4 旋转发生变化，触发新动画！"),this.isOperationActive=!0,this.startNewAnimation()),this.previousCube4Rotation.set(e)}onDestroy(){console.log("Cleaning up Finger component..."),this.scaleTween&&(this.scaleTween.stop(),this.scaleTween=null),this.cube4Node&&(this.cube4Node=null),this.isOperationActive=!1,this.elapsedTime=0,console.log("Finger component cleanup complete.")}playAnimation(e,i){i(e)}animationModule1(e){if(this.elapsedTime+=e,this.elapsedTime>3.5)this.resetState();else if(this.elapsedTime<.8){const e=this.elapsedTime/.8,i=s.lerp(new s,this.initialScale,this.smallScale,e);this.node.setScale(i)}else if(this.elapsedTime<2.1){const e=(this.elapsedTime-.8)/1.3,i=s.lerp(new s,this.initialPosition,this.finalPosition,e);this.node.setPosition(i)}else if(this.elapsedTime<2.9){const e=(this.elapsedTime-2.1)/.8,i=s.lerp(new s,this.smallScale,this.initialScale,1-e);this.node.setScale(i)}}startNewAnimation(){this.node.setPosition(this.newPosition.clone()),this.scaleTween=l(this.node).repeatForever(l().to(.6,{scale:this.smallScale},{easing:"smooth"}).to(.6,{scale:this.largeScale},{easing:"smooth"})).start(),console.log("新动画已开始，节点移动到 (645, -817)")}resetState(){this.node.setPosition(this.initialPosition.clone()),this.node.setScale(this.initialScale.clone()),this.opacityComponent&&(this.opacityComponent.opacity=255),this.elapsedTime=0}})||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/Finger_Third.ts",["cc","./RubiksCube.ts"],(function(t){var e,i,o,s,n,a,l,h;return{setters:[function(t){e=t.cclegacy,i=t.Component,o=t.Vec3,s=t.UIOpacity,n=t.find,a=t.tween,l=t._decorator},function(t){h=t.EventSystem}],execute:function(){var c;e._RF.push({},"5a18chk06ZKUre/0ZmjewH0","Finger_Third",void 0);const{ccclass:r,property:d}=l;t("Finger",r("Finger")(c=class extends i{constructor(...t){super(...t),this.initialPosition=new o(396,-252,0),this.respawnPosition=new o(412,-277,0),this.initialScale=new o(.5,.5,.5),this.smallScale=new o(.3,.3,.3),this.largeScale=new o(.5,.5,.5),this.opacityComponent=null,this.monitoredNode=null,this.previousNodePosition=new o,this.scaleTween=null,this.flag=!0,this.flag2=!0}start(){h.on("swipeHandled",this.onSwipeHandled,this),console.log(this.node.active),this.node.setPosition(this.initialPosition.clone()),this.node.setScale(this.initialScale.clone()),this.opacityComponent=this.node.getComponent(s)||this.node.addComponent(s),this.bringToFront(),this.monitoredNode=n("Cube/RubiksCube/box"),this.monitoredNode?(this.previousNodePosition.set(this.monitoredNode.getPosition()),console.log("成功找到需要监控的节点，并记录其初始位置:",this.previousNodePosition)):console.error("未找到需要监控的节点，请确认路径是否正确"),this.startScaleAnimation()}bringToFront(){if(!this.node.parent)return void console.warn("当前节点没有父节点，无法调整层级！");const t=this.node.parent.children.length-1;this.node.setSiblingIndex(t),console.log("当前节点已被置于最前面！")}update(t){if(!this.monitoredNode)return;const e=this.monitoredNode.getPosition();this.previousNodePosition.subtract(e).length()>.1&&this.flag&&(this.flag=!1,this.stopScaleAnimation(),this.respawnAtNewPosition()),this.previousNodePosition.set(e)}startScaleAnimation(){this.scaleTween||(this.scaleTween=a(this.node).repeatForever(a().to(.6,{scale:this.smallScale},{easing:"smooth"}).to(.6,{scale:this.largeScale},{easing:"smooth"})).start(),console.log("缩放动画已开始，节点在 (396, -252) 位置持续缩放"))}stopScaleAnimation(){this.scaleTween&&(this.scaleTween.stop(),this.scaleTween=null),this.node.active=!1,console.log("缩放动画已停止，当前节点已被隐藏")}respawnAtNewPosition(){this.node.active=!0,this.node.setPosition(this.respawnPosition.clone()),this.node.setScale(this.largeScale.clone());const t=new o(412,-550,0);this.opacityComponent=this.node.getComponent(s)||this.node.addComponent(s),this.opacityComponent.opacity=255,a(this.node).to(.4,{scale:this.smallScale},{easing:"smooth"}).to(1,{position:t},{easing:"smooth"}).to(.5,{scale:this.largeScale},{easing:"smooth"}).call((()=>{this.opacityComponent&&a(this.opacityComponent).to(.5,{opacity:0}).call((()=>this.resetToInitialState())).start()})).start()}resetToInitialState(){this.flag2?(this.node.active=!0,this.node.setPosition(this.respawnPosition.clone()),this.node.setScale(this.initialScale.clone()),this.opacityComponent&&(this.opacityComponent.opacity=255),this.respawnAtNewPosition()):this.node.active=!1}onSwipeHandled(){console.log("检测到 handleSwipe 被调用，停止 Finger 动画！"),this.flag2=!1,this.node.active=!1}onDestroy(){h.off("swipeHandled",this.onSwipeHandled,this),this.scaleTween&&(this.scaleTween.stop(),this.scaleTween=null)}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Finger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,s,o,n,a,r,l;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){s=i.cclegacy,o=i.Node,n=i._decorator,a=i.Component,r=i.Vec3,l=i.UIOpacity}],execute:function(){var h,p,c,d,u;s._RF.push({},"ad9afKPVS1E5LZAZ/hJmVF8","Finger",void 0);const{ccclass:g,property:m}=n;i("Finger",(h=g("Finger"),p=m(o),h((u=t((d=class extends a{constructor(...i){super(...i),e(this,"targetNode",u,this),this.elapsedTime=0,this.initialPosition=new r,this.initialScale=new r,this.opacityComponent=null,this.isOperationActive=!1,this.previousTargetPos=new r}start(){this.initialPosition=this.node.position.clone(),this.initialScale=this.node.scale.clone(),this.opacityComponent=this.node.getComponent(l)||this.node.addComponent(l),this.targetNode&&this.previousTargetPos.set(this.targetNode.position.x,this.targetNode.position.y,this.targetNode.position.z)}update(i){this.monitorTargetPosition(),this.isOperationActive?this.node.active=!1:this.playAnimation(i,this.animationModule1.bind(this))}monitorTargetPosition(){if(!this.targetNode)return;const i=this.targetNode.position;this.previousTargetPos.equals(i)||(console.log("目标节点位置发生了变化，停止动画！"),this.isOperationActive=!0),this.previousTargetPos.set(i.x,i.y,i.z)}playAnimation(i,t){t(i)}animationModule1(i){if(this.isOperationActive)return;if(this.elapsedTime+=i,this.elapsedTime>3.5)this.resetState();else if(this.elapsedTime<.8){const i=this.elapsedTime/.8,t=r.lerp(new r,this.initialScale,new r(.3,.3,.3),i);this.node.setScale(t)}else if(this.elapsedTime<2.1){const i=400*((this.elapsedTime-.8)/1.3)-600;this.node.setPosition(new r(this.initialPosition.x,i,this.initialPosition.z))}}resetState(){this.node.setPosition(new r(600,-600,0)),this.node.setScale(this.initialScale),this.opacityComponent&&(this.opacityComponent.opacity=255),this.elapsedTime=0}}).prototype,"targetNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=d))||c));s._RF.pop()}}}));

System.register("chunks:///_virtual/FlipCubeOnSurface.ts",["cc"],(function(t){var i,s,e,n,o,a,r,h,c;return{setters:[function(t){i=t.cclegacy,s=t.Component,e=t.Vec3,n=t.Quat,o=t.systemEvent,a=t.SystemEvent,r=t.KeyCode,h=t.misc,c=t._decorator}],execute:function(){var p;i._RF.push({},"7b22826PBBLU4+ClatC0c2c","FlipCubeOnSurface",void 0);const{ccclass:u}=c;t("FlipCubeOnSurface",u("FlipCubeOnSurface")(p=class extends s{constructor(...t){super(...t),this.isAnimating=!1,this.startPosition=new e,this.endPosition=new e,this.startRotation=new n,this.endRotation=new n,this.currentLerpTime=0,this.totalLerpTime=.5,this.spacing=1.1}start(){o.on(a.EventType.KEY_DOWN,this.onKeyDown,this)}onKeyDown(t){if(!this.isAnimating)switch(t.keyCode){case r.KEY_A:this.rotateByAxis(new e(-this.spacing,0,0),new e(0,0,1),90);break;case r.KEY_D:this.rotateByAxis(new e(this.spacing,0,0),new e(0,0,1),-90);break;case r.KEY_W:this.rotateByAxis(new e(0,0,-this.spacing),new e(1,0,0),-90);break;case r.KEY_S:this.rotateByAxis(new e(0,0,this.spacing),new e(1,0,0),90)}}rotateByAxis(t,i,s){if(this.startPosition=this.node.position.clone(),e.add(this.endPosition,this.startPosition,t),Math.abs(this.endPosition.x)>1.5*this.spacing||Math.abs(this.endPosition.z)>1.5*this.spacing)return;this.startRotation=this.node.rotation.clone();const o=h.degreesToRadians(s);n.rotateAround(this.endRotation,this.startRotation,i,o),n.normalize(this.endRotation,this.endRotation),this.currentLerpTime=0,this.isAnimating=!0}update(t){if(this.isAnimating){this.currentLerpTime+=t,this.currentLerpTime>this.totalLerpTime&&(this.currentLerpTime=this.totalLerpTime);const i=this.currentLerpTime/this.totalLerpTime,s=n.slerp(new n,this.startRotation,this.endRotation,i);this.node.setRotation(s);const o=e.lerp(new e,this.startPosition,this.endPosition,i);this.node.setPosition(o),i>=1&&(this.isAnimating=!1)}}onDestroy(){o.off(a.EventType.KEY_DOWN,this.onKeyDown,this)}})||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mimi.ts","./Global2.ts","./TopLoad.ts","./AdBox.ts","./ElementLoad.ts","./LocalMgr.ts"],(function(e){var t,o,i,n,s,a,c,l,r,u,m,p,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,s=e._decorator,a=e.Component,c=e.Input},function(e){l=e.Mimi},function(e){r=e.Global,u=e.AssetList},function(e){m=e.TopLoad},function(e){p=e.AdBox},function(e){h=e.ElementLoad},function(e){d=e.LocalMgr}],execute:function(){var g,b,v,T,C,f,I,E,M;i._RF.push({},"0d3bc8AtvZGt4wtPZo+3D9T","GameScene",void 0);const{ccclass:y,property:G}=s;e("GameScene",(g=y("GameScene"),b=G(n),v=G(n),T=G(n),g((I=t((f=class extends a{constructor(...e){super(...e),o(this,"TouchBg",I,this),o(this,"Mimi",E,this),o(this,"ElementLoad",M,this)}start(){r.IsGameOver=!1,r.IsAd=!0,this.TouchBg.on(c.EventType.TOUCH_MOVE,this.TouchCb,this),this.TouchBg.on(c.EventType.TOUCH_END,this.TouchCb,this),this.TouchBg.on(c.EventType.TOUCH_CANCEL,this.TouchCb,this)}TouchCb(e){e.type==c.EventType.TOUCH_MOVE?this.Mimi.getComponent(l).ImaMove(e.getDeltaX()):this.Mimi.getComponent(l).ImaMove(0)}GameOver(){if(r.IsDebug&&console.log("游戏结束"),r.IsGameOver=!0,d.instance.GameOver(),r.IsAd){m.instance.AddPop(u.Pop.AdBox).getComponent(p).Cb=this.IamSave.bind(this)}else m.instance.AddPop(u.Pop.EndBox)}IamSave(){r.IsDebug&&console.log("复活"),r.IsAd=!1,r.IsGameOver=!1,this.Mimi.getComponent(l).IamSave(),this.ElementLoad.getComponent(h).IamSave()}}).prototype,"TouchBg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(f.prototype,"Mimi",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(f.prototype,"ElementLoad",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=f))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,a,t,i,c,n,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){t=e.cclegacy,i=e.Camera,c=e._decorator,n=e.Component,l=e.Layers}],execute:function(){var s,o,u,p,m,h,y;t._RF.push({},"43dff+UVQBIHJv/B68vNxTe","Global",void 0);const{ccclass:D,property:b}=c;e("SceneRenderer",(s=D("SceneRenderer"),o=b(i),u=b(i),s((h=r((m=class extends n{constructor(...e){super(...e),a(this,"camera3D",h,this),a(this,"cameraUI",y,this)}start(){this.cameraUI.priority=0,this.cameraUI.visibility=l.Enum.UI_2D,this.cameraUI.clearFlags=i.ClearFlag.SOLID_COLOR,this.camera3D.priority=1,this.camera3D.visibility=l.Enum.DEFAULT,this.camera3D.clearFlags=i.ClearFlag.DEPTH_ONLY}}).prototype,"camera3D",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(m.prototype,"cameraUI",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=m))||p));t._RF.pop()}}}));

System.register("chunks:///_virtual/Global2.ts",["cc"],(function(e){var o,r,t,a,s;return{setters:[function(e){o=e.cclegacy,r=e.Prefab,t=e.AudioClip,a=e.SpriteFrame,s=e._decorator}],execute:function(){var n,c;o._RF.push({},"b1188EhiwlHA7jF4mHKFzLF","Global",void 0);const{ccclass:i,property:p}=s;e("AssetList",{BundleName:"GameRes",Scene:{LoginScene:"LoginScene",GameScene:"GameScene"},Pop:{AdBox:"AdBox",EndBox:"EndBox",ShopBox:"ShopBox",Nobox:"Noboard"},Asset:{Prefabs:{path:"Prefab",type:r},Sounds:{path:"Sound",type:t},SpriteFrames:{path:"SpriteFrame",type:a}}}),e("PropList",{Coin:"coin",Boom:"bomb",Speed:"arrowbullte"});e("Global",i("Global")(((c=class{}).LoadProgress=0,c.IsWx=!1,c.IsDebug=!0,c.GameBottom=-600,c.IsGameOver=!1,c.ScoreNum=0,c.CoinNum=0,c.IsAd=!0,c.currentLevelIndex=0,c.isAI=0,n=c))||n);o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts"],(function(e){var t,o,n,r,l,s,i;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Vec2,l=e._decorator,s=e.Component},function(e){i=e.Global}],execute:function(){var c,p,u,a,v;n._RF.push({},"d6ef3xoDsBOAZDF9/Bp+l5A","LevelController",void 0);const{ccclass:f,property:d}=l;e("LevelController",(c=f("LevelController"),p=d({type:[r]}),c((v=t((a=class extends s{constructor(...e){super(...e),o(this,"positions",v,this),this.levels=[[new r(.5,-1)],[new r(-.5,-1)],[new r(1.5,1)],[new r(-.5,1)],[new r(-.5,0)]]}onLoad(){const e=i.currentLevelIndex;this.positions=this.levels[e]}}).prototype,"positions",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=a))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/Levels.ts",["cc"],(function(e){var a,s;return{setters:[function(e){a=e.cclegacy,s=e.Vec3}],execute:function(){a._RF.push({},"6321c5rmwZPBbrNrrCII4Gd","Levels",void 0);e("Levels",[{Level:1,Count:3,Time:5e3,DampTime:2,TypeRands:3,Types:["Prefab1","Prefab2","Prefab3"],CustomOrder:[0,1,2,1,2,0,2,0,1],Rotations:[{axes:[s.UNIT_X],angles:[0,0,0]},{axes:[s.UNIT_Y],angles:[0,0,0]},{axes:[s.UNIT_Z],angles:[0,0,0]}]},{Level:2,Count:3,Time:5e3,DampTime:2,TypeRands:3,Types:["Prefab1","Prefab2","Prefab3"],CustomOrder:[0,1,2,1,2,0,2,0,1],Rotations:[{axes:[s.UNIT_X],angles:[0,45,90]},{axes:[s.UNIT_Y],angles:[0,45,90]},{axes:[s.UNIT_Z],angles:[0,45,90]}]},{Level:3,Count:4,Time:5e3,DampTime:2,TypeRands:4,Types:["Prefab2","Prefab3","Prefab4"],CustomOrder:[0,1,2,2,1,0,1,0,2],Rotations:[{axes:[s.UNIT_X,s.UNIT_Y],angles:[0,45,90]},{axes:[s.UNIT_Y,s.UNIT_Z],angles:[0,45,90]},{axes:[s.UNIT_X,s.UNIT_Z],angles:[0,45,90]}]},{Level:4,Count:4,Time:5e3,DampTime:2,TypeRands:4,Types:["Prefab3","Prefab4","Prefab5"],CustomOrder:[0,2,1,1,0,2,2,1,0],Rotations:[{axes:[s.UNIT_X,s.UNIT_Y,s.UNIT_Z],angles:[0,60,120]},{axes:[s.UNIT_X,s.UNIT_Y,s.UNIT_Z],angles:[0,60,120]},{axes:[s.UNIT_X,s.UNIT_Y,s.UNIT_Z],angles:[0,60,120]}]},{Level:5,Count:5,Time:5e3,DampTime:2,TypeRands:5,Types:["Prefab1","Prefab6","Prefab4"],CustomOrder:[0,2,1,2,1,0,1,2,0],Rotations:[{axes:[s.UNIT_X,s.UNIT_Y,s.UNIT_Z],angles:[-60,45,90]},{axes:[s.UNIT_X,s.UNIT_Y,s.UNIT_Z],angles:[-60,45,90]},{axes:[s.UNIT_X,s.UNIT_Y,s.UNIT_Z],angles:[-60,45,90]}]}]);a._RF.pop()}}}));

System.register("chunks:///_virtual/LLM.ts",["./rollupPluginModLoBabelHelpers.js","cc","./typer.ts","./Global2.ts"],(function(t){var e,n,i,o,s,r,a,c,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Button,s=t.Node,r=t._decorator,a=t.Component,c=t.tween,l=t.Vec3},function(t){u=t.TypewriterEffect},function(t){h=t.Global}],execute:function(){var p,d,f,m,g,w,b,y,B,S,k,A,L,v,T;i._RF.push({},"679bafC88VLmJK64w3TBKoE","LLM",void 0);const{ccclass:E,property:I}=r;t("DeepSeekAPI",(p=E("DeepSeekAPI"),d=I(o),f=I(o),m=I(o),g=I(o),w=I(s),b=I(u),p((S=e((B=class extends a{constructor(...t){super(...t),n(this,"suitableButton",S,this),n(this,"difficultButton",k,this),n(this,"moreStrategiesButton",A,this),n(this,"iKnowButton",L,this),n(this,"npcNode",v,this),n(this,"typewriterEffect",T,this),this.apiKey="sk-8ed19ac079034f3596d147aec5f4f4d5",this.baseUrl="https://api.deepseek.com",this.messages=[{role:"system",content:"你是一个游戏助手，设计用于帮助玩家在心理旋转能力测试类游戏中提高游戏体验和动机。你的任务是根据玩家的状态和反馈提供帮助，尤其在玩家遇到困难时提供策略和情感支持，同时根据关卡的不同阶段提供定制化建议。\n              \n              根据玩家的历史数据（如反馈、关卡进度和使用的策略），你选择不同的策略进行反馈。当玩家选择“遇到困难了”或“有点困难”时，你根据他们所处的关卡，提供策略支持。如果玩家选择“蛮简单的”或“难度刚刚好”，你应该更多地提供鼓励。\n              \n              ### 游戏机制策略：\n              \n              #### 游戏机制一（关卡 1-5）  \n              **游戏内容**：玩家操作一个立方体在棋盘上滚动，目标是使将物体移动到目标格子上的同时初始位于立方体顶面上的按钮朝下。\n              \n              - **核心策略**：\n                  - **按钮与面关系**：在操作过程中，格外注意**按钮所在的立方体面与立方体的滚动路径之间的关系**，确保旋转后按钮朝向正确，同时物体移动到目标格子。\n                  - **重复模式识别**：通过识别关卡中的旋转模式，减少思考时间，例如如果某些位置的按钮已经成功朝下，可以快速重复相似的操作。\n                  - **任务拆解**：将目标任务拆解成小步骤，比如首先确保按钮通过旋转移动到你想要的状态，再确保物体能精确地停在目标格子。\n                  - **回顾总结**：每次完成关卡后，总结旋转步骤和按钮朝向的变化，反思哪些操作最有效。\n                  - **反向思维**：如果卡住，可以从目标位置反推，思考如何通过当前状态的旋转来达成目标。\n              \n              #### 游戏机制二（关卡 6-10）  \n              **游戏内容**：玩家操作一个由多个正方体组成的物体进行旋转，目标是通过旋转调整物体的视角，使得某个视图的孔洞对准目标。\n              \n              - **核心策略**：\n                  - **多轴旋转预判**：每次旋转之前，预判多轴旋转后的物体姿态，确保从正确的视角来看，目标孔洞能对准正确的位置。\n                  - **分步旋转**：将复杂的旋转动作分解为多个小步骤，避免一次性旋转过多，导致失控或错位。\n                  - **反向推理**：从目标孔洞的位置出发，反推物体的旋转路径，找到最有效的旋转顺序。\n                  - **每步评估与调整**：每旋转一次，立刻评估物体的新姿态，快速调整策略，确保每次旋转都朝着目标更近一步。\n              \n              #### 游戏机制三（关卡 11-15）  \n              **游戏内容**：玩家可以旋转魔方，移动魔方表面上的一个立方体，使得立方体通过可移动的路径达到目标位置。\n              \n              - **核心策略**：\n                  - **魔方块位置关系熟悉**：熟练掌握魔方各个块的位置关系和旋转规律，尤其是在解决更复杂的布局时，记住哪些面和块之间存在直接的依赖关系。\n                  - **目标拆解**：将目标任务拆解成多个小目标，每次旋转时专注于调整一个小块的位置，逐步完成整个魔方的目标。\n                  - **预判旋转后的状态**：分析当前魔方状态并预测每次旋转后，魔方各面之间的关系，确保每步都有效。\n                  - **逆向推理**：从目标位置出发，逆向推理所需的每一步操作，逐渐还原到正确的状态。\n                  - **物体记忆**：利用空间记忆帮助你跟踪不可见面的状态，避免在旋转过程中丢失信息，特别是在复杂的魔方操作时，记住每个面和块的相对位置。\n                  - **反馈调整**：每次旋转后，根据新状态调整策略，避免错误积累，逐步修正布局。\n              \n              #### 游戏机制四（关卡 16-20）  \n              **游戏内容**：场地上有3*3个立方体，玩家需要连续选择三个相同的立方体并最终消除所有立方体，立方体的配置是MRT测验中常见的形态。\n              \n              - **核心策略**：\n                  - **场地与目标观察**：在每次操作前，仔细观察场地的整体布局和目标结构，选择易于上手的物体进行判断。\n                  - **标记与颜色工具使用**：利用游戏中的标记和颜色工具，对每个立方体的面进行标记，帮助你快速识别和保持空间理解，避免操作混乱。\n                  - **镜像效应注意**：特别留意立方体之间的镜像效应，避免因镜像干扰而导致错误匹配，确保每个旋转的方向与目标一致。\n                  - **实时反馈与调整**：每次旋转后，迅速评估进展并及时调整，明确每个物体的初始位置与旋转角度。\n                  - **预判与分解旋转步骤**：在每个复杂的旋转前，预判旋转后的效果，并将大的旋转任务分解成小步骤，避免一次性进行过多旋转，导致迷失。\n              \n              ### 交互与情感支持：\n              1. **策略反馈**：每次提供一条策略，如果玩家问“还有更多吗？”你可以继续提供下一条策略。最多提供两条策略后，进行鼓励并建议玩家去实践这些策略。例如：“快去试试看吧，期待你成功！”\n              \n              2. **字数限制**：每条策略的反馈应清晰，先谈策略再谈请安支持，不应超过150字。避免使用*好，以及一次性呈现过多信息，确保回答简洁易懂。\n              \n              ### 综合分析：\n              根据玩家提供的操作次数和游玩时间，进行综合分析，并在策略反馈时调整难度或提供情感支持。根据历史数据来优化每次的策略和反馈，避免重复策略，避免疲劳操作，提升玩家的体验。\n              \n              - **操作次数少，游玩时间短**：鼓励玩家继续，提示他们下一个关卡的挑战。\n                - 例如：“你已经很快通过了这一关，保持这种状态，挑战下一个关卡吧！”\n              \n              - **操作次数适中，游玩时间适中**：提醒玩家保持专注，同时也可以建议回顾之前的步骤，调整策略。\n                - 例如：“你已经花了不少时间，继续保持专注。如果卡住了，可以试试回顾之前的操作，看看能否找到更有效的策略。”\n              \n              - **操作次数多，游玩时间长**：分析玩家可能卡住了或疲劳，建议休息并回顾策略。\n                - 例如：“看起来你已经花费了很多时间，并进行很多操作，也许是时候休息一下，清晰地思考下一步。休息一下后，你会有更清晰的头脑去解决问题。”"}]}onLoad(){const t=h.currentLevelIndex;this.suitableButton&&this.suitableButton.node.on("click",(()=>this.onUserFeedback(`已通过${t+1} 关卡难度合适`)),this),this.difficultButton&&this.difficultButton.node.on("click",(()=>this.onUserFeedback(`已通过${t+1} 关卡感到困难`)),this),this.moreStrategiesButton&&(this.moreStrategiesButton.node.on("click",(()=>this.onMoreStrategies()),this),this.moreStrategiesButton.node.active=!1),this.iKnowButton&&(this.iKnowButton.node.active=!1,this.iKnowButton.node.on("click",(()=>this.logUserAction()),this)),this.npcNode&&this._startNPCJumpAnimation()}async onUserFeedback(t){if(!this.typewriterEffect)return;const e={role:"user",content:t};this.messages.push(e),this._hideButtonsWithAnimation([this.suitableButton.node,this.difficultButton.node]);try{await this.callLLMAPI(),-1!==t.indexOf("感到困难")?(this._showButtonWithAnimation(this.moreStrategiesButton.node),this._showButtonWithAnimation(this.iKnowButton.node)):-1!==t.indexOf("难度合适")&&this._showButtonWithAnimation(this.iKnowButton.node)}catch(t){console.error("Error:",t)}}async onMoreStrategies(){if(!this.typewriterEffect)return;const t={role:"user",content:`已通过${h.currentLevelIndex+1} 关卡已请求过策略，询问还有别的策略吗？`};this.messages.push(t),this._hideButtonsWithAnimation([this.moreStrategiesButton.node]);try{await this.callLLMAPI()}catch(t){console.error("Error:",t)}}async callLLMAPI(){const t=`${this.baseUrl}/v1/chat/completions`,e={model:"deepseek-chat",messages:this.messages,stream:!0},n={"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},i=await fetch(t,{method:"POST",headers:n,body:JSON.stringify(e)});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=i.body?.getReader();if(!o)throw new Error("Failed to get reader from response.");const s=new TextDecoder("utf-8");let r="";for(;;){const{done:t,value:e}=await o.read();if(t)break;const n=s.decode(e,{stream:!0}).split("\n");for(const t of n)if(""!==t.trim())try{const e=JSON.parse(t.replace(/^data: /,"")).choices[0].delta.content||"";r+=e,this.typewriterEffect&&this.typewriterEffect.appendText(e)}catch(e){console.warn("Failed to parse line:",t,e)}}const a={role:"assistant",content:r};this.messages.push(a)}_hideButtonsWithAnimation(t){t.forEach((t=>{c(t).to(.3,{scale:new l(0,0,0)},{easing:"backIn"}).call((()=>{t.active=!1})).start()}))}_showButtonWithAnimation(t){t.scale=new l(0,0,0),t.active=!0,c(t).to(.3,{scale:new l(1,1,1)},{easing:"backOut"}).start()}_startNPCJumpAnimation(){this.npcNode&&c(this.npcNode).repeatForever(c().by(.5,{position:new l(0,20,0)},{easing:"sineInOut"}).by(.5,{position:new l(0,-20,0)},{easing:"sineInOut"})).start()}async logUserAction(){const t=localStorage.getItem("currentUsername"),e=localStorage.getItem("sessionToken"),n=h.currentLevelIndex;if(!t||!e)return void console.error("No username or sessionToken found.");const i=new Date,o=new Date(i.getTime()+288e5).toISOString().replace("T"," ").slice(0,23),s={tableName:"interactai",data:{Usr_ID:t,Level:n,interaction:this.messages.slice(1),Timestep:o}};try{const t=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to log user action");const n=await t.json();console.log("User action logged successfully:",n)}catch(t){console.error("Error logging user action:",t)}}}).prototype,"suitableButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(B.prototype,"difficultButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(B.prototype,"moreStrategiesButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(B.prototype,"iKnowButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(B.prototype,"npcNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(B.prototype,"typewriterEffect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=B))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResMgr.ts","./Global2.ts","./AudioMgr.ts","./Main.ts","./LocalMgr.ts"],(function(e){var n,s,t,a,o,i,r,c,l,u,d,g,L;return{setters:[function(e){n=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){t=e.cclegacy,a=e.ProgressBar,o=e.Label,i=e._decorator,r=e.Component},function(e){c=e.ResMgr},function(e){l=e.AssetList,u=e.Global},function(e){d=e.AudioMgr},function(e){g=e.Main},function(e){L=e.LocalMgr}],execute:function(){var p,f,b,P,B,I,h;t._RF.push({},"38f71Kt7lVIsKrX7I2z7ubu","Loading",void 0);const{ccclass:M,property:m}=i;e("Loading",(p=M("Loading"),f=m(a),b=m(o),p((I=n((B=class extends r{constructor(...e){super(...e),s(this,"ProgressBar",I,this),s(this,"ProgressText",h,this)}start(){c.instance.LoadInit(),this.LoadRes(),L.instance.LocalInfo=L.instance.GetInfo(),L.instance.LocalInfo||(L.instance.LocalInfo=L.instance.TestInfo,L.instance.UpdateInfo())}async LoadRes(){await c.instance.LoadBundle(l.BundleName,.1),await c.instance.LoadRes(l.BundleName,l.Asset.Prefabs,.6),await c.instance.LoadRes(l.BundleName,l.Asset.Sounds,.2),await c.instance.LoadRes(l.BundleName,l.Asset.SpriteFrames,.1),d.instance.Init(),d.instance.PlayBgSound("bgsound"),g.instance.UpdateScene(l.Scene.LoginScene)}update(e){this.ProgressText.string="LOADING..."+Math.floor(100*u.LoadProgress).toString()+"%",this.ProgressBar.progress=u.LoadProgress}}).prototype,"ProgressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=n(B.prototype,"ProgressText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=B))||P));t._RF.pop()}}}));

System.register("chunks:///_virtual/LocalMgr.ts",["cc","./Global2.ts","./WxTools.ts"],(function(t){var c,a,o,s,n;return{setters:[function(t){c=t.cclegacy,a=t._decorator,o=t.Component},function(t){s=t.Global},function(t){n=t.WxTools}],execute:function(){var e,i;c._RF.push({},"edecchFVTRPhLnYMdTDrPT3","LocalMgr",void 0);const{ccclass:l,property:r}=a;t("LocalMgr",l("LocalMgr")(((i=class t extends o{constructor(...t){super(...t),this.LocalKey="mimijump0",this.LocalInfo={score:0,coin:0,catinfo:{cat0:1,cat1:2,cat2:3,cat3:4,cat4:5,cat5:6,cat6:7,cat7:8,cat8:9,cat9:10,cat10:11,cat11:12,cat12:13,cat13:14,cat14:15,cat15:16,cat16:17,cat17:18,cat18:19,cat19:20},lastchoose:0},this.TestInfo={score:0,coin:0,catinfo:{cat0:1,cat1:2,cat2:3,cat3:4,cat4:5,cat6:6,cat7:7,cat8:8,cat9:9,cat10:10},lastchoose:0}}static get instance(){return this._instance||(this._instance=new t),this._instance}UpdateInfo(){s.IsWx?n.SetStorage(this.LocalKey,JSON.stringify(this.LocalInfo)):localStorage.setItem(this.LocalKey,JSON.stringify(this.LocalInfo))}GetInfo(){return this.LocalInfo}UseCoin(t){this.LocalInfo.coin-=this.LocalInfo.catinfo[t],this.LocalInfo.catinfo[t]=0,this.UpdateInfo()}UpdateCat(t){this.LocalInfo.lastchoose=t,this.UpdateInfo()}GameOver(){this.LocalInfo.coin+=s.CoinNum,this.LocalInfo.score=Math.max(this.LocalInfo.score,Math.floor(s.ScoreNum)),this.UpdateInfo()}})._instance=null,e=i))||e);c._RF.pop()}}}));

System.register("chunks:///_virtual/LoginScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts","./AudioMgr.ts","./Main.ts","./LocalMgr.ts","./TopLoad.ts","./ShopBox.ts"],(function(e){var t,n,o,i,r,a,s,c,l,u,d,g,p,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Label,r=e.Node,a=e._decorator,s=e.Component,c=e.Camera},function(e){l=e.Global,u=e.AssetList},function(e){d=e.AudioMgr},function(e){g=e.Main},function(e){p=e.LocalMgr},function(e){h=e.TopLoad},function(e){m=e.ShopBox}],execute:function(){var f,S,C,b,B,y,x,L,N;o._RF.push({},"ecbc0otaEtEE6E1rjVDpR2k","LoginScene",void 0);const{ccclass:I,property:T}=a;e("LoginScene",(f=I("LoginScene"),S=T(i),C=T(i),b=T(r),f((x=t((y=class extends s{constructor(...e){super(...e),n(this,"ScoreText",x,this),n(this,"CoinText",L,this),n(this,"SoundButton",N,this)}start(){this.UpdateBest()}StartClick(){l.IsDebug&&console.log("开始游戏"),g.instance.UpdateScene(u.Scene.GameScene)}UpdateBest(){l.IsDebug&&console.log("本地信息",p.instance.GetInfo()),this.ScoreText.string=`${parseInt(localStorage.getItem("maxLevel"),10)}`,this.CoinText.string=p.instance.GetInfo().coin.toString()}ChooseClick(){h.instance.AddPop(u.Pop.ShopBox).getComponent(m).Cb=this.UpdateBest.bind(this)}async NoClick(){let e=h.instance.AddPop(u.Pop.Nobox);const t=await this.fetchLeaderboardData();t&&this.updateLeaderboardUI(e,t)}checkAllCameras(){const e=this.node.scene;this.findCamerasInNode(e)}findCamerasInNode(e){if(e.getComponent(c)&&"MainCamera"===e.name)return e.active=!1,void console.log("MainCamera has been deactivated.");e.children.forEach((e=>{this.findCamerasInNode(e)}))}SoundClick(){l.IsDebug&&console.log("点击播放音效"),d.instance.PlayButton(),d.instance.IsMute?d.instance.PlayBgSound("bgsound"):d.instance.StopBgSound(),this.SoundButton.getChildByName("MuteButton").active=d.instance.IsMute}async fetchLeaderboardData(){const e=localStorage.getItem("sessionToken");if(!e)return console.error("❌ Session token 未找到。请确保玩家已正确认证。"),null;try{const t=await fetch("http://124.71.181.62:3000/api/getTopPlayers",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("❌ 错误：无法获取排行榜数据");const n=await t.json();return n.success?(console.log("✅ 排行榜数据加载成功：",n.topPlayers),n.topPlayers):(console.error("❌ 无法加载排行榜数据：",n.message),null)}catch(e){return console.error("❌ 获取排行榜数据时发生错误：",e),null}}updateLeaderboardUI(e,t){const n=e.getChildByName("Box");if(!n)return void console.error("❌ 无法找到 Box 节点，请检查预制体结构");const o=n.getChildByName("Name"),r=n.getChildByName("Num"),a=n.getChildByName("Time");if(!o||!r||!a)return void console.error("❌ 无法找到排行榜的子节点 Name、Num 或 Time，请检查 Box 的子节点结构");const s=o.children,c=r.children,l=a.children;t.forEach(((e,t)=>{if(t<3){const n=s.find((e=>e.name===`Name-00${t+1}`)),o=c.find((e=>e.name===`Num-00${t+1}`)),r=l.find((e=>e.name===`Time-00${t+1}`));if(n&&o&&r){const t=n.getComponent(i),a=o.getComponent(i),s=r.getComponent(i);if(t&&(t.string=e.Usr_ID),a&&(a.string=e.maxLevel.toString()),s){const t=e.timestep.toString().replace("T"," ").split(".")[0].slice(5);s.string=t}}}}))}formatTime(e){try{const t=new Date(e),n=t.getHours(),o=t.getMinutes(),i=n<10?`0${n}`:n.toString();return`${i}:${o<10?`0${o}`:o.toString()}`}catch(t){return console.error("❌ 时间格式化失败:",t,e),""}}}).prototype,"ScoreText",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(y.prototype,"CoinText",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(y.prototype,"SoundButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=y))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/logo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,s,r,a,c,l,u,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Prefab,s=t._decorator,r=t.Component,a=t.Node,c=t.instantiate,l=t.Vec3,u=t.MeshRenderer,p=t.Color,h=t.Quat}],execute:function(){var f,d,b,g,_,P;i._RF.push({},"02f30WUBtVCHYqomk+zY7Sy","logo",void 0);const{ccclass:y,property:m}=s;t("PrefabRotatorUI",(f=y("PrefabRotatorUI"),d=m(o),f((_=e((g=class extends r{constructor(...t){super(...t),n(this,"rotatingPrefab",_,this),n(this,"speed",P,this),this._instance=null}start(){if(this.rotatingPrefab){const t=new a("DisplayNode");this._instance=c(this.rotatingPrefab),this._instance.setScale(.75,.75,.75),t.addChild(this._instance),this.node.addChild(t),this._instance.setPosition(new l(0,0,-21));const e=this._instance.getComponent(u);if(e){e.material.setProperty("albedo",new p(255,255,0,255))}const n=new h;h.fromEuler(n,35,0,35),this._instance.setRotation(n),console.log("旋转立方体初始化:",this._instance.getWorldPosition())}}update(t){if(this._instance){const e=new h;h.fromEuler(e,0,this.speed*t,0),this._instance.rotate(e)}}}).prototype,"rotatingPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(g.prototype,"speed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),b=g))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/LshapeController.ts",["cc"],(function(e){var t,i,o,n,s,r,a,l,d,h,c,p,m,g,C,u,w,T;return{setters:[function(e){t=e.cclegacy,i=e.Component,o=e.Quat,n=e.Vec3,s=e.systemEvent,r=e.SystemEvent,a=e.Collider,l=e.RigidBody,d=e.Material,h=e.Color,c=e.Node,p=e.MeshRenderer,m=e.primitives,g=e.utils,C=e.BoxCollider,u=e.KeyCode,w=e.misc,T=e._decorator}],execute:function(){var x;t._RF.push({},"916319fT3tECK94KDHZmHRU","LshapeController",void 0);const{ccclass:b}=T;e("RotateAndMoveLShapeOnKey",b("RotateAndMoveLShapeOnKey")(x=class extends i{constructor(...e){super(...e),this.isAnimating=!1,this.initialEulerAngles=void 0,this._lShapeNodes=[],this.combinedBoxCollider=null,this.startRotation=new o,this.endRotation=new o,this.startPosition=new n,this.endPosition=new n,this.currentLerpTime=0,this.totalLerpTime=.5}start(){s.on(r.EventType.KEY_DOWN,this.onKeyDown,this);let e=this.getComponent(a);e&&(e.on("onTriggerEnter",this.onTriggerEnter,this),e.on("onTriggerExit",this.onTriggerExit,this)),this.createLShape(),this.placeCubeAboveTile(0,0),this.initialEulerAngles=this.node.eulerAngles.clone()}createLShape(){const e=this.node.addComponent(l);e.type=l.Type.DYNAMIC,e.mass=1,e.linearDamping=.1,e.angularDamping=.1,e.useGravity=!0,e.allowSleep=!1,e.linearFactor=new n(0,1,0),e.angularFactor=new n(0,0,0);const t=[new n(0,0,0),new n(1,0,0),new n(2,0,0),new n(0,1,0)],i=new d;i.initialize({effectName:"builtin-standard"}),i.setProperty("mainColor",new h(255,255,255,255)),t.forEach(((e,t)=>{const o=new c(`Cube${t+1}`);o.setPosition(e);const n=o.addComponent(p),s=m.box(),r=g.createMesh(s);n.mesh=r,n.material=i,this.node.addChild(o),this._lShapeNodes.push(o),console.log(`Created ${o.name} at position ${e.toString()}`)})),this.combinedBoxCollider=this.node.addComponent(C),this.updateCombinedBoxCollider(),this.combinedBoxCollider.enabled=!0}updateCombinedBoxCollider(){if(!this.combinedBoxCollider)return;let e=1/0,t=1/0,i=1/0,o=-1/0,s=-1/0,r=-1/0;this._lShapeNodes.forEach((n=>{const a=n.position;a.x<e&&(e=a.x),a.y<t&&(t=a.y),a.z<i&&(i=a.z),a.x>o&&(o=a.x),a.y>s&&(s=a.y),a.z>r&&(r=a.z)}));const a=o-e+1,l=r-i+1;this.combinedBoxCollider.size=new n(a,1,l),this.combinedBoxCollider.center=new n((e+o)/2,0,(i+r)/2),console.log(`Updated BoxCollider size to: ${this.combinedBoxCollider.size.toString()}, center to: ${this.combinedBoxCollider.center.toString()}`)}onKeyDown(e){if(!this.isAnimating)switch(e.keyCode){case u.KEY_A:this.rotateLShape(new n(0,0,1),new n(-1,0,0));break;case u.KEY_D:this.rotateLShape(new n(0,0,-1),new n(1,0,0));break;case u.KEY_W:this.rotateLShape(new n(-1,0,0),new n(0,0,-1));break;case u.KEY_S:this.rotateLShape(new n(1,0,0),new n(0,0,1))}}rotateLShape(e,t){const i=this.node.getComponent(l);i&&(i.type=l.Type.STATIC),this.combinedBoxCollider&&(this.combinedBoxCollider.enabled=!1),this.startPosition.set(this.node.position),this.startRotation.set(this.node.rotation),n.add(this.endPosition,this.startPosition,t);let s=w.degreesToRadians(90);o.rotateAround(this.endRotation,this.startRotation,e,s),o.normalize(this.endRotation,this.endRotation),this.checkIfValidRotation(this.endPosition,this.endRotation)?(this.currentLerpTime=0,this.isAnimating=!0):(console.log("Invalid rotation detected"),i&&(i.type=l.Type.DYNAMIC),this.combinedBoxCollider&&(this.combinedBoxCollider.enabled=!0))}update(e){if(this.isAnimating){this.currentLerpTime+=e,this.currentLerpTime>this.totalLerpTime&&(this.currentLerpTime=this.totalLerpTime);let t=this.currentLerpTime/this.totalLerpTime,i=o.slerp(new o,this.startRotation,this.endRotation,t);this.node.setRotation(i);let s=n.lerp(new n,this.startPosition,this.endPosition,t);if(this.node.setPosition(s),t>=1){const e=this.node.getComponent(l);e&&(e.type=l.Type.DYNAMIC),this.combinedBoxCollider&&(this.combinedBoxCollider.enabled=!0),this.isAnimating=!1}}}onTriggerEnter(e){console.log(`${e.otherCollider.node.name} entered the trigger`)}onTriggerExit(e){console.log(`${e.otherCollider.node.name} exited the trigger`)}placeCubeAboveTile(e,t){this.node.setPosition(new n(e,10,t))}onDestroy(){let e=this.getComponent(a);e&&(e.off("onTriggerEnter",this.onTriggerEnter,this),e.off("onTriggerExit",this.onTriggerExit,this)),s.off(r.EventType.KEY_DOWN,this.onKeyDown,this)}checkIfValidRotation(e,t){for(let i of this._lShapeNodes){let o=i.position.clone(),s=new n;if(n.transformQuat(s,o,t),s.add(e),console.log(`Node ${i.name} rotated position: ${s.toString()}`),s.y<-1e-4)return console.log(`Invalid position detected for node ${i.name}: ${s.toString()}`),!1}return!0}})||x);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Loading.ts","./BgLoad.ts","./Global2.ts","./Main.ts","./ElementLoad.ts","./GameScene.ts","./Mimi.ts","./Step.ts","./StepLoad.ts","./LoginScene.ts","./AdMgr.ts","./AudioMgr.ts","./LocalMgr.ts","./ResMgr.ts","./WxAdMgr.ts","./Stop.ts","./TweenTools.ts","./WxTools.ts","./AdBox.ts","./EndBox.ts","./ShopBox.ts","./SingleInfo.ts","./TopLoad.ts","./ChangeCamera.ts","./Controller.ts","./Cubes.ts","./EstablishFloor.ts","./Levels.ts","./MathUtil.ts","./Mesh.ts","./RotateUtil.ts","./RoundRect2.ts","./Sample_Cursor.ts","./UI.ts","./Vec3Util.ts","./LLM.ts","./Finger.ts","./Finger_Fourth.ts","./Finger_Third.ts","./Finger_second.ts","./Show.ts","./Show_Finish.ts","./StartLab.ts","./startNPC.ts","./typer.ts","./video.ts","./WebViewController.ts","./Global.ts","./SurfacePlace.ts","./boxmovecontroller.ts","./ChessboardGenerator.ts","./ClickCount.ts","./Cubeflip.ts","./FlipCubeOnSurface.ts","./LevelController.ts","./LshapeController.ts","./NoBoard.ts","./PlaneWithHole.ts","./RubiksCube.ts","./TorusHit.ts","./ballmove.ts","./logo.ts","./unfoldplay.ts","./one.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["cc","./ResMgr.ts","./Global2.ts"],(function(n){var e,t,s,o,c,i;return{setters:[function(n){e=n.cclegacy,t=n._decorator,s=n.Component,o=n.instantiate},function(n){c=n.ResMgr},function(n){i=n.Global}],execute:function(){var a,l;e._RF.push({},"2c2ad1mV2ZBgZq5Uc8JXvtC","Main",void 0);const{ccclass:r,property:d}=t;n("Main",r("Main")(((l=class n extends s{onLoad(){n.instance=this}UpdateScene(n){if(i.IsDebug&&console.log("更新游戏场景",n),console.log(this.node.name),this.node.children.length>0)for(let n=0;n<this.node.children.length;n++)this.node.children[n].destroy();this.node.addChild(o(c.instance.Prefabs[n]))}}).instance=null,a=l))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"9775dMVM9lHQoUCBA1lLy2Y","MathUtil",void 0);class a{static sign(t){return t>0?1:t<0?-1:0}static progress(t,r,a){return t+(r-t)*a}static lerp(t,r,a){return a>1?a=1:a<0&&(a=0),t*(1-a)+r*a}static lerpAngle(t,r,e){var s=(r%=360)-(t%=360);return s>180?r=t-(360-s):s<-180&&(r=t+(360+s)),(a.lerp(t,r,e)%360+360)%360}static angleTowards(t,r,a){var e=(r%=360)-(t%=360);e>180?r=t-(360-e):e<-180&&(r=t+(360+e));var s=r-t;return a>Math.abs(s)?r:((t+a*Math.sign(s))%360+360)%360}static clamp(t,r,a){return t<r?r:t>a?a:t}static probability(t){return Math.random()<t}}t("MathUtil",a),a.deg2Rad=Math.PI/180,a.rad2Deg=180/Math.PI,r._RF.pop()}}}));

System.register("chunks:///_virtual/Mesh.ts",["cc"],(function(e){var s,t,n;return{setters:[function(e){s=e.cclegacy,t=e.Vec3,n=e.utils}],execute:function(){s._RF.push({},"16023dwO0tLWIxCSsPaKVyM","Mesh",void 0);const i=new t(3,2,4).multiplyScalar(.5),c=new t(-i.x,-i.y,-i.z),u=new t(i.x,i.y,i.z),o=Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z);e("CubeMesh",n.MeshUtils.createMesh({positions:[1.5,.7,1.7,1.4121320343559642,.7,1.9121320343559642,1.2,.7,2,1.4121320343559642,.9121320343559642,1.7,1.35,.9121320343559642,1.8499999999999999,1.2,.9121320343559642,1.9121320343559642,1.2,1,1.7,1.5,.7,-1.7,1.4121320343559642,.7,-1.9121320343559642,1.2,.7,-2,1.4121320343559642,.9121320343559642,-1.7,1.35,.9121320343559642,-1.8499999999999999,1.2,.9121320343559642,-1.9121320343559642,1.2,1,-1.7,-1.5,.7,-1.7,-1.4121320343559642,.7,-1.9121320343559642,-1.2,.7,-2,-1.4121320343559642,.9121320343559642,-1.7,-1.35,.9121320343559642,-1.8499999999999999,-1.2,.9121320343559642,-1.9121320343559642,-1.2,1,-1.7,-1.5,.7,1.7,-1.4121320343559642,.7,1.9121320343559642,-1.2,.7,2,-1.4121320343559642,.9121320343559642,1.7,-1.35,.9121320343559642,1.8499999999999999,-1.2,.9121320343559642,1.9121320343559642,-1.2,1,1.7,1.5,-.7,1.7,1.4121320343559642,-.7,1.9121320343559642,1.2,-.7,2,1.4121320343559642,-.9121320343559642,1.7,1.35,-.9121320343559642,1.8499999999999999,1.2,-.9121320343559642,1.9121320343559642,1.2,-1,1.7,1.5,-.7,-1.7,1.4121320343559642,-.7,-1.9121320343559642,1.2,-.7,-2,1.4121320343559642,-.9121320343559642,-1.7,1.35,-.9121320343559642,-1.8499999999999999,1.2,-.9121320343559642,-1.9121320343559642,1.2,-1,-1.7,-1.5,-.7,-1.7,-1.4121320343559642,-.7,-1.9121320343559642,-1.2,-.7,-2,-1.4121320343559642,-.9121320343559642,-1.7,-1.35,-.9121320343559642,-1.8499999999999999,-1.2,-.9121320343559642,-1.9121320343559642,-1.2,-1,-1.7,-1.5,-.7,1.7,-1.4121320343559642,-.7,1.9121320343559642,-1.2,-.7,2,-1.4121320343559642,-.9121320343559642,1.7,-1.35,-.9121320343559642,1.8499999999999999,-1.2,-.9121320343559642,1.9121320343559642,-1.2,-1,1.7,-1.2,1,-1.7,-1.2,1,1.7,1.2,1,1.7,1.2,1,-1.7,1.2,-1,1.7,1.2,-1,-1.7,-1.2,-1,-1.7,-1.2,-1,1.7,1.5,.7,1.7,1.5,.7,-1.7,1.5,-.7,1.7,1.5,-.7,-1.7,-1.5,.7,-1.7,-1.5,.7,1.7,-1.5,-.7,-1.7,-1.5,-.7,1.7,1.2,.7,2,-1.2,.7,2,1.2,-.7,2,-1.2,-.7,2,1.2,.7,-2,-1.2,.7,-2,1.2,-.7,-2,-1.2,-.7,-2],normals:[1,0,0,.7071067811865476,0,.7071067811865475,0,0,1,.7071067811865476,.7071067811865475,0,.5000000000000001,.7071067811865475,.5,4329780281177467e-32,.7071067811865475,.7071067811865476,0,1,0,1,0,0,.7071067811865476,0,-.7071067811865475,0,0,-1,.7071067811865476,.7071067811865475,0,.5000000000000001,.7071067811865475,-.5,4329780281177467e-32,.7071067811865475,-.7071067811865476,0,1,0,-1,0,0,-.7071067811865476,0,-.7071067811865475,-0,0,-1,-.7071067811865476,.7071067811865475,0,-.5000000000000001,.7071067811865475,-.5,-4329780281177467e-32,.7071067811865475,-.7071067811865476,0,1,0,-1,0,0,-.7071067811865476,0,.7071067811865475,-0,0,1,-.7071067811865476,.7071067811865475,0,-.5000000000000001,.7071067811865475,.5,-4329780281177467e-32,.7071067811865475,.7071067811865476,0,1,0,1,0,0,.7071067811865476,0,.7071067811865475,0,0,1,.7071067811865476,-.7071067811865475,0,.5000000000000001,-.7071067811865475,.5,4329780281177467e-32,-.7071067811865475,.7071067811865476,0,-1,0,1,0,0,.7071067811865476,0,-.7071067811865475,0,0,-1,.7071067811865476,-.7071067811865475,0,.5000000000000001,-.7071067811865475,-.5,4329780281177467e-32,-.7071067811865475,-.7071067811865476,0,-1,0,-1,0,0,-.7071067811865476,0,-.7071067811865475,-0,0,-1,-.7071067811865476,-.7071067811865475,0,-.5000000000000001,-.7071067811865475,-.5,-4329780281177467e-32,-.7071067811865475,-.7071067811865476,0,-1,0,-1,0,0,-.7071067811865476,0,.7071067811865475,-0,0,1,-.7071067811865476,-.7071067811865475,0,-.5000000000000001,-.7071067811865475,.5,-4329780281177467e-32,-.7071067811865475,.7071067811865476,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,1,-0,0,1,0,0,1,-0,0,1,0,0,-1,-0,0,-1,0,0,-1,-0,0,-1],uvs:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[56,57,58,56,58,59,60,62,61,60,63,62,64,66,65,65,66,67,68,70,69,69,70,71,72,73,74,73,75,74,76,78,77,77,78,79,0,3,1,1,3,4,1,4,2,2,4,5,3,6,4,4,6,5,7,8,10,8,11,10,8,9,11,9,12,11,10,11,13,11,12,13,14,17,15,15,17,18,15,18,16,16,18,19,17,20,18,18,20,19,21,22,24,22,25,24,22,23,25,23,26,25,24,25,27,25,26,27,28,29,31,29,32,31,29,30,32,30,33,32,31,32,34,32,33,34,35,38,36,36,38,39,36,39,37,37,39,40,38,41,39,39,41,40,42,43,45,43,46,45,43,44,46,44,47,46,45,46,48,46,47,48,49,52,50,50,52,53,50,53,51,51,53,54,52,55,53,53,55,54,0,1,28,1,29,28,1,2,29,2,30,29,7,35,8,8,35,36,8,36,9,9,36,37,14,15,42,15,43,42,15,16,43,16,44,43,21,49,22,22,49,50,22,50,23,23,50,51,2,5,23,5,26,23,5,6,26,6,27,26,9,16,12,12,16,19,12,19,13,13,19,20,30,51,33,33,51,54,33,54,34,34,54,55,37,40,44,40,47,44,40,41,47,41,48,47,0,7,3,3,7,10,3,10,6,6,10,13,14,21,17,17,21,24,17,24,20,20,24,27,28,31,35,31,38,35,31,34,38,34,41,38,42,45,49,45,52,49,45,48,52,48,55,52],minPos:c,maxPos:u,boundingRadius:o}));s._RF.pop()}}}));

System.register("chunks:///_virtual/Mimi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StepLoad.ts","./Step.ts","./Global2.ts","./GameScene.ts","./ElementLoad.ts","./AudioMgr.ts","./ResMgr.ts","./LocalMgr.ts"],(function(t){var e,i,o,n,s,a,h,r,l,c,p,d,m,y,g,u,C,M,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.Node,s=t._decorator,a=t.Component,h=t.Sprite,r=t.UITransform,l=t.Vec3,c=t.Animation},function(t){p=t.StepLoad},function(t){d=t.Step},function(t){m=t.Global,y=t.PropList},function(t){g=t.GameScene},function(t){u=t.ElementLoad},function(t){C=t.AudioMgr},function(t){M=t.ResMgr},function(t){f=t.LocalMgr}],execute:function(){var S,b,P,V,L,v,x,E,G,W,w;o._RF.push({},"b5421EUygJMn4SMEcqHaZT+","Mimi",void 0);const{ccclass:A,property:H}=s;t("Mimi",(S=A("Mimi"),b=H(n),P=H(n),V=H(n),L=H(n),S((E=e((x=class extends a{constructor(...t){super(...t),i(this,"Cat",E,this),this.Vy=40,this.AddVy=-.5,this.JumpVy=20,this.Vx=0,this.MyWidth=0,this.MyHeight=0,i(this,"StepLoad",G,this),i(this,"GameScene",W,this),i(this,"ElementLaod",w,this)}start(){this.Cat.getComponent(h).spriteFrame=M.instance.SpriteFrames["cathead"+f.instance.LocalInfo.lastchoose.toString()],this.MyWidth=this.Cat.getComponent(r).width,this.MyHeight=this.Cat.getComponent(r).height}IamSave(){this.node.setPosition(new l(0,0)),this.Vy=40}ImaMove(t){this.Vx=t}update(t){if(m.IsGameOver)return;let e=this.node.getPosition().add(new l(this.Vx,this.Vy));this.Vy+=this.AddVy;let i=375-this.MyWidth/2;e.x<-i?e.x=-i:e.x>i&&(e.x=i),e.y>0&&(e.y=0,this.StepLoad.getComponent(p).StepMove(-this.Vy)),this.node.setPosition(e),this.CheckStep(),this.node.getPosition().y<m.GameBottom&&(C.instance.PlayEffect("ao","click"),this.GameScene.getComponent(g).GameOver())}CheckStep(){let t=this.node.getPosition(),e=this.node.getWorldPosition();for(let i of this.StepLoad.getComponent(p).StepArray){Math.abs(t.x-i.getPosition().x)<=i.getComponent(d).MyWidth/2&&Math.abs(t.y-i.getPosition().y)<=(this.MyHeight+i.getComponent(d).MyHeight)/2&&i.position.y<t.y&&i.active&&this.Vy<0&&(this.node.getChildByName("Cat").getComponent(c).play(),this.Vy=this.JumpVy,i.getComponent(d).PlayAnimation(),C.instance.PlayEffect("dagn","click"));let o=i.getChildByName("Step").getChildByName("Prop");if(Math.abs(e.x-o.getWorldPosition().x)<=(this.MyHeight+i.getComponent(d).PropWidth)/2&&Math.abs(e.y-o.getWorldPosition().y)<=(this.MyHeight+i.getComponent(d).PropWidth)/2&&o.active)switch(o.active=!1,i.getComponent(d).PropType){case y.Coin:this.ElementLaod.getComponent(u).AddCoin(1),C.instance.PlayCoin();break;case y.Boom:this.Vy<0?this.ElementLaod.getComponent(u).BleedReduce():o.active=!0;break;case y.Speed:this.Vy=2*this.JumpVy}}}}).prototype,"Cat",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(x.prototype,"StepLoad",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(x.prototype,"GameScene",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(x.prototype,"ElementLaod",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=x))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/NoBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,o,a,t,n,s,i,d,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){a=e.cclegacy,t=e.Prefab,n=e.Node,s=e._decorator,i=e.Component,d=e.instantiate,l=e.Label}],execute:function(){var c,h,u,b,f,p,g;a._RF.push({},"c703cZs9H9D57sgQb1z112K","NoBoard",void 0);const{ccclass:m,property:N}=s;e("LeaderboardManager",(c=m("LeaderboardManager"),h=N(t),u=N(n),c((p=r((f=class extends i{constructor(...e){super(...e),o(this,"leaderboardPrefab",p,this),o(this,"canvas",g,this),this.leaderboardNode=null}async showLeaderboard(){if(this.leaderboardNode)console.log("排行榜已显示");else if(this.leaderboardPrefab){this.leaderboardNode=d(this.leaderboardPrefab),this.canvas.addChild(this.leaderboardNode);const e=this.leaderboardNode.getChildByName("Name"),r=this.leaderboardNode.getChildByName("Num"),o=this.leaderboardNode.getChildByName("Time");if(!e||!r||!o)return void console.error("❌ 无法找到排行榜子节点，请检查预制体结构");const a=await this.fetchLeaderboardData();a&&this.updateLeaderboardUI(a,e,r,o)}else console.error("未绑定排行榜预制体")}hideLeaderboard(){this.leaderboardNode&&(this.leaderboardNode.destroy(),this.leaderboardNode=null)}async fetchLeaderboardData(){const e=localStorage.getItem("sessionToken");if(!e)return console.error("❌ Session token 未找到。请确保玩家已正确认证。"),null;try{const r=await fetch("http://124.71.181.62:3000/api/getTopPlayers",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error("❌ 错误：无法获取排行榜数据");const o=await r.json();return o.success?(console.log("✅ 排行榜数据加载成功：",o.topPlayers),o.topPlayers):(console.error("❌ 无法加载排行榜数据：",o.message),null)}catch(e){return console.error("❌ 获取排行榜数据时发生错误：",e),null}}updateLeaderboardUI(e,r,o,a){const t=r.children,n=o.children,s=a.children;e.forEach(((e,r)=>{if(r<3){const o=t.find((e=>e.name===`Name-00${r+1}`)),a=n.find((e=>e.name===`Num-00${r+1}`)),i=s.find((e=>e.name===`Time-00${r+1}`));if(o&&a&&i){const r=o.getComponent(l),t=a.getComponent(l),n=i.getComponent(l);r&&(r.string=e.Usr_ID),t&&(t.string=e.maxLevel.toString()),n&&(n.string=e.timestep)}}}))}}).prototype,"leaderboardPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=r(f.prototype,"canvas",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/one.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,t,n,r,s,a,i,l,c,u,p;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.EditBox,s=e._decorator,a=e.Component,i=e.director,l=e.Director,c=e.assetManager,u=e.view,p=e.ResolutionPolicy}],execute:function(){var g,d,m,h,f,I,S;n._RF.push({},"7283329ftRNsY80Jx4MYFBY","one",void 0);const{ccclass:y,property:L}=s;e("LoginController",(g=y("LoginController"),d=L(r),m=L(r),g((I=o((f=class extends a{constructor(...e){super(...e),t(this,"usernameInput",I,this),t(this,"passwordInput",S,this)}onLoginButtonClicked(){const e=this.usernameInput.string,o=this.passwordInput.string;e&&o?this.login(e,o):console.error("Username or password cannot be empty!")}onDestroy(){i.off(l.EVENT_AFTER_SCENE_LAUNCH,this.adjustCanvasResolution,this),console.log("LoginController 已销毁，所有资源已清理。")}async login(e,o){try{const t=await fetch("http://124.71.181.62:3000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:o})});if(!t.ok)throw new Error("Network response was not ok");const n=await t.json();if(n.success){console.log("Login successful!"),localStorage.setItem("sessionToken",n.token),localStorage.setItem("currentUsername",e),localStorage.setItem("maxLevel",n.maxLevel),localStorage.setItem("isAI",n.AI),console.log(localStorage.getItem("isAI"));const o=await this.fetchMaxLevel()+1;localStorage.setItem("maxLevel",o.toString()),this.loadGameScene()}else console.error("Login failed:",n.message)}catch(e){console.error("Error during login:",e)}}loadGameScene(){c.loadBundle("resources",((e,o)=>{e?console.error("Failed to load bundle:",e):i.loadScene("Scene")})),i.on(l.EVENT_AFTER_SCENE_LAUNCH,this.adjustCanvasResolution,this)}adjustCanvasResolution(){u.setDesignResolutionSize(720,1280,p.FIXED_WIDTH)}start(){}update(e){}async fetchMaxLevel(){try{const e=localStorage.getItem("currentUsername"),o=localStorage.getItem("sessionToken"),t=await fetch(`http://124.71.181.62:3000/api/getMaxLevel?Usr_ID=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}}),n=await t.json();return t.ok&&n.success?n.maxLevel||0:(console.error("Failed to fetch maxLevel:",n.message),0)}catch(e){return console.error("Error fetching maxLevel:",e),0}}}).prototype,"usernameInput",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=o(f.prototype,"passwordInput",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlaneWithHole.ts",["cc"],(function(e){var t,n,o,i,s,a,l,r,c,d,h,p,m,u;return{setters:[function(e){t=e.cclegacy,n=e.Component,o=e.PhysicsSystem,i=e.Vec3,s=e.Material,a=e.Color,l=e.Node,r=e.MeshRenderer,c=e.primitives,d=e.utils,h=e.BoxCollider,p=e.RigidBody,m=e.ERigidBodyType,u=e._decorator}],execute:function(){var y;t._RF.push({},"8ed7bMqnXpHL5y7B6m6yxYl","PlaneWithHole",void 0);const{ccclass:w,property:C}=u;e("PlaneWithHole",w("PlaneWithHole")(y=class extends n{start(){this.createPlaneWithHole(),o.instance.enable=!0}createPlaneWithHole(){const e=[new i(0,-3,1),new i(0,-2,1),new i(0,-1,1),new i(1,-3,1),new i(1,-2,1),new i(1,-1,1)],t=new s;t.initialize({effectName:"builtin-standard"}),t.setProperty("mainColor",new a(100,100,100,255));for(let n=-3;n<0;n++)for(let o=-5;o<7;o++)for(let s=-5;s<7;s++){const a=new i(s,n,o);if(!e.some((e=>e.equals(a)))){const e=new l(`Cube_${n}_${o}_${s}`);e.setPosition(a);const i=e.addComponent(r),u=c.box(),y=d.createMesh(u);i.mesh=y,i.material=t;e.addComponent(h).isTrigger=!1;e.addComponent(p).type=m.STATIC,this.node.addChild(e)}}}})||y);t._RF.pop()}}}));

System.register("chunks:///_virtual/ResMgr.ts",["cc","./Global2.ts"],(function(e){var s,o,r,t,n,a,i,l;return{setters:[function(e){s=e.cclegacy,o=e._decorator,r=e.assetManager,t=e.Prefab,n=e.SpriteFrame,a=e.JsonAsset,i=e.AudioClip},function(e){l=e.Global}],execute:function(){var c,g;s._RF.push({},"16426TgbThJY4iTCSR4tiSX","ResMgr",void 0);const{ccclass:u,property:d}=o;e("ResMgr",u("ResMgr")(((g=class e{constructor(){this.isResourcesLoaded=!1,this.Bundles={},this.Prefabs={},this.SpriteFrames={},this.Audio={},this.NowProgress=0}static get instance(){return this._instance||(this._instance=new e),this._instance}async LoadBundle(e,s=0){return new Promise(((o,t)=>{r.loadBundle(e,((r,t)=>{l.IsDebug&&console.log(e+"包加载包完成",r,t),this.Bundles[e]=t,l.LoadProgress+=s,this.NowProgress=l.LoadProgress,o&&o()}))}))}async LoadRes(e,s,o=0){return new Promise(((c,g)=>{r.loadBundle("resources",((r,u)=>{if(r)return console.error("加载game包失败:",r),void(g&&g(r));this.Bundles[e].loadDir(s.path,s.type,((e,s)=>{l.LoadProgress=o*(e/s)+this.NowProgress}),((o,r)=>{if(o)return console.error("加载资源时出错:",o),void(g&&g(o));let u;if(l.IsDebug&&console.log("加载完成",r,e),this.NowProgress=l.LoadProgress,console.warn("当前包资源",this.NowProgress,s),s.type==t)for(let e=0;e<r.length;e++)u=r[e],this.Prefabs[u.data.name]=u,l.IsDebug&&console.log("prefab name==",u.data.name);else if(s.type==n)for(let e=0;e<r.length;e++)u=r[e],this.SpriteFrames[u.name]=u,l.IsDebug&&console.log("spriteframe name==",u.name);else if(s.type==a)l.IsDebug&&console.log(r,"Json",r[0].json);else if(s.type==i)for(let e=0;e<r.length;e++)u=r[e],this.Audio[u.name]=u,l.IsDebug&&console.log("audioclip name==",u.name);c&&c()}))}))}))}LoadInit(){this.NowProgress=0,l.LoadProgress=0}})._instance=null,c=g))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/RotateUtil.ts",["cc","./Vec3Util.ts"],(function(t){var o,a,r,e,n;return{setters:[function(t){o=t.cclegacy,a=t.Quat,r=t.Vec3,e=t.toRadian},function(t){n=t.Vec3Util}],execute:function(){o._RF.push({},"f3d53nsR7NPVabCNI1umvxz","RotateUtil",void 0);t("RotateUtil",class{static rotateAround(t,o,r){var e=new a;a.rotateAround(e,t.getRotation(),o.normalize(),r),t.setRotation(e)}static rotateAroundTarget(t,o,e,n){var i=t.worldPosition,s=o.worldPosition,c=new a,l=new r;a.fromAxisAngle(c,e,n),r.subtract(l,s,i),r.transformQuat(l,l,c),r.add(l,i,l),o.setWorldPosition(l),a.rotateAround(c,o.worldRotation,e,n),a.normalize(c,c),o.setWorldRotation(c)}static circularEdgePosition(t,o,i){let s=n.z.multiplyScalar(o),c=n.sub(s,t),l=new r;var u=new a;return a.fromAxisAngle(u,r.UP,e(i)),r.transformQuat(l,c,u),r.add(l,t,l),l}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/RoundRect2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,s,o,r,n,h,p,a,u,c,d,l,_,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.CCInteger,r=t.CCFloat,n=t._decorator,h=t.Component,p=t.Node,a=t.MeshRenderer,u=t.Mesh,c=t.Material,d=t.utils,l=t.Vec3,_=t.math,y=t.Color}],execute:function(){var m,f,g,w,b,P,v,R,L,z,W,I,C,O,E,S,D,U,M,N,x,V,j,A,G,H,F,Z,T,k,X,B,J,Y,q,K,Q,$,tt,it,et,st,ot,rt,nt,ht,pt,at,ut;s._RF.push({},"807e2ylBIJDSoIIfZC5LfbL","RoundRect",void 0);const{ccclass:ct,property:dt,executeInEditMode:lt}=n;let _t=t("RoundRect",(m=ct("RoundRect"),f=lt(!0),g=dt({displayName:"手动初始化",tooltip:"在编辑器中, 如果没有生成网格, 则手动点一下",visible:function(){return!this._mr}}),w=dt({displayName:"[只读]多边形数量",tooltip:"显示创建网格的三角面的数量",visible:function(){return!!this._geometry?.indices16}}),b=dt(),P=dt({displayName:"调试模式",tooltip:"在编辑器面板显示内部数据"}),v=dt(),R=dt({displayName:"UI模式",tooltip:"设置为UI模式之后, 网格将会竖放, 同时矩形宽高由UITransfrom的Size调整\n* 编辑器时, 组件会自动判断节点是否UI, 此选项仅供必要时手动设置"}),L=dt(),z=dt({displayName:"颜色"}),W=dt(),I=dt({displayName:"是否显示线段",tooltip:"不选中的话, 则仅显示4个角"}),C=dt(),O=dt({displayName:"是否圆角",tooltip:"切换圆角和直角\n* 切换成直角时, `圆角半径`和`圆角步长`将会失效"}),E=dt(o),S=dt({type:o,displayName:"圆角步长",tooltip:"步长越大, 圆角越圆滑, 网格面数越多\n* 此数值必须大于0\n* 此数值必须小于40",slide:!0,step:1,range:[1,40],visible:function(){return this._hasRound}}),D=dt({type:r,displayName:"[只读]实际半径",readonly:!0,serializable:!1,visible:function(){return _t._showEditor}}),U=dt(r),M=dt({type:r,displayName:"圆角半径",tooltip:"圆角半径越大, 圆角占用的面积越大\n* 此数值必须大于0\n* 矩形尺寸过小时, 圆角半径会自适应",visible:function(){return this._hasRound}}),N=dt({type:r,displayName:"[只读]外部线宽",readonly:!0,serializable:!1,visible:function(){return _t._showEditor}}),x=dt({type:r,displayName:"[只读]内部线宽",readonly:!0,serializable:!1,visible:function(){return _t._showEditor}}),V=dt(r),j=dt({type:r,displayName:"线宽",tooltip:"线宽越大, 矩形线框的宽度越大\n* 此数值必须大于0"}),A=dt(r),G=dt({type:r,displayName:"内外偏移",tooltip:"调整线宽时的方向和比例\n0: 内侧, 0.5: 居中, 1: 外侧",slide:!0,step:.01,range:[0,1]}),H=dt(r),F=dt({type:r,displayName:"矩形宽度",tooltip:"矩形在X轴向的长度\n* 此数值必须大于0",visible:function(){return!this._isUI}}),Z=dt(r),T=dt({type:r,displayName:"矩形深度",tooltip:"矩形在Z轴向的长度\n* 此数值必须大于0",visible:function(){return!this._isUI}}),k=dt(r),X=dt({type:r,displayName:"整体高度",tooltip:"矩形在Y轴向的位置",visible:function(){return!this._isUI}}),m(B=f(((ut=class t extends h{constructor(...t){super(...t),e(this,"_",Y,this),e(this,"_isUI",q,this),e(this,"_color",K,this),e(this,"_showLine",Q,this),e(this,"_hasRound",$,this),e(this,"_roundStep",tt,this),e(this,"_realRound",it,this),e(this,"_round",et,this),e(this,"_outerLineWidth",st,this),e(this,"_innerLineWidth",ot,this),e(this,"_lineWidth",rt,this),e(this,"_anchor",nt,this),e(this,"_width",ht,this),e(this,"_height",pt,this),e(this,"_y",at,this),this.dirty=yt.none,this._mr=void 0,this._mesh=void 0,this._geometry=void 0,this._options=void 0,this._tools=void 0,this._conners=void 0,this._lines=void 0,this._pPool=void 0,this._mats=void 0}__checkPreset_inEditor(){}__setPreset_inEditor(){const i=t.uipreset;for(const t in i)this[t]=i[t]}get draw(){return!0}set draw(t){this.init()}get triCount(){return this._geometry?.indices16?.length/3}get showEditor(){return t._showEditor}set showEditor(i){t._showEditor=i}get isUI(){return this._isUI}set isUI(t){this._isUI!==t&&(this._isUI=t,this._listenWH(t),this.dirty|=yt.gmyPos)}get color(){return this._color}set color(t){this._color.set(t),this._mr.sharedMaterial.setProperty("mainColor",t,0)}get showLine(){return this._showLine}set showLine(t){this._showLine!==t&&(this._showLine=t,this.dirty|=yt.count)}get hasRound(){return this._hasRound}set hasRound(t){this._hasRound!==t&&(this._hasRound=t,this.dirty|=yt.count)}get roundStep(){return this._roundStep}set roundStep(t){t<0&&(t=0),t>40&&(t=40),this._roundStep!==t&&(this._roundStep=t,this.dirty|=yt.count)}get round(){return this._round}set round(t){t<0&&(t=0),this._round!==t&&(this._round=t,this.dirty|=yt.sharp)}get lineWidth(){return this._lineWidth}set lineWidth(t){t<0&&(t=0),this._lineWidth!==t&&(this._lineWidth=t,this.dirty|=yt.sharp)}get anchor(){return this._anchor}set anchor(t){t<0&&(t=0),t>1&&(t=1),this._anchor!==t&&(this._anchor=t,this.dirty|=yt.sharp)}get width(){return this._width}set width(t){t<0&&(t=0),this._width!==t&&(this._width=t,this.dirty|=yt.wh)}get height(){return this._height}set height(t){t<0&&(t=0),this._height!==t&&(this._height=t,this.dirty|=yt.wh)}get y(){return this._y}set y(t){this._y=t,this.dirty|=yt.gmyPos}init(){this._mr||(this.__checkPreset_inEditor(),this.initMesh(),this.initV(),this._isUI&&this._listenWH(!0),this._onRAL_VC(),this.updateCount(),this.dirty=yt.none)}onLoad(){this.init()}lateUpdate(){this.updateDirty()}updateImmediate(){this.updateDirty()}_listenWH(t){(t?this.node.on:this.node.off).call(this.node,p.EventType.SIZE_CHANGED,this._onSizeVC,this),t&&this._onSizeVC()}_onSizeVC(){const t=this.node._uiProps.uiTransformComp;if(!t)return;const i=t.contentSize;this.width=i.width,this.height=i.height}updateDirty(){if(!this.dirty)return;let t=this.dirty;this.dirty=yt.none,t&yt.sharp?this._onRAL_VC():t&yt.wh&&(this._onWH_VC()||(t|=yt.sharp)),t&yt.count?this.updateCount():t&yt.sharp?this.updateSharp():t&yt.wh?this.updatePos():t&yt.gmy||t&yt.gmyPos?this.updateGmyPoss():t&yt.mesh&&this.updateMesh()}updateCount(){this._updateCount(),this.updateSharp()}updateSharp(){this._updateSharp(),this.updatePos()}updatePos(){this._updatePos(),this.updateGmy()}updateGmy(){this._updateGmy(),this.updateMesh()}updateGmyPoss(){this._updateGmyPoss(),this.updateMesh()}initMesh(){if(this._mr=this.getComponent(a)||this.addComponent(a),this._mr.mesh=this._mesh=new u,this._mesh.name="create by RoundRect",!this._mr.sharedMaterial){const t=new c;t.name="create by RoundRect",t.initialize({effectName:"builtin-unlit"}),t.setProperty("mainColor",this._color,0),this._mr.sharedMaterials=[t]}}updateMesh(){this._mr.mesh=d.MeshUtils.createDynamicMesh(0,this._geometry,this._mesh,this._options)}initV(){const t=this._pPool=new gt((()=>({v3:new l,rp:{v3:new l,i:-1}})));this._tools={getVPoint:()=>t.pop()},this._conners=[[1,1],[1,-1],[-1,-1],[-1,1]].map((t=>new ft(t[0],t[1]))),this._mats=[90,180,-90].map((t=>_.Mat4.fromRotation(new _.Mat4,t*mt,l.UP))),this._geometry={positions:null,indices16:null}}_onRAL_VC(){const t=.5*(this._width<this._height?this._width:this._height);this._realRound=this._round<t?this._round:t,this._outerLineWidth=this._anchor*this._lineWidth;const i=(1-this._anchor)*this._lineWidth;this._innerLineWidth=i<t?i:t}_onWH_VC(){const t=this._realRound,i=this._innerLineWidth,e=this._outerLineWidth;return this._onRAL_VC(),this._realRound===t&&this._innerLineWidth===i&&this._outerLineWidth===e}_updateCount(){this._pPool.recyleAll();const t=this._hasRound?this._roundStep:2,i=this._conners;i.forEach((i=>i.setStep(t,this._tools))),this._showLine&&(this._lines=i.map(((t,e)=>{const s=t.faces[t.faces.length-1].ps,o=i[(e+1)%i.length].faces[0].ps;return{ps:[s[2],s[3],o[0],o[1]]}}))),this._geometry.positions=new Float32Array(3*this._pPool.using.length),this._geometry.indices16=new Uint16Array(4*(t+ +this._showLine)*2*3)}_updateSharp(){const t=this._conners[0];this._hasRound?t.setRAL(this._realRound,this._innerLineWidth,this._outerLineWidth,!this._showLine):t.setAL(this._realRound,this._innerLineWidth,this._outerLineWidth,!this._showLine),this._mats.forEach(((i,e)=>this._conners[e+1].matWith(t,i)))}_updatePos(){const t=.5*this._width-this._realRound,i=.5*this._height-this._realRound;this._conners.forEach((e=>e.setPos(t,i)))}_updateGmy(){this._updateGmyPoss();let t=0;const i=this._geometry.indices16;this._conners.forEach((e=>e.faces.forEach((e=>t=this._drawFace4Idx(i,t,e))))),this._showLine&&this._lines.forEach((e=>t=this._drawFace4Idx(i,t,e)))}_updateGmyPoss(){const t=this._y,i=this._geometry.positions;this._pPool.using.forEach(this._isUI?(t,e)=>{t.rp.i=e;const s=t.rp.v3;i[3*e+0]=s.x,i[3*e+1]=-s.z,i[3*e+2]=0}:(e,s)=>{e.rp.i=s;const o=e.rp.v3;i[3*s+0]=o.x,i[3*s+1]=t,i[3*s+2]=o.z})}_drawFace4Idx(t,i,e){const s=e.ps;return t[i++]=s[0].rp.i,t[i++]=s[1].rp.i,t[i++]=s[3].rp.i,t[i++]=s[0].rp.i,t[i++]=s[3].rp.i,t[i++]=s[2].rp.i,i}}).uipreset={isUI:!0,anchor:0,round:20,lineWidth:10},ut._showEditor=!1,i((J=ut).prototype,"draw",[g],Object.getOwnPropertyDescriptor(J.prototype,"draw"),J.prototype),i(J.prototype,"triCount",[w],Object.getOwnPropertyDescriptor(J.prototype,"triCount"),J.prototype),Y=i(J.prototype,"_",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i(J.prototype,"showEditor",[P],Object.getOwnPropertyDescriptor(J.prototype,"showEditor"),J.prototype),q=i(J.prototype,"_isUI",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i(J.prototype,"isUI",[R],Object.getOwnPropertyDescriptor(J.prototype,"isUI"),J.prototype),K=i(J.prototype,"_color",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.WHITE.clone()}}),i(J.prototype,"color",[z],Object.getOwnPropertyDescriptor(J.prototype,"color"),J.prototype),Q=i(J.prototype,"_showLine",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i(J.prototype,"showLine",[I],Object.getOwnPropertyDescriptor(J.prototype,"showLine"),J.prototype),$=i(J.prototype,"_hasRound",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i(J.prototype,"hasRound",[O],Object.getOwnPropertyDescriptor(J.prototype,"hasRound"),J.prototype),tt=i(J.prototype,"_roundStep",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),i(J.prototype,"roundStep",[S],Object.getOwnPropertyDescriptor(J.prototype,"roundStep"),J.prototype),it=i(J.prototype,"_realRound",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),et=i(J.prototype,"_round",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),i(J.prototype,"round",[M],Object.getOwnPropertyDescriptor(J.prototype,"round"),J.prototype),st=i(J.prototype,"_outerLineWidth",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),ot=i(J.prototype,"_innerLineWidth",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),rt=i(J.prototype,"_lineWidth",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),i(J.prototype,"lineWidth",[j],Object.getOwnPropertyDescriptor(J.prototype,"lineWidth"),J.prototype),nt=i(J.prototype,"_anchor",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),i(J.prototype,"anchor",[G],Object.getOwnPropertyDescriptor(J.prototype,"anchor"),J.prototype),ht=i(J.prototype,"_width",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),i(J.prototype,"width",[F],Object.getOwnPropertyDescriptor(J.prototype,"width"),J.prototype),pt=i(J.prototype,"_height",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),i(J.prototype,"height",[T],Object.getOwnPropertyDescriptor(J.prototype,"height"),J.prototype),at=i(J.prototype,"_y",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),i(J.prototype,"y",[X],Object.getOwnPropertyDescriptor(J.prototype,"y"),J.prototype),B=J))||B)||B));const yt={none:0,count:1,sharp:2,wh:4,gmy:8,gmyPos:16,mesh:32},mt=Math.PI/180;class ft{constructor(t,i){this.faces=[],this.ofsX=t,this.ofsZ=i}setStep(t,i){this.faces.length=t;let e=i.getVPoint(),s=i.getVPoint();for(let o=0;o<t;o++){let t=e,r=s;e=i.getVPoint(),s=i.getVPoint(),this.faces[o]={ps:[t,r,e,s]}}}setAL(t,i,e,s){const o=s&&t-i<0?0:t-i,r=s&&t-i<0?0:t+e;this.faces[0].ps[0].v3.z=this.faces[1].ps[2].v3.x=o,this.faces[0].ps[1].v3.z=this.faces[1].ps[3].v3.x=r;const n=this.faces[0].ps[2].v3,h=this.faces[0].ps[3].v3;n.x=n.z=o,h.x=h.z=r}setRAL(t,i,e,s){const o=1/this.faces.length*90*mt,r=this.faces[0].ps[0].v3,n=this.faces[0].ps[1].v3;r.x=n.x=0;const h=s&&t-i<0?0:t-i,p=s&&t+e<0?0:t+e,a=r.z=h,u=n.z=p;this.faces.forEach(((t,i)=>{const e=(i+1)*o,s=Math.sin(e),r=Math.cos(e),n=t.ps[2],h=t.ps[3];n.v3.x=s*a,n.v3.z=r*a,h.v3.x=s*u,h.v3.z=r*u}))}matWith(t,i){this._matPoint(t.faces[0].ps[0],this.faces[0].ps[0],i),this._matPoint(t.faces[0].ps[1],this.faces[0].ps[1],i),this.faces.forEach(((e,s)=>{this._matPoint(t.faces[s].ps[2],e.ps[2],i),this._matPoint(t.faces[s].ps[3],e.ps[3],i)}))}_matPoint(t,i,e){i.v3.set(t.v3).transformMat4(e)}setPos(t,i){t*=this.ofsX,i*=this.ofsZ,this.updateP(this.faces[0].ps[0],t,i),this.updateP(this.faces[0].ps[1],t,i),this.faces.forEach((e=>{this.updateP(e.ps[2],t,i),this.updateP(e.ps[3],t,i)}))}updateP(t,i,e){const s=t.v3,o=t.rp.v3;o.x=s.x+i,o.z=s.z+e}}class gt{constructor(t){this.cached=[],this.using=[],this.ctor=t}pop(){const t=this.cached.length>0?this.cached.pop():this.ctor();return this.using.push(t),t}push(t){this.cached.push(t);const i=this.using.indexOf(t);-1!==i&&this.using.splice(i,1)}recyleAll(){this.cached.push(...this.using),this.using.length=0}}s._RF.pop()}}}));

System.register("chunks:///_virtual/RubiksCube.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts","./ballmove.ts"],(function(t){var e,i,o,s,n,r,a,l,h,c,u,d,b,f,P,g,y,m,p,C,w,x;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,s=t.EventTarget,n=t.Prefab,r=t.Camera,a=t.Label,l=t._decorator,h=t.Component,c=t.Vec3,u=t.Color,d=t.input,b=t.Input,f=t.Quat,P=t.instantiate,g=t.RigidBodyComponent,y=t.MeshRenderer,m=t.PhysicsSystem,p=t.Node,C=t.tween},function(t){w=t.Global},function(t){x=t.EventSysteml}],execute:function(){var M,_,v,L,R,T,O,S,k,A,E,z,D,I,$;o._RF.push({},"84a22OOgkFE57BFct8ji+px","RubiksCube",void 0);const{ccclass:B,property:F}=l,N=t("EventSystem",new s);t("RubiksCube",(M=B("RubiksCube"),_=F(n),v=F(r),L=F([n]),R=F([n]),T=F(a),O=F(a),M((A=e((k=class extends h{constructor(...t){super(...t),i(this,"cubePrefab",A,this),i(this,"camera",E,this),i(this,"surfacePrefabs",z,this),i(this,"roadPrefabs",D,this),i(this,"operationTimeLabel",I,this),i(this,"rotationCountLabel",$,this),this.newl="",this.selectAxis="",this.direction=1,this.fixedCoordinate=2.2,this.variableCoordinates=[-1.1,0,1.1],this.selectedLayer=[],this.currentAxis="x",this.currentLayerIndex=0,this.isLayerSelected=!1,this.rotationDirection=new c,this.rotating=!1,this.rotationRoot=null,this.startMousePosition=new c,this.endMousePosition=new c,this.selectedCube=null,this.originalColor=new u,this.clickedPlane=null,this.extraCubes=[],this.rotatingCamera=!1,this.lastMousePosition=new c,this.rotationSpeed=.2,this.operationCount=0,this.operationTime=0,this.rotationCount=0,this.boxinwhere="Cube_1_2_1",this.forbiddenPositions=[],this.trueLumber=""}onLoad(){x.on("changeBox",this.boxchange,this)}onDestroy(){console.log("Cleaning up RubiksCube..."),x.off("changeBox",this.boxchange,this),d.off(b.EventType.TOUCH_START,this.onTouchStart,this),d.off(b.EventType.TOUCH_MOVE,this.onTouchMove,this),d.off(b.EventType.TOUCH_END,this.onTouchEnd,this),this.extraCubes.forEach((t=>{t&&t.isValid&&t.destroy()})),this.extraCubes=[],this.unscheduleAllCallbacks(),this.rotationRoot&&(this.rotationRoot.destroy(),this.rotationRoot=null),console.log("RubiksCube cleaned up successfully.")}boxchange(t){console.log(t),t&&(this.boxinwhere=this.newl,console.log(this.boxinwhere,this.newl)),this.rotating=!1}start(){this.createRubiksCube(),this.placePrefabsOnSurfaces(),d.on(b.EventType.TOUCH_START,this.onTouchStart,this),d.on(b.EventType.TOUCH_MOVE,this.onTouchMove,this),d.on(b.EventType.TOUCH_END,this.onTouchEnd,this)}placeRoadPrefabs(){if(!this.roadPrefabs)return void console.error("Road prefab is not assigned.");const t=.51;this.forbiddenPositions.forEach((e=>{let i=new c(e.x,e.y+-.51,e.z),o=new f;-2.2===e.x?(i.x+=t,i.y+=t,f.fromEuler(o,0,0,90)):2.2===e.z&&(i.z-=t,i.y+=t,f.fromEuler(o,90,0,0));const s=P(this.roadPrefabs);s.setParent(this.node),s.setPosition(i),s.setRotation(o),console.log(`Road prefab placed at: ${i.toString()}, rotation: ${o.toString()}`),this.extraCubes.push(s)}))}placePrefabsOnSurfaces(){const t=[{forbiddenPositions:[new c(0,2.2,0),new c(0,2.2,1.1),new c(-2.2,0,0)],lumbermillPosition:new c(-1.75,0,0),lumberPosition:"Cube_0_1_1"},{forbiddenPositions:[new c(-1.1,2.2,0),new c(1.1,0,2.2),new c(-2.2,1.1,1.1),new c(0,2.2,0)],lumbermillPosition:new c(-1.75,1.1,1.1),lumberPosition:"Cube_0_2_2"},{forbiddenPositions:[new c(0,2.2,0),new c(0,1.1,2.2),new c(-2.2,0,0)],lumbermillPosition:new c(-1.75,0,0),lumberPosition:"Cube_0_1_1"},{forbiddenPositions:[new c(0,2.2,0),new c(0,1.1,2.2),new c(-2.2,1.1,1.1)],lumbermillPosition:new c(-1.75,1.1,1.1),lumberPosition:"Cube_0_2_2"},{forbiddenPositions:[new c(-1.1,2.2,1.1),new c(0,-1.1,2.2),new c(-2.2,1.1,1.1),new c(0,0,2.2),new c(-2.2,0,1.1)],lumbermillPosition:new c(-1.75,1.1,1.1),lumberPosition:"Cube_0_2_2"}][w.currentLevelIndex-10];if(this.forbiddenPositions=t.forbiddenPositions,this.placeRoadPrefabs(),console.log(w.currentLevelIndex),console.log(t),this.trueLumber=t.lumberPosition,14==w.currentLevelIndex){this.node.getChildByName("box").setPosition(new c(new c(-1.1,2.2,1.1))),this.boxinwhere="Cube_0_2_2"}const e=this.node.getChildByName("lumbermill");if(e){const i=e.getComponent(g);i&&(i.type=g.Type.STATIC,i.useGravity=!1),e.setPosition(t.lumbermillPosition),console.log(`lumbermill 位置已更新为: ${t.lumbermillPosition}`)}this.placePrefabsOnFace("y",this.fixedCoordinate),this.placePrefabsOnFace("y",-this.fixedCoordinate,f.rotateX(new f,new f,Math.PI)),this.placePrefabsOnFace("x",this.fixedCoordinate,f.rotateZ(new f,new f,-Math.PI/2)),this.placePrefabsOnFace("x",-this.fixedCoordinate,f.rotateZ(new f,new f,Math.PI/2)),this.placePrefabsOnFace("z",this.fixedCoordinate,f.rotateX(new f,new f,Math.PI/2)),this.placePrefabsOnFace("z",-this.fixedCoordinate,f.rotateX(new f,new f,-Math.PI/2))}placePrefabsOnFace(t,e,i=new f){for(let o of this.variableCoordinates)for(let s of this.variableCoordinates){let n=new c;switch(t){case"x":n.set(e,o,s);break;case"y":n.set(o,e,s);break;case"z":n.set(o,s,e)}this.shouldInstantiatePrefab(n)&&this.instantiatePrefab(n,i)}}instantiatePrefab(t,e){const i=Math.floor(Math.random()*this.surfacePrefabs.length),o=this.surfacePrefabs[i],s=P(o);s.setParent(this.node),s.setPosition(t),s.setRotation(e),s.setScale(.55,.55,.55),this.extraCubes.push(s)}shouldInstantiatePrefab(t){return!this.forbiddenPositions.some((e=>e.equals(t)))}createRubiksCube(){this.extraCubes=[];for(let t=0;t<3;t++)for(let e=0;e<3;e++)for(let i=0;i<3;i++){const o=P(this.cubePrefab);o.setParent(this.node),o.setPosition(new c(1.2*(t-1),1.2*(e-1),1.2*(i-1))),o.name=`Cube_${t}_${e}_${i}`;const s=o.getComponent(y);s&&s.material.setProperty("albedo",new u(23,90,55,255))}}onTouchStart(t){if(this.rotating)return;const e=t.getLocation();this.startMousePosition.set(e.x,e.y,0);const i=this.camera.screenPointToRay(e.x,e.y),o=this.raycast(i);if(o&&o.collider){const t=o.collider.node;console.log(`检测到的节点: ${t.name}`);const e=t.getPosition();if(console.log(e),"lumbermill"===t.name){this.selectedCube=this.node.getChildByName(this.trueLumber);const e=t.getPosition(),i=.01;Math.abs(e.x- -1.75)<i?this.clickedPlane="YOZ":Math.abs(e.z-1.75)<i?(this.clickedPlane="XOY",console.log("yes")):this.clickedPlane="XOZ",this.isLayerSelected=!0}else{if(!t.name.startsWith("Cube"))return void console.log("检测到的物体不是 Cube，忽略操作");{this.selectedCube=t;const e=this.selectedCube.getComponent(y);e&&e.material.setProperty("color",new u(255,0,0,255));const i=o.hitNormal;Math.abs(i.x)>Math.abs(i.y)&&Math.abs(i.x)>Math.abs(i.z)?this.clickedPlane="YOZ":Math.abs(i.y)>Math.abs(i.x)&&Math.abs(i.y)>Math.abs(i.z)?this.clickedPlane="XOZ":this.clickedPlane="XOY",this.isLayerSelected=!0,console.log(`Clicked Cube: ${this.selectedCube.name}, Plane: ${this.clickedPlane}`)}}}else console.log("没有检测到物体")}onTouchMove(t){if(!this.isLayerSelected||this.rotating)return;const e=t.getLocation();this.endMousePosition.set(e.x,e.y,0)}onTouchEnd(t){if(!this.isLayerSelected||this.rotating)return;const e=t.getLocation();this.endMousePosition.set(e.x,e.y,0);const i=this.endMousePosition.x-this.startMousePosition.x,o=this.endMousePosition.y-this.startMousePosition.y;Math.sqrt(i*i+o*o)<50?this.handleClick():this.handleSwipe(i,o),this.isLayerSelected=!1,this.clickedPlane=null}handleClick(){if(!this.selectedCube)return;const t=this.node.getChildByName(this.boxinwhere),e=this.selectedCube;if(this.newl=this.selectedCube.name,e&&t){this.rotating=!0;const i=this.getRelativePosition(t,e);console.log(i),null!=i?(console.log(this.clickedPlane),N.emit("moveBall",{relation:i,plane:this.clickedPlane}),console.log(`点击关系: ${i}`)):(console.log("no"),this.rotating=!1)}else console.log("无法识别立方体位置")}handleSwipe(t,e){this.selectedCube&&("XOY"===this.clickedPlane?Math.abs(t)>Math.abs(e)?(this.currentAxis="y",this.rotationDirection.set(0,t>0?-1:1,0)):(this.currentAxis="x",this.rotationDirection.set(e>0?1:-1,0,0)):"XOZ"===this.clickedPlane?t*e>0?(this.currentAxis="z",this.rotationDirection.set(0,0,t>0?1:-1)):(this.currentAxis="x",this.rotationDirection.set(e>0?1:-1,0,0)):"YOZ"===this.clickedPlane&&(Math.abs(t)>Math.abs(e)?(this.currentAxis="y",this.rotationDirection.set(0,t>0?-1:1,0)):(this.currentAxis="z",this.rotationDirection.set(0,0,e>0?1:-1))),this.selectLayer(this.selectedCube,this.currentAxis),this.rotateLayer(),N.emit("swipeHandled"))}getRelativePosition(t,e){const i=t.getPosition(),o=e.getPosition();console.log(i,o);const s=Math.round((o.x-i.x)/1.1),n=Math.round((o.y-i.y)/1.1),r=Math.round((o.z-i.z)/1.1);return console.log(s,n,r),1===s&&0===n&&0===r?"right":-1===s&&0===n&&0===r?"left":0===s&&1===n&&0===r?"up":0===s&&-1===n&&0===r?"down":0===s&&0===n&&1===r?"forward":0===s&&0===n&&-1===r?"backward":null}raycast(t){return m.instance.raycastClosest(t)?m.instance.raycastClosestResult:null}selectLayer(t,e){const i=t.position;this.currentAxis=e,this.currentLayerIndex=Math.round(i[this.currentAxis]),this.selectedLayer=this.node.children.filter((t=>Math.round(t.position[this.currentAxis])===this.currentLayerIndex));const o=this.node.getChildByName("lumbermill"),s=this.node.getChildByName("box");this.extraCubes.push(o),this.extraCubes.push(s);const n=[];this.extraCubes.forEach((t=>{const e=t.getPosition();this.selectedLayer.some((t=>{const i=t.getPosition();return c.distance(e,i)<1.08}))&&n.push(t)})),n.forEach((t=>{this.selectedLayer.push(t)})),this.rotationRoot=new p,this.rotationRoot.setParent(this.node),this.selectedLayer.forEach((t=>{t.setParent(this.rotationRoot)}))}clearLayerSelection(){this.selectedLayer.forEach((t=>{t.setParent(this.node)})),this.rotationRoot&&(this.rotationRoot.destroy(),this.rotationRoot=null),this.selectedLayer=[]}rotateLayer(){this.logPlayerAction("cubeRotate",this.currentAxis,this.currentLayerIndex,this.rotationDirection,void 0,void 0,void 0,void 0,void 0),this.rotationCount+=1,this.rotating=!0;const t=new f,e=new c;"x"===this.currentAxis?(e.set(1,0,0),f.fromAxisAngle(t,e,Math.PI/2*(this.rotationDirection.equals(new c(1,0,0))?-1:1))):"y"===this.currentAxis?(e.set(0,1,0),f.fromAxisAngle(t,e,Math.PI/2*(this.rotationDirection.equals(new c(0,1,0))?-1:1))):"z"===this.currentAxis&&(e.set(0,0,1),f.fromAxisAngle(t,e,Math.PI/2*(this.rotationDirection.equals(new c(0,0,1))?-1:1)));C(this.rotationRoot).to(.5,{rotation:t}).call((()=>{this.rotating=!1,this.selectedLayer.forEach((t=>{const e=new c,i=new f;t.getWorldPosition(e),t.getWorldRotation(i),t.setParent(this.node,!1),t.setWorldPosition(e),t.setWorldRotation(i)})),this.rotationRoot.destroy(),this.rotationRoot=null,this.isLayerSelected=!1,this.updateBallPositionAfterRotation(),console.log("HI")})).start()}async logPlayerAction(t,e,i,o,s,n,r,a,l){const h=localStorage.getItem("currentUsername"),c=localStorage.getItem("sessionToken");if(!h)return void console.error("❌ 错误：用户名未找到。请确保玩家已正确登录。");if(!c)return void console.error("❌ 错误：Session token 未找到。请确保玩家已正确认证。");function u(t,e,i="0"){const o=String(t);return o.length>=e?o:i.repeat(e-o.length)+o}const d=new Date,b=new Date(d.getTime()+288e5),f=`${b.getFullYear()}-${u(b.getMonth()+1,2)}-${u(b.getDate(),2)} ${u(b.getHours(),2)}:${u(b.getMinutes(),2)}:${u(b.getSeconds(),2)}.${u(b.getMilliseconds(),3)}`,P=w.currentLevelIndex??0,g=void 0!==i&&void 0!==o,y=void 0!==s&&void 0!==n&&void 0!==r&&void 0!==a&&void 0!==l;if(!g&&!y)return void console.error("❌ 错误：未提供完整的参数。请提供 Cube_Dimention 和 Cube_Direction，或者 Object_xyz, Object_judge 和 Flag_xyz。");const m={tableName:"game3",data:{Usr_ID:h,Timestep:f,Level:P,Operation:t}};g?(m.data.Cube_Axis=e,m.data.Cube_Dimention=i,m.data.Cube_Direction=o?o.toString():null):y&&(m.data.Object_xyz=s?s.toString():null,m.data.Object_judge=n,m.data.Flag_xyz=r?r.toString():null,m.data.Object_direction=a,m.data.object_panel=l);try{const t=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(m)});if(!t.ok)throw new Error("❌ 错误：无法记录玩家操作");const e=await t.json();console.log("✅ 玩家操作记录成功：",e)}catch(t){console.error("❌ 记录玩家操作时发生错误：",t)}}updateBallPositionAfterRotation(){const t=this.node.getChildByName("Ball");if(t){const e=t.getWorldPosition(),i=new c;this.node.inverseTransformPoint(i,e),t.setPosition(i),console.log(t.position)}else console.log("Ball node not found")}update(t){this.operationTime+=t,this.operationTimeLabel.string=`已用时: ${this.operationTime.toFixed(2)}s`,this.rotationCountLabel.string=`旋转次数: ${this.rotationCount}`}}).prototype,"cubePrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(k.prototype,"camera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(k.prototype,"surfacePrefabs",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=e(k.prototype,"roadPrefabs",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(k.prototype,"operationTimeLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(k.prototype,"rotationCountLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=k))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/Sample_Cursor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoundRect2.ts"],(function(t){var i,e,s,o,n,r,h,a,c,l,u,d,p,_;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.Vec2,n=t.geometry,r=t.Node,h=t._decorator,a=t.Component,c=t.Vec3,l=t.tween,u=t.easing,d=t.instantiate,p=t.Quat},function(t){_=t.RoundRect}],execute:function(){var v,w,g,m,b,R,W,y,f;s._RF.push({},"f4bc0hKbkdE7I3fFb6dtsuu","Sample_Cursor",void 0);const{ccclass:S,property:M}=h;new o,new n.Ray;t("Sample_Cursor",(v=S("RoundRect.Sample_Cursor"),w=M(_),g=M(_),m=M(r),v((W=i((R=class extends a{constructor(...t){super(...t),e(this,"rectSelect",W,this),e(this,"rectTarget",y,this),e(this,"roleRoot",f,this),this._cursorSelect=void 0,this._cursorTarget=void 0}onLoad(){window.sample=this,this._cursorSelect=new I(this.rectSelect),this._cursorTarget=new O(this.rectTarget)}_randomMove(t){const i=.5*Math.random()+.5,e=2*Math.random()*Math.PI,s=new c(Math.sin(e),0,Math.cos(e)),o=s.clone().multiplyScalar(-1);[s,o,o,s].reduce(((t,e)=>t.by(i,{position:e})),l(t)).union().repeatForever().start()}}).prototype,"rectSelect",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(R.prototype,"rectTarget",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=i(R.prototype,"roleRoot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=R))||b));class O{constructor(t){this.node=void 0,this.lineWidth=void 0,this.dur=.5,this._ppt1={anchor:0},this._ppt2={anchor:1},this._tw=void 0,this.rect=t,this.node=t.node,this.lineWidth=t.lineWidth,this.node.active=!1}showWith(t){this.node.active=!0,this.node.parent=t,this.node.position=c.ZERO,this.rect.lineWidth=4*this.lineWidth,l(this.rect).to(this.dur,{lineWidth:this.lineWidth},{easing:u.backOut}).start(),this.rect.anchor=1,this._tw?.stop(),this._tw=l(this.rect).to(this.dur,this._ppt1,{easing:u.sineInOut}).to(this.dur,this._ppt2,{easing:u.sineInOut}).union().repeatForever().start()}hide(){this.node.active=!1,this._tw?.stop(),this._tw=null}}class I{constructor(t){this.node=void 0,this.lineWidth=void 0,this.dur=.5,this._pptMove1={position:c.UP.clone().multiplyScalar(.1)},this._pptMove2={position:c.ZERO},this._pptRot={eulerAngles:c.UP.clone().multiplyScalar(360)},this._tw1=void 0,this._tw2=void 0,this.rect=t,this.node=t.node,this.lineWidth=t.lineWidth,this.node.active=!1}showWith(t){const i=d(this.node);i.active=!0,i.parent=t,i.position=c.ZERO,i.rotation=p.IDENTITY;const e=i.getComponent(_);e&&(e.lineWidth=4*this.lineWidth,l(e).to(this.dur,{lineWidth:this.lineWidth},{easing:u.backOut}).start());l(i).to(this.dur,this._pptMove1,{easing:u.sineInOut}).to(this.dur,this._pptMove2,{easing:u.sineInOut}).union().repeatForever().start(),l(i).by(4*this.dur,this._pptRot).repeatForever().start();return i}hide(){this.node.active=!1,this._tw1?.stop(),this._tw2?.stop(),this._tw1=null,this._tw2=null}}s._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./TopLoad.ts","./Global2.ts","./SingleInfo.ts","./TweenTools.ts"],(function(e){var o,t,n,i,a,l,s,r,c,p,u,h,f,d;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Prefab,a=e.Node,l=e._decorator,s=e.Component,r=e.instantiate,c=e.director},function(e){p=e.AudioMgr},function(e){u=e.TopLoad},function(e){h=e.AssetList},function(e){f=e.SingleInfo},function(e){d=e.TweenTool}],execute:function(){var g,b,S,m,C,x,y,B,P;n._RF.push({},"56f5fp3sXhO/6NLiIqZ1cer","ShopBox",void 0);const{ccclass:L,property:I}=l;e("ShopBox",(g=L("ShopBox"),b=I(i),S=I(a),m=I(a),g((y=o((x=class extends s{constructor(...e){super(...e),t(this,"SingleInfo",y,this),t(this,"MainLoad",B,this),t(this,"Box",P,this),this.Cb=void 0}async start(){const e=parseInt(localStorage.getItem("maxLevel"),10)+1;d.Pop(this.Box);for(let o=0;o<20;o++){let t=r(this.SingleInfo);this.MainLoad.addChild(t),t.setPosition(0,0,0);let n=t.getComponent(f);t.getComponent(f).UpdateStyle(o),n.setClickable(o<=e-1)}}CloseClick(){p.instance.PlayButton(),u.instance.HidePop(h.Pop.ShopBox),this.Cb&&this.Cb()}CloseNo(){p.instance.PlayButton(),u.instance.HidePop(h.Pop.Nobox)}checkAllCameras(){c.getScene().children.forEach((e=>{console.log(e.name),"MainCamera"===e.name&&(e.active=!0)}))}}).prototype,"SingleInfo",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=o(x.prototype,"MainLoad",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=o(x.prototype,"Box",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=x))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/Show_Finish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./typer.ts","./Global2.ts"],(function(t){var e,i,n,o,r,s,a,c,l,u,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,r=t.Button,s=t._decorator,a=t.Component,c=t.Vec3,l=t.tween},function(t){u=t.TypewriterEffect},function(t){f=t.Global}],execute:function(){var h,w,p,d,y,g,b,E,_,S,I,m,D;n._RF.push({},"b47c1GDmCRNF6QX2tYawxDY","Show_Finish",void 0);const{ccclass:v,property:N}=s;t("SceneController",(h=v("SceneController"),w=N(o),p=N(r),d=N(r),y=N(r),g=N(u),h((_=e((E=class extends a{constructor(...t){super(...t),i(this,"targetNode",_,this),i(this,"Easy",S,this),i(this,"Difficult",I,this),i(this,"noAI",m,this),i(this,"typewriterEffect",D,this)}onLoad(){this.targetNode.active=!1,this.targetNode.setScale(new c(0,0,0))}start(){this._showNodeWithScaleAnimation(this.targetNode,(()=>{this._startTypewriterEffect()}))}_showNodeWithScaleAnimation(t,e){t.setScale(new c(1,1,1)),l(t).to(.5,{scale:new c(2,2,2)},{easing:"backOut"}).call((()=>{e&&e()})).start()}_startTypewriterEffect(){if(!this.typewriterEffect)return void console.error("TypewriterEffect 组件未绑定！");const t=f.currentLevelIndex;if(localStorage.getItem("isAI")){const e=`恭喜你通过了第 ${t+1} 关卡，你觉得通过这个关卡还算轻松吗？`;this.typewriterEffect.startTypingQueue([e]),this.typewriterEffect.node.once("dialogue-finished",this._showIKnowButton,this)}else{const e=`恭喜你通过了第 ${t+1} 关卡！`;this.typewriterEffect.startTypingQueue([e]),this.typewriterEffect.node.once("dialogue-finished",this._showIKnowButton2,this)}}_showIKnowButton(){this.Easy.node.active=!0,this.Easy.node.setScale(new c(0,0,0)),l(this.Easy.node).to(.3,{scale:new c(1,1,1)},{easing:"backOut"}).start(),this.Difficult.node.active=!0,this.Difficult.node.setScale(new c(0,0,0)),l(this.Difficult.node).to(.3,{scale:new c(1,1,1)},{easing:"backOut"}).start()}_showIKnowButton2(){this.noAI.node.active=!0,this.noAI.node.setScale(new c(0,0,0)),l(this.noAI.node).to(.3,{scale:new c(1,1,1)},{easing:"backOut"}).start()}_onDialogueFinished(){console.log("对话完成，开始执行其他逻辑！")}}).prototype,"targetNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(E.prototype,"Easy",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(E.prototype,"Difficult",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(E.prototype,"noAI",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(E.prototype,"typewriterEffect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=E))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/Show.ts",["./rollupPluginModLoBabelHelpers.js","cc","./typer.ts","./Global2.ts"],(function(t){var e,i,n,o,r,s,a,c,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Button,r=t.Node,s=t._decorator,a=t.Component,c=t.Vec3,l=t.tween},function(t){u=t.TypewriterEffect},function(t){h=t.Global}],execute:function(){var d,w,f,p,g,b,B,y,K,N;n._RF.push({},"e08cfGOpfxI0KPhOoN2fHxa","Show",void 0);const{ccclass:_,property:m}=s;t("SceneController",(d=_("SceneController"),w=m(o),f=m(r),p=m(u),d((B=e((b=class extends a{constructor(...t){super(...t),i(this,"iKnowButton",B,this),i(this,"targetNode",y,this),i(this,"typewriterEffect",K,this),i(this,"dialogueText",N,this),this.dialogues={0:["你好，勇者！\n欢迎来到这个世界！\n在这类关卡中\n你需要滑动屏幕翻滚方块\n使得立方体上的按钮与棋盘上的按钮重合\n救出小房子吧！"],5:["我们又见面啦！\n这是全新的挑战！\n旋转并释放立方体\n使得所有立方体穿越下面的孔洞吧！"],10:["恭喜你突破了重重关卡！\n在这个世界里\n你需要移动箱子，旋转魔方\n使其顺利回到家中！"],15:["你真厉害！\n这是最后的挑战了\n点击三个相同的立方体消除它们吧！\n如果感到困难\n可以利用旁边的工具给立方体上色哦！"]}}onLoad(){this.iKnowButton&&(this.iKnowButton.node.active=!1),this.targetNode.active=!1}start(){const t=h.currentLevelIndex;this.dialogues[t]&&(this.targetNode.active=!0,this.dialogueText=this.dialogues[t],this.targetNode&&this._showNodeWithAnimation(this.targetNode,(()=>{this.typewriterEffect&&(this.typewriterEffect.startTypingQueue(this.dialogueText),this.typewriterEffect.node.once("dialogue-finished",this._showIKnowButton,this))})))}_showNodeWithAnimation(t,e){t.active=!0,t.setScale(new c(1,1,1)),l(t).to(.5,{scale:new c(2,2,2)},{easing:"backOut"}).call((()=>{e&&e()})).start()}_showIKnowButton(){this.iKnowButton?(this.iKnowButton.node.active=!0,this.iKnowButton.node.setScale(new c(0,0,0)),l(this.iKnowButton.node).to(.3,{scale:new c(1,1,1)},{easing:"backOut"}).start(),this.iKnowButton.node.on("click",this._onIKnowButtonClicked,this)):console.error("iKnowButton 未绑定！")}_onIKnowButtonClicked(){console.log("用户点击了 '我知道了' 按钮，隐藏引导节点。"),this.targetNode&&this._hideNodeWithAnimation(this.targetNode,(()=>{console.log("引导结束！")})),this.iKnowButton&&this._hideNodeWithAnimation(this.iKnowButton.node)}_hideNodeWithAnimation(t,e){l(t).to(.3,{scale:new c(0,0,0)},{easing:"backIn"}).call((()=>{t.active=!1,e&&e()})).start()}}).prototype,"iKnowButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(b.prototype,"targetNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(b.prototype,"typewriterEffect",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(b.prototype,"dialogueText",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=b))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/SingleInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LocalMgr.ts","./Global2.ts"],(function(e){var t,i,n,o,s,l,a,r,c,u,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Label,s=e.Node,l=e.Button,a=e._decorator,r=e.Component,c=e.director,u=e.assetManager},function(e){h=e.LocalMgr},function(e){d=e.Global}],execute:function(){var b,p,I,f,g,w,x,N,S;n._RF.push({},"78216u/Qh1B96tNA5WMPDau","SingleInfo",void 0);const{ccclass:C,property:k}=a;e("SingleInfo",(b=C("SingleInfo"),p=k(o),I=k(s),f=k(l),b((x=t((w=class extends r{constructor(...e){super(...e),this.NowIndex=0,i(this,"Coin",x,this),this.isClickable=!0,i(this,"MaskBg",N,this),i(this,"button",S,this)}UpdateStyle(e){this.NowIndex=e,this.Coin.string=h.instance.LocalInfo.catinfo["cat"+this.NowIndex.toString()],this.button.interactable=this.isClickable}setClickable(e){this.isClickable=e,this.button.interactable=e,this.MaskBg&&(this.MaskBg.active=!e)}CatClick(){d.currentLevelIndex=this.NowIndex,this.NowIndex>=0&&this.NowIndex<=4?c.loadScene("flip"):this.NowIndex>=5&&this.NowIndex<=9?c.loadScene("adjust"):this.NowIndex>=10&&this.NowIndex<=14?c.loadScene("second"):this.NowIndex>=15&&this.NowIndex<=19?c.loadScene("choose"):console.error("Invalid NowIndex value:",this.NowIndex)}loadSceneWithCleanup(e){u.assets.forEach((e=>{e.refCount||u.releaseAsset(e)})),c.loadScene(e)}}).prototype,"Coin",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(w.prototype,"MaskBg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(w.prototype,"button",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=w))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/StartLab.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,n,l,a,i,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t.Node,l=t._decorator,a=t.Component,i=t.UIOpacity,c=t.tween,s=t.director}],execute:function(){var p,u,f,g,y,d,h;r._RF.push({},"24922C82p9Agp9Jwoz8PqOR","StartLab",void 0);const{ccclass:S,property:b}=l;t("Startup",(p=S("Startup"),u=b({type:n}),f=b({type:n}),p((d=e((y=class extends a{constructor(...t){super(...t),o(this,"fullScreenMask",d,this),o(this,"logo",h,this)}start(){if(!this.fullScreenMask||!this.logo)return void console.error("请绑定 fullScreenMask 和 logo 节点");const t=this.logo.getComponent(i)||this.logo.addComponent(i),e=this.fullScreenMask.getComponent(i)||this.fullScreenMask.addComponent(i);t.opacity=0,e.opacity=255,c(t).to(1,{opacity:255}).start(),c(e).to(1,{opacity:0}).call((()=>{console.log("淡入完成，开始淡出..."),this.fadeOut(t,e)})).start()}fadeOut(t,e){c(t).to(1.5,{opacity:0}).start(),c(e).to(1.5,{opacity:255}).call((()=>{console.log("淡出完成，切换到新场景..."),s.loadScene("loginscene")})).start()}}).prototype,"fullScreenMask",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(y.prototype,"logo",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/startNPC.ts",["./rollupPluginModLoBabelHelpers.js","cc","./typer.ts"],(function(t){var e,i,r,n,o,a,s,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t.Node,o=t._decorator,a=t.Component,s=t.Vec3,c=t.tween},function(t){u=t.TypewriterEffect}],execute:function(){var l,p,f,h,g,d,y,b;r._RF.push({},"bca9bID6C9LpKzvD5SvZ3Sf","startNPC",void 0);const{ccclass:w,property:N}=o;t("SceneController",(l=w("SceneController"),p=N(n),f=N(u),l((d=e((g=class extends a{constructor(...t){super(...t),i(this,"targetNode",d,this),i(this,"typewriterEffect",y,this),i(this,"dialogueText",b,this)}onLoad(){}start(){this._showNodeWithAnimation(this.targetNode,(()=>{this._startNPCJumpAnimation(),this.typewriterEffect&&this.typewriterEffect.startTypingQueue(this.dialogueText)}))}_showNodeWithAnimation(t,e){t.active=!0,t.setScale(new s(1,1,1)),c(t).to(.5,{scale:new s(2,2,2)},{easing:"backOut"}).call((()=>{e&&e()})).start()}_startNPCJumpAnimation(){this.targetNode&&c(this.targetNode).repeatForever(c().by(.5,{position:new s(0,20,0)},{easing:"sineInOut"}).by(.5,{position:new s(0,-20,0)},{easing:"sineInOut"})).start()}}).prototype,"targetNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(g.prototype,"typewriterEffect",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(g.prototype,"dialogueText",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["欢迎来到立方体的世界\n我是你的小伙伴Cube\n我会陪伴你闯过重重关卡\n你准备好了吗！"]}}),h=g))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/Step.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResMgr.ts"],(function(e){var t,i,s,p,o,n,r,a,h,d,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){s=e.cclegacy,p=e.Node,o=e._decorator,n=e.Component,r=e.Animation,a=e.Sprite,h=e.UIOpacity,d=e.Vec3},function(e){c=e.ResMgr}],execute:function(){var m,l,y,g,S;s._RF.push({},"2d2b3SZG6FDQ6L4hRTT84lj","Step",void 0);const{ccclass:u,property:P}=o;e("Step",(m=u("Step"),l=P(p),m((S=t((g=class extends n{constructor(...e){super(...e),this.MyWidth=166,this.MyHeight=30,this.Vx=0,this.MoveSpeed=0,i(this,"Prop",S,this),this.PropType="",this.IsDisappear=!1,this.DisappearTime=0,this.PropWidth=56,this.PropHeight=56}PlayAnimation(){this.node.getChildByName("Step").getComponent(r).play()}UpdateStyle(e,t,i){if(this.MoveSpeed=0,this.node.getChildByName("Step").getComponent(a).spriteFrame=c.instance.SpriteFrames.step0,this.IsDisappear=!1,this.node.getComponent(r).stop(),this.node.getComponent(h).opacity=255,this.Prop.active=!1,e){let e=Math.random();e<.2?(this.MoveSpeed=-3,this.node.getChildByName("Step").getComponent(a).spriteFrame=c.instance.SpriteFrames.step1):e>.7&&(this.MoveSpeed=3,this.node.getChildByName("Step").getComponent(a).spriteFrame=c.instance.SpriteFrames.step1)}t&&(this.node.getChildByName("Step").getComponent(a).spriteFrame=c.instance.SpriteFrames.step2,this.IsDisappear=!0,this.DisappearTime=180,this.node.getComponent(r).play()),i&&(this.Prop.active=!0,this.PropType=i,this.Prop.getComponent(a).spriteFrame=c.instance.SpriteFrames[this.PropType]),this.Vx=this.MoveSpeed}UpdatePosition(){if(0==this.Vx||!this.node.active)return;let e=this.node.getPosition().add(new d(this.Vx,0,0));(e.x<-(375-this.MyWidth/2)||e.x>375-this.MyWidth/2)&&(this.Vx*=-1),this.node.setPosition(e)}CheckDisappear(){this.IsDisappear&&this.node.active&&(this.DisappearTime--,this.DisappearTime<=0&&(this.IsDisappear=!1,this.node.setPosition(new d(0,-800,0))))}}).prototype,"Prop",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=g))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/StepLoad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts","./BgLoad.ts","./ElementLoad.ts","./Step.ts"],(function(t){var e,i,s,o,a,r,n,p,h,l,S,c,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.Prefab,a=t.Node,r=t._decorator,n=t.Component,p=t.Vec3,h=t.instantiate},function(t){l=t.Global,S=t.PropList},function(t){c=t.BgLoad},function(t){u=t.ElementLoad},function(t){d=t.Step}],execute:function(){var m,D,C,y,f,g,v;s._RF.push({},"ba6b7/ccK1ES5P6KS5NxWv9","StepLoad",void 0);const{ccclass:b,property:L}=r;t("StepLoad",(m=b("StepLoad"),D=L(o),C=L(a),m((g=e((f=class extends n{constructor(...t){super(...t),i(this,"Step",g,this),this.StepArray=[],i(this,"ElementLoad",v,this),this.StarPos=new p(0,-50),this.StepCount=10,this.MoveDistance=0,this.StepDistance=100,this.CreateStepNum=0,this.MoveDis=10,this.DisappearDis=7,this.CoinDis=2,this.BoomDis=15,this.SpeedDis=10}start(){}StepMove(t){for(let e of this.StepArray)e.setPosition(e.getPosition().add(new p(0,t)));if(c.instance.BgMove(t),this.ElementLoad.getComponent(u).UpdateScore(t/10),this.MoveDistance+=Math.abs(t),this.MoveDistance>=this.StepDistance){this.MoveDistance=0;let t=584,e=new p(-t/2+Math.random()*t,667);this.GetStep(e,0,"")}for(let t of this.StepArray)t.getPosition().y<l.GameBottom&&(t.active=!1)}GetStep(t,e,i){if(this.CreateStepNum++,this.CreateStepNum%this.CoinDis==0&&(i=S.Coin),this.CreateStepNum%this.BoomDis==0&&(i=S.Boom),0==this.StepArray.length)this.CreateStep(t,e,i);else{let s=-1;for(let t=0;t<this.StepArray.length;t++)this.StepArray[t].active||(s=t);-1==s?this.CreateStep(t,e,i):(this.StepArray[s].active=!0,this.StepArray[s].setPosition(t),this.StepArray[s].getComponent(d).UpdateStyle(this.CreateStepNum%this.MoveDis==0,this.CreateStepNum%this.DisappearDis==0,i))}l.IsDebug&&console.log("台阶数组",this.StepArray.length)}update(t){for(let t of this.StepArray)t.getComponent(d).UpdatePosition(),t.getComponent(d).CheckDisappear()}CreateStep(t,e,i){let s=h(this.Step);this.node.addChild(s),s.setPosition(t),s.getComponent(d).UpdateStyle(this.CreateStepNum%this.MoveDis==0,this.CreateStepNum%this.DisappearDis==0,i),this.StepArray.push(s)}}).prototype,"Step",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(f.prototype,"ElementLoad",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=f))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/Stop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts"],(function(e){var t,a,n,s,i,o,r,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Node,i=e._decorator,o=e.Component,r=e.director,l=e.systemEvent,c=e.SystemEvent},function(e){u=e.Global}],execute:function(){var g,m,p,h,d,y,f;n._RF.push({},"8fe86nuRB1HMYYqGEcOQTRg","Stop",void 0);const{ccclass:P,property:S}=i;e("PauseHandler",(g=P("PauseHandler"),m=S(s),p=S(s),g((y=t((d=class extends o{constructor(...e){super(...e),a(this,"pauseMenu",y,this),a(this,"mainCamera",f,this),this.isPaused=!1}start(){this.logPlayerAction("StartGame")}onPauseGame(){r.getScheduler().setTimeScale(0),this.logPlayerAction("PauseGame"),this.isPaused=!0,console.log("Game paused"),this.pauseMenu&&(this.pauseMenu.active=!0),this.mainCamera&&(this.mainCamera.active=!1),l.off(c.EventType.MOUSE_UP,this.globalClickHandler,this)}onResumeGame(){r.getScheduler().setTimeScale(1),this.isPaused=!1,this.logPlayerAction("ResumeGame"),console.log("Game resumed"),this.pauseMenu&&(this.pauseMenu.active=!1),this.mainCamera&&(this.mainCamera.active=!0),l.on(c.EventType.MOUSE_UP,this.globalClickHandler,this)}globalClickHandler(e){this.isPaused&&console.log("Game is paused, ignoring global clicks.")}async logPlayerAction(e){const t=localStorage.getItem("currentUsername"),a=localStorage.getItem("sessionToken");function n(e,t,a="0"){const n=String(e);return n.length>=t?n:a.repeat(t-n.length)+n}const s=new Date,i=new Date(s.getTime()+288e5),o={tableName:"user_operate",data:{Usr_ID:t,Operation:e,Timestep:`${i.getFullYear()}-${n(i.getMonth()+1,2)}-${n(i.getDate(),2)} ${n(i.getHours(),2)}:${n(i.getMinutes(),2)}:${n(i.getSeconds(),2)}.${n(i.getMilliseconds(),3)}`,Level:u.currentLevelIndex??0}};try{const e=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(o)});if(!e.ok)throw new Error("❌ 错误：无法记录玩家操作");const t=await e.json();console.log("✅ 玩家操作记录成功：",t)}catch(e){console.error("❌ 记录玩家操作时发生错误：",e)}}}).prototype,"pauseMenu",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(d.prototype,"mainCamera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/SurfacePlace.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,r,i,s,n,o,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.Prefab,s=e._decorator,n=e.Component,o=e.Quat,c=e.Vec3,f=e.instantiate}],execute:function(){var l,u,h,b,P;r._RF.push({},"f58a6NEXM5BW56RDfVlE5qF","SurfacePlace",void 0);const{ccclass:p,property:d}=s;e("RubiksCubeSurfacePlacer",(l=p("RubiksCubeSurfacePlacer"),u=d(i),l((P=t((b=class extends n{constructor(...e){super(...e),a(this,"surfacePrefab",P,this),this.fixedCoordinate=2.2,this.variableCoordinates=[-1.1,0,1.1]}start(){this.placePrefabsOnSurfaces()}placePrefabsOnSurfaces(){this.placePrefabsOnFace("y",this.fixedCoordinate),this.placePrefabsOnFace("y",-this.fixedCoordinate,o.rotateX(new o,new o,Math.PI)),this.placePrefabsOnFace("x",this.fixedCoordinate,o.rotateZ(new o,new o,-Math.PI/2)),this.placePrefabsOnFace("x",-this.fixedCoordinate,o.rotateZ(new o,new o,Math.PI/2)),this.placePrefabsOnFace("z",this.fixedCoordinate,o.rotateX(new o,new o,Math.PI/2)),this.placePrefabsOnFace("z",-this.fixedCoordinate,o.rotateX(new o,new o,-Math.PI/2))}placePrefabsOnFace(e,t,a=new o){for(let r of this.variableCoordinates)for(let i of this.variableCoordinates){let s=new c;switch(e){case"x":s.set(t,r,i);break;case"y":s.set(r,t,i);break;case"z":s.set(r,i,t)}this.instantiatePrefab(s,a)}}instantiatePrefab(e,t){const a=f(this.surfacePrefab);a.setParent(this.node),a.setPosition(e),a.setRotation(t)}}).prototype,"surfacePrefab",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/TopLoad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global2.ts","./ResMgr.ts"],(function(t){var o,e,i,n,s,r,l,a,p,c,u,d,h;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,s=t.Label,r=t._decorator,l=t.Component,a=t.instantiate,p=t.UIOpacity,c=t.Tween,u=t.tween},function(t){d=t.Global},function(t){h=t.ResMgr}],execute:function(){var P,g,b,m,y,f,L,w,x,B;i._RF.push({},"478c0wYuWRNT6LwhMu7GK1a","TopLoad",void 0);const{ccclass:D,property:T}=r;t("TopLoad",(P=D("TopLoad"),g=T(n),b=T(n),m=T(s),P(((B=class t extends l{constructor(...t){super(...t),e(this,"PopLoad",L,this),e(this,"PromptBox",w,this),e(this,"PromptContent",x,this),this.Pops={}}onLoad(){t.instance=this}AddPop(t){d.IsDebug&&console.log("显示弹窗",t);let o=a(h.instance.Prefabs[t]);return this.PopLoad.addChild(o),this.Pops[t]=o,d.IsDebug&&console.log("弹窗信息",this.Pops),o}HidePop(t){d.IsDebug&&console.log("隐藏弹窗",t),this.Pops[t].destroy(),delete this.Pops[t],d.IsDebug&&console.log("弹窗信息",this.Pops)}ShowPrompt(t){this.PromptBox.active=!0,this.PromptContent.string=t;let o=this.PromptBox.getComponent(p);o.opacity=0,c.stopAllByTarget(o),u(o).to(.3,{opacity:255}).delay(1).to(.3,{opacity:0}).call((()=>{this.PromptBox.active=!1})).start()}}).instance=null,L=o((f=B).prototype,"PopLoad",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=o(f.prototype,"PromptBox",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=o(f.prototype,"PromptContent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/TorusHit.ts",["cc"],(function(o){var e,r,t;return{setters:[function(o){e=o.cclegacy,r=o.Component,t=o._decorator}],execute:function(){var s;e._RF.push({},"19f16JN4ihCtKDQuSmn41jA","TorusHit",void 0);const{ccclass:c,property:n}=t;o("TorusScript",c("TorusScript")(s=class extends r{start(){console.log("TorusScript has been loaded")}onTriggerEnter(o){console.log("Torus has collided with Cube2!"),"Cube2"===o.otherCollider.node.name&&console.log("Torus has collided with Cube2!")}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/TweenTools.ts",["cc"],(function(t){var e,o,n,a,s,i,c;return{setters:[function(t){e=t.cclegacy,o=t.Component,n=t.tween,a=t.Vec3,s=t.easing,i=t.UIOpacity,c=t._decorator}],execute:function(){var l;e._RF.push({},"f6108I+yfZMKKrX0a4fOGCy","TweenTools",void 0);const{ccclass:p,property:r}=c;t("TweenTool",p("TweenTool")(l=class extends o{static ScreenBoom(t,e){let o=.1,s=1.2;n(t).to(o,{scale:new a(s,s,s),angle:10}).to(o,{scale:new a(1,1,1),angle:0}).to(o,{scale:new a(s,s,s),angle:-10}).to(o,{scale:new a(1,1,1),angle:0}).call((()=>{e&&e()})).start()}static Pop(t,e=null){n(t).tag(1).set({scale:new a(0,0,0)}).to(.3,{scale:new a(1,1,1)},{easing:s.backOut}).call((()=>{e&&e()})).start()}static SceneMove(t,e,o,a=null){n(t).set({position:e}).to(.3,{position:o},{easing:s.backOut}).call((()=>{a&&a()})).start()}static SceneMove1(t,e,o,a=null){n(t).set({position:e}).to(.3,{position:o},{easing:s.backIn}).call((()=>{a&&a()})).start()}static CatAppear(t,e=null){let o=t.getPosition().add(new a(0,-150,0)),i=t.getPosition();n(t).set({position:o}).to(.3,{position:i},{easing:s.backOut}).call((()=>{e&&e()})).start()}static CatDisplay(t,e=null){let o=t.getPosition().add(new a(0,-150,0)),i=t.getPosition();n(t).set({position:i}).to(.3,{position:o},{easing:s.backIn}).call((()=>{e&&e()})).start()}static CoinAppear(t,e){let o=t.getPosition().add(new a(0,50,0));t.getComponent(i).opacity=255,n(t).to(1,{position:o},{easing:s.backOut,onUpdate:(e,o)=>{t.getComponent(i).opacity=225-225*o},onComplete:t=>{t.active=!1,e&&e()}}).start()}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/typer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,r,n,l,a,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,r=t.Label,n=t.ScrollView,l=t._decorator,a=t.Component,h=t.UITransform}],execute:function(){var o,c,u,d,p,_,g,y;s._RF.push({},"c39edUeYrtGH5iaQWwz2vFW","typer",void 0);const{ccclass:x,property:T}=l;var f=function(t){return t[t.Typing=0]="Typing",t[t.WaitingForClick=1]="WaitingForClick",t[t.Finished=2]="Finished",t}(f||{});t("TypewriterEffect",(o=x("TypewriterEffect"),c=T(r),u=T(n),o((_=e((p=class extends a{constructor(...t){super(...t),i(this,"label",_,this),i(this,"scrollView",g,this),i(this,"defaultTypingSpeed",y,this),this._dialogueQueue=[],this._currentText="",this._currentIndex=0,this._state=f.Finished,this._displayedCharacters="",this._timeElapsed=0}startTypingQueue(t){this._resetState(),this._dialogueQueue=t.slice(),this._playNextDialogue()}_resetState(){this._currentText="",this._currentIndex=0,this._displayedCharacters="",this.label.string="",this._state=f.Finished,this._timeElapsed=0}_playNextDialogue(){this._dialogueQueue.length>0?(this._currentText=this._dialogueQueue.shift(),this._currentIndex=0,this._displayedCharacters="",this.label.string="",this._state=f.Typing):(this._state=f.Finished,this.node.emit("dialogue-finished"))}update(t){this._state===f.Typing&&(this._timeElapsed+=t,this._timeElapsed>=this.defaultTypingSpeed&&(this._timeElapsed=0,this._currentIndex<this._currentText.length&&(this._displayedCharacters+=this._currentText[this._currentIndex],this.label.string=this._displayedCharacters,this._currentIndex++,this._updateScrollPosition()),this._currentIndex>=this._currentText.length&&(this._state=f.WaitingForClick,this.node.emit("dialogue-finished"))))}_updateScrollPosition(){const t=this.scrollView.content.getComponent(h),e=this.scrollView.node.getComponent(h).height,i=this.label.node.getComponent(h).height;t.height=Math.max(i,e),this.scrollView.scrollToBottom(.1)}appendText(t){console.log("追加文本: ",t),t&&(this._state===f.Typing&&this._finishCurrentText(),this._currentText+=t,this._state=f.Typing)}_finishCurrentText(){this._displayedCharacters+=this._currentText.slice(this._currentIndex),this.label.string=this._displayedCharacters,this._currentIndex=this._currentText.length,this._updateScrollPosition(),this._state=f.WaitingForClick}onDestroy(){this.unscheduleAllCallbacks()}}).prototype,"label",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(p.prototype,"scrollView",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(p.prototype,"defaultTypingSpeed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),d=p))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/UI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Cubes.ts","./Sample_Cursor.ts","./Global2.ts"],(function(t){var e,o,s,i,n,r,a,l,c,h,u,d,g,m,p,_,C,y,T,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.EventTarget,n=t.Node,r=t._decorator,a=t.Component,l=t.Vec3,c=t.Color,h=t.Input,u=t.Camera,d=t.geometry,g=t.PhysicsSystem,m=t.view,p=t.toRadian,_=t.toDegree,C=t.MeshRenderer},function(t){y=t.Cubes},function(t){T=t.Sample_Cursor},function(t){f=t.Global}],execute:function(){var b,v,S,P,w,D,E,N,M,O,x,z,H,U,L;s._RF.push({},"58c51RL9/xIhYqAgUBJ/SLW","UI",void 0);const R=t("EventSystem",new i),{ccclass:A,property:$}=r;t("UI",(b=A("UI"),v=$(n),S=$(n),P=$(n),w=$(y),D=$(T),E=$([n]),b((O=e((M=class extends a{constructor(...t){super(...t),o(this,"cameraNode",O,this),o(this,"uiNode",x,this),o(this,"selcetNode",z,this),o(this,"cubes",H,this),o(this,"sampleCursor",U,this),this._touchStartPos=new l,this._touchEndPos=new l,this._touchThreshold=10,this._dragPath=[],this._lastSamplePos=new l,this._sampleThreshold=10,this._totalDistance=0,this.camera0=null,this._isDragging=!1,this._lastTouchPos=new l,this.isColorMode=!1,o(this,"colorButtons",L,this),this.selectedColor=new c(255,255,255,255)}onDestroy(){this.node.off(h.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(h.EventType.TOUCH_END,this.onTouchEnd,this)}onLoad(){this.node.on(n.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(n.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(n.EventType.TOUCH_END,this.onTouchEnd,this),this.camera0=this.cameraNode.getChildByName("Camera0").getComponent(u)}start(){this.node.on(n.EventType.TOUCH_START,this.pickCube,this)}onClickColorButton(t,e){const o={green:new c(0,255,0,255),yellow:new c(121,82,0,255),red:new c(255,0,0,255)}[e.toLowerCase()];this.isColorMode=!0,o?(this.selectedColor=o,console.log(`当前选择的颜色为: ${this.selectedColor.toHEX()}`)):console.error(`未定义的颜色: ${e}`)}onTouchStart(t){const e=t.getLocation();this._touchStartPos.set(e.x,e.y,0),this._lastTouchPos.set(e.x,e.y,0),this._isDragging=!1,this._totalDistance=0}onTouchMove(t){const e=t.getLocation(),o=e.x-this._lastTouchPos.x,s=e.y-this._lastTouchPos.y,i=Math.sqrt(o*o+s*s);if(this._totalDistance+=i,!this._isDragging&&this._totalDistance>this._touchThreshold&&(this._isDragging=!0,console.log("拖拽开始"),R.emit("drag")),this._isDragging){const t=.1;this.cameraNode.eulerAngles=new l(this.cameraNode.eulerAngles.x+s*t,this.cameraNode.eulerAngles.y-o*t,this.cameraNode.eulerAngles.z)}const n=(new Date).toISOString();(this._lastSamplePos.equals(new l(0,0,0))||i>=this._sampleThreshold)&&(this._dragPath.push({x:e.x,y:e.y,time:n}),this._lastSamplePos.set(e.x,e.y,0)),this._lastTouchPos.set(e.x,e.y,0),this._lastTouchPos.set(e.x,e.y,0)}onTouchEnd(t){const e=t.getLocation();if(this._touchEndPos.set(e.x,e.y,0),!this._isDragging&&this._totalDistance<this._touchThreshold)console.log("点击操作");else{console.log("拖拽结束");const t={dragPath:this._dragPath,totalDistance:this._totalDistance};this.logPlayerAction("Drag",void 0,void 0,void 0,void 0,JSON.stringify(t)),console.log("上传的数据：",t)}this._isDragging=!1,this._totalDistance=0,this._touchStartPos.set(0,0,0),this._touchEndPos.set(0,0,0)}pickCube(t){const e=new d.Ray;if(!this.camera0)return console.error("Camera0 未初始化"),!1;if(this.camera0.screenPointToRay(t.getLocationX(),t.getLocationY(),e),g.instance.raycastClosest(e)){const t=g.instance.raycastClosestResult;if(!t)return!1;let e=t.collider.node;if(!this.isColorMode)return e=this._findRootNode(e,/^\d+_\d+$/),e?(this.cubes.selectCube(e),R.emit("Select"),!0):(console.warn("未能找到 Cube 节点"),!1);{const t=e.parent?e.parent.name:"无父节点";console.log("已改变颜色的节点为:",e.name),console.log("该节点的父节点名称为:",t);if(/^\d+_\d+$/.test(t))return this._changeChildrenColor(e,this.selectedColor),console.log("颜色已改变，符合规则的父节点为:",t),this.logPlayerAction("ChangeColor",void 0,e.name,t,this.selectedColor.toHEX()),!0}}return!1}async logPlayerAction(t,e,o,s,i,n){const r=localStorage.getItem("currentUsername"),a=localStorage.getItem("sessionToken");if(!r)return void console.error("❌ 错误：用户名未找到。请确保玩家已正确登录。");if(!a)return void console.error("❌ 错误：Session token 未找到。请确保玩家已正确认证。");function l(t,e,o="0"){const s=String(t);return s.length>=e?s:o.repeat(e-s.length)+s}const c=new Date,h=new Date(c.getTime()+288e5),u=`${h.getFullYear()}-${l(h.getMonth()+1,2)}-${l(h.getDate(),2)} ${l(h.getHours(),2)}:${l(h.getMinutes(),2)}:${l(h.getSeconds(),2)}.${l(h.getMilliseconds(),3)}`,d=f.currentLevelIndex??0,g=void 0!==e,m=void 0!==o&&void 0!==s&&void 0!==i,p=void 0!==n;if(!g&&!m&&!p)return void console.error("❌ 错误：未提供完整的参数。");const _={tableName:"game4",data:{Usr_ID:r,Timestep:u,Level:d,Operation:t,Drag:n}};g?_.data.Object=e:m?(_.data.Object_Color=o,_.data.Color_Father=s,_.data.Color=i):p&&(_.drag=n);try{const t=await fetch("http://124.71.181.62:3000/api/insertData",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(_)});if(!t.ok)throw new Error("❌ 错误：无法记录玩家操作");const e=await t.json();console.log("✅ 玩家操作记录成功：",e)}catch(t){console.error("❌ 记录玩家操作时发生错误：",t)}}enterSelectMode(){this.isColorMode=!1,console.log("已进入选择立方体模式")}_findRootNode(t,e){for(;t;){if(e.test(t.name))return t;t=t.parent}return null}btnStart(){this.cubes.resetLevel(),this.cubes.faPai()}btnHePai(){this.cubes.hePai()}fixCamera(){const t=m.getVisibleSize(),e=t.width/t.height;if(this.camera0=this.cameraNode.getChildByName("Camera0").getComponent(u),e>.5){const t=this.verticalFOVToHorizontal(45,e);this.camera0.fov=t}else this.camera0.fov=this.horizontalFOVToVertical(45,e);this.camera0.camera.update(!0)}verticalFOVToHorizontal(t,e){const o=p(t),s=Math.tan(o/2),i=2*Math.atan(s*e);return _(i)}horizontalFOVToVertical(t,e){const o=p(t),s=Math.tan(o/2),i=2*Math.atan(s/e);return _(i)}_changeChildrenColor(t,e){const o=t.getComponent(C);o&&o.material.setProperty("albedo",e)}}).prototype,"cameraNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(M.prototype,"uiNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(M.prototype,"selcetNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(M.prototype,"cubes",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(M.prototype,"sampleCursor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(M.prototype,"colorButtons",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=M))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/unfoldplay.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,i,r,l,s,a,p;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.initializerDefineProperty},function(n){o=n.cclegacy,i=n.Animation,r=n._decorator,l=n.Component,s=n.input,a=n.Input,p=n.KeyCode}],execute:function(){var c,u,y,f,d;o._RF.push({},"19c42nWy9FG7JEwR0n/OIsQ","unfoldplay",void 0);const{ccclass:h,property:m}=r;n("PlayerController",(c=h("unfoldplay"),u=m(i),c((d=e((f=class extends l{constructor(...n){super(...n),t(this,"anim",d,this)}start(){s.on(a.EventType.KEY_DOWN,this.onKeyDown,this)}onKeyDown(n){n.keyCode===p.SPACE&&this.playAnim()}playAnim(){this.anim&&this.anim.play("CubeUnfolding")}onDestroy(){s.off(a.EventType.KEY_DOWN,this.onKeyDown,this)}}).prototype,"anim",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/Vec3Util.ts",["cc","./MathUtil.ts"],(function(t){var e,r,a,n;return{setters:[function(t){e=t.cclegacy,r=t.Vec3,a=t.Mat4},function(t){n=t.MathUtil}],execute:function(){e._RF.push({},"71a90/ZCz5OooNKftKEIq7/","Vec3Util",void 0);class i{static get x(){return new r(1,0,0)}static get y(){return new r(0,1,0)}static get z(){return new r(0,0,1)}static get left(){return new r(-1,0,0)}static get right(){return new r(1,0,0)}static get up(){return new r(0,1,0)}static get down(){return new r(0,-1,0)}static get forward(){return new r(0,0,1)}static get back(){return new r(0,0,-1)}static get one(){return new r(1,1,1)}static get zero(){return new r(0,0,0)}static progress(t,e,a){var i=new r;return i.x=n.progress(t.x,e.x,a),i.y=n.progress(t.y,e.y,a),i.z=n.progress(t.z,e.z,a),i}static add(t,e){var a=new r;return r.add(a,t,e),a}static sub(t,e){var a=new r;return r.subtract(a,t,e),a}static mul(t,e){var a=new r;return r.multiplyScalar(a,t,e),a}static div(t,e){var a=new r;return a.x=t.x/e,a.y=t.y/e,a.z=t.z/e,a}static equals(t,e){return t.x==e.x&&t.y==e.y&&t.z==e.z}static magnitude(t){return t.length()}static normalize(t){return new r(t.x,t.y,t.z).normalize()}static direction(t,e){var a=new r;return r.subtract(a,e,t),a.normalize()}static distance(t,e){return r.distance(t,e)}static lerp(t,e,r){return this.bezierOne(r,t,e)}static slerp(t,e,a){if(a<=0)return t;if(a>=1)return e;var n=this.rotateTo(t,e,r.angle(t,e)/Math.PI*180*a),i=e.length()*a+t.length()*(1-a);return n.normalize().multiplyScalar(i)}static rotateTo(t,e,n){if(0==r.angle(t,e))return e;var i=new r;r.cross(i,t,e),i.normalize();var l=n*Math.PI/180,c=new a;return c.rotate(l,i),new r(t.x*c.m00+t.y*c.m04+t.z*c.m08,t.x*c.m01+t.y*c.m05+t.z*c.m09,t.x*c.m02+t.y*c.m06+t.z*c.m10)}static bezierOne(t,e,r){t>1?t=1:t<0&&(t=0);var a=e.clone(),n=r.clone();return a.multiplyScalar(1-t).add(n.multiplyScalar(t))}static bezierTwo(t,e,a,n){t>1?t=1:t<0&&(t=0);var i=1-t,l=t*t,c=e.clone(),s=new r,u=a.clone(),o=n.clone();return s.add(c.multiplyScalar(i*i)),s.add(u.multiplyScalar(2*i*t)),s.add(o.multiplyScalar(l)),s}static bezierThree(t,e,r,a,n){t>1?t=1:t<0&&(t=0);var i=1-t,l=i*i,c=l*i,s=t*t,u=s*t,o=e.clone(),d=e.clone(),m=r.clone(),y=a.clone(),z=n.clone();return d.add(o.multiplyScalar(c)),d.add(m.multiplyScalar(3*l*t)),d.add(y.multiplyScalar(3*i*s)),d.add(z.multiplyScalar(u)),d}static dot(t,e){var r=t,a=e;return r.x*a.x+r.y*a.y+r.z*a.z}static cross(t,e){var a=new r(1,0,0),n=new r(0,1,0),i=new r(0,0,1),l=new r(t.x,t.y,t.z),c=new r(e.x,e.y,e.z),s=a.multiplyScalar(l.y*c.z-c.y*l.z),u=n.multiplyScalar(c.x*l.z-l.x*c.z),o=i.multiplyScalar(l.x*c.y-c.x*l.y);return s.add(u).add(o)}static angle(t,e){var r=this.dot(t.clone().normalize(),e.clone().normalize());return Math.acos(r)/Math.PI*180*Math.sign(r)}static dirAngle(t,e){var r=i.cross(t,e);return i.angle(t,e)*Math.sign(i.dot(r.normalize(),i.cross(e.normalize(),t.normalize())))}}t("Vec3Util",i),e._RF.pop()}}}));

System.register("chunks:///_virtual/video.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,r,t,i,s,l;return{setters:[function(e){o=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){t=e.cclegacy,i=e.VideoPlayer,s=e._decorator,l=e.Component}],execute:function(){var n,a,c,u,p;t._RF.push({},"c5ed7r9G2NIbouVpUZMXwM7","video",void 0);const{ccclass:d,property:y}=s;e("VideoController",(n=d("VideoController"),a=y(i),n((p=o((u=class extends l{constructor(...e){super(...e),r(this,"videoPlayer",p,this)}start(){this.videoPlayer.play()}pauseVideo(){this.videoPlayer.pause()}stopVideo(){this.videoPlayer.stop()}seekTo(e){this.videoPlayer.currentTime=e}}).prototype,"videoPlayer",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=u))||c));t._RF.pop()}}}));

System.register("chunks:///_virtual/WebViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,o,s,n,r,w,l,c,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){o=e.cclegacy,s=e.WebView,n=e._decorator,r=e.Component,w=e.UITransform,l=e.view,c=e.ResolutionPolicy,h=e.log}],execute:function(){var a,b,V,d,u;o._RF.push({},"fc96crqV5VGfYpyhfj8cCX4","WebViewController",void 0);const{ccclass:p,property:g}=n;e("WebViewController",(a=p("WebViewController"),b=g(s),a((u=i((d=class extends r{constructor(...e){super(...e),t(this,"webView",u,this),this.targetUrl="https://www.w3schools.com"}start(){if(!this.webView)return void console.error("WebView is not assigned!");const e=this.webView.node.getComponent(w);e?(console.log("WebView Node Status:"),console.log(`Active: ${this.webView.node.active}`),console.log(`Size: ${e.contentSize.width} x ${e.contentSize.height}`),this.setupCanvasResolution(),this.openWebView(this.targetUrl),this.addWebViewEvents()):console.error("UITransform is missing on WebView node!")}setupCanvasResolution(){if(l.setDesignResolutionSize(720,1280,c.FIXED_WIDTH),this.webView){const e=this.webView.node.getComponent(w);if(e){const i=l.getVisibleSize();e.width=i.width,e.height=i.height}}}openWebView(e){this.webView&&(this.webView.url=e,this.webView.node.active=!0)}closeWebView(){this.webView&&(this.webView.node.active=!1)}addWebViewEvents(){this.webView&&(this.webView.node.on("loading",(e=>{h(`WebView is loading: ${e.url}`)}),this),this.webView.node.on("loaded",(e=>{h(`WebView loaded successfully: ${e.url}`)}),this),this.webView.node.on("error",(e=>{h(`WebView failed to load: ${e.url}`)}),this))}}).prototype,"webView",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=d))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/WxAdMgr.ts",["cc","./Global2.ts"],(function(e){var t,s,d,i;return{setters:[function(e){t=e.cclegacy,s=e._decorator,d=e.Component},function(e){i=e.Global}],execute:function(){var n,o;t._RF.push({},"104976WrbdFDrDfvttwjUXT","WxAdMgr",void 0);const{ccclass:r,property:h}=s;e("WxAdMgr",r("WxAdMgr")(((o=class e extends d{constructor(...e){super(...e),this.VideoAd=null,this.BannerAd=null,this.GridAd=null,this.Cb=null}static get Instance(){return this._instance||(this._instance=new e),this._instance}Init(e,t,s){this.VideoAd=wx.createRewardedVideoAd({adUnitId:e}),this.VideoAd.onLoad((()=>{i.IsDebug&&console.log("微信广告加载成功")})),this.VideoAd.onError((e=>{i.IsDebug&&console.log("激励视频广告加载失败",e)})),this.VideoAd.onClose((e=>{this.VideoClose(e.isEnded)})),t&&(this.BannerAd=wx.createBannerAd({adUnitId:t,adIntervals:30,style:{left:0,top:0,width:screen.width}}),this.BannerAd.onResize((e=>{this.BannerAd.top=screen.height-e.height}))),s&&(this.GridAd=wx.createGridAd({adUnitId:s,adIntervals:30,style:{left:0,top:screen.height/2-200}}))}ShowRewardVideoAd(e){this.VideoAd.load().then((()=>{this.VideoAd.show().catch((e=>{i.IsDebug&&console.log("视频广告加载失败",e),this.VideoClose(!1)}))}))}ShowBannerAd(e){e?(this.BannerAd.show(),this.BannerAd.style.top=screen.height-this.BannerAd.style.realHeight):this.BannerAd.hide()}ShowGridAd(e){e?this.GridAd.ad.show():this.GridAd.ad.hide()}VideoClose(e){i.IsDebug&&console.log("用户是否看完了广告",e),this.Cb&&this.Cb(e)}})._instance=null,n=o))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/WxTools.ts",["cc","./Global2.ts"],(function(t){var e,s,o,c;return{setters:[function(t){e=t.cclegacy,s=t._decorator,o=t.Component},function(t){c=t.Global}],execute:function(){var i,n;e._RF.push({},"0ac59WDei9E1IdNqEgZwdt0","WxTools",void 0);const{ccclass:a,property:l}=s;t("WxTools",a("WxTools")(((n=class extends o{static SetStorage(t,e){wx.setStorageSync(t,e)}static GetStorage(t){return""==wx.getStorageSync(t)?null:JSON.parse(wx.getStorageSync(t))}static Share(t,e){c.IsWx&&wx.shareAppMessage({title:t,imageUrlId:this.PicId[e],imageUrl:this.PicUrl[e]})}static SetShare(){if(!c.IsWx)return;Math.floor(this.PicUrl.length*Math.random());wx.onShareAppMessage(function(){return{title:"快来帮小笨鸟加加速"}}.bind(this))}static ShareMenu(){c.IsWx&&wx.showShareMenu({menus:["shareAppMessage","shareTimeline"]})}static ShowToast(t,e,s=2e3){wx.showToast({title:t,icon:e,duration:s})}static HideToast(){wx.hideToast()}static ShowModal(t,e,s,o,i){wx.showModal({title:"提示",content:"这是一个模态弹窗",showCancel:!1,editable:!0,success(t){t.confirm?c.IsDebug&&console.log("用户点击确定"):t.cancel&&c.IsDebug&&console.log("用户点击取消")}})}static ShowLoading(t,e=!0,s=null,o=null,c=null){wx.showLoading({title:t,mask:e,success:s,fail:o,complete:c})}static HideLoading(){wx.hideLoading()}static ShowActionSheet(t,e,s="#000000",o=null,c=null,i=null){wx.showActionSheet({alertText:t,itemList:e,itemColor:s,success:o,fail:c,complete:i})}static VibrateShort(t="medium"){c.IsWx&&wx.vibrateShort({type:t})}static VibrateLong(){wx.vibrateLong()}static GetUserInfor(t){wx.getSetting({success(e){if(e.authSetting["scope.userInfo"])wx.getUserInfo({success:function(e){c.IsDebug&&console.log(e.userInfo),t(e.userInfo)}});else{let e=wx.getSystemInfoSync(),s=e.screenWidth,o=e.screenHeight,i=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:s,height:o,lineHeight:0,backgroundColor:"",color:"#ffffff",textAlign:"center",fontSize:16}});i.onTap((e=>{c.IsDebug&&console.log(e),t(e.userInfo),i.destroy()}))}}})}}).PicUrl=["https://mmocgame.qpic.cn/wechatgame/7oibW3uRtGFOhYIpRRBfBXgmpc0lKbhSOTkcc0MkLf2icHKCVicGcyeh8YD3mjRV07h/0"],n.PicId=["TUyoQsD9Qg+D10vm3YXIOw=="],i=n))||i);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});